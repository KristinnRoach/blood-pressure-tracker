(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();function d(e){let t=i();t.unshift(e),localStorage.setItem("bpHistory",JSON.stringify(t))}function i(){return JSON.parse(localStorage.getItem("bpHistory")||"[]")}function u(e){let t=i();t.splice(e,1),localStorage.setItem("bpHistory",JSON.stringify(t))}function c(e,t){return e>180||t>120?{class:"crisis",text:"CRISIS - Seek immediate medical attention"}:e>=140||t>=90?{class:"high2",text:"High Blood Pressure Stage 2"}:e>=130&&e<=139||t>=80&&t<=89?{class:"high1",text:"High Blood Pressure Stage 1"}:e>=120&&e<=129&&t<80?{class:"elevated",text:"Elevated Blood Pressure"}:e<120&&t<80?{class:"normal",text:"Normal Blood Pressure"}:{class:"elevated",text:"Check values"}}function g(e){return e<60?"Low":e>100?"High":"Normal"}function m(e,t,n){const r=c(e,t),o=g(n),s=document.getElementById("status");s.className="status "+r.class,s.innerHTML=`
    <strong>${r.text}</strong><br>
    ${e}/${t} mmHg<br>
    Pulse: ${n} bpm (${o})
  `}function a(){const e=i(),t=document.getElementById("history");if(e.length===0){t.innerHTML="<p>No readings yet</p>";return}t.innerHTML=e.map((n,r)=>{const o=new Date(n.date);return c(n.systolic,n.diastolic),`
        <div class="entry">
          <div>
            <strong>${n.systolic}/${n.diastolic}</strong> mmHg, ${n.pulse} bpm<br>
            <small>${o.toLocaleDateString()} ${o.toLocaleTimeString()}</small>
          </div>
          <button class="delete" onclick="window.deleteReadingHandler(${r})">Delete</button>
        </div>
      `}).join("")}function f(e){u(e),a()}window.addReading=p;window.deleteReadingHandler=f;function p(){console.log("Adding reading...");const e=parseInt(document.getElementById("systolic").value),t=parseInt(document.getElementById("diastolic").value),n=parseInt(document.getElementById("pulse").value);if(console.log("Input values:",{sys:e,dia:t,pulse:n}),!e||!t||!n){alert("Please enter all three values"),console.log("Validation failed: missing values");return}const r={systolic:e,diastolic:t,pulse:n,date:new Date().toISOString()};console.log("Saving reading:",r),d(r),document.getElementById("systolic").value="",document.getElementById("diastolic").value="",document.getElementById("pulse").value="",console.log("Updating UI..."),m(e,t,n),a(),console.log("Reading added successfully")}document.addEventListener("DOMContentLoaded",()=>{console.log("Blood Pressure Tracker initialized"),a()});
