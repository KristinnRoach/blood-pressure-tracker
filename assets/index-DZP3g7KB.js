var jl=Object.defineProperty;var Nl=(n,t,e)=>t in n?jl(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var ot=(n,t,e)=>Nl(n,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function e(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=e(s);fetch(s.href,o)}})();var lo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Hl(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var xa={exports:{}};(function(n,t){(function(e,i){n.exports=i()})(lo,function(){var e=function(r,l){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var p in f)Object.prototype.hasOwnProperty.call(f,p)&&(u[p]=f[p])})(r,l)},i=function(){return(i=Object.assign||function(r){for(var l,u=1,f=arguments.length;u<f;u++)for(var p in l=arguments[u])Object.prototype.hasOwnProperty.call(l,p)&&(r[p]=l[p]);return r}).apply(this,arguments)};function s(r,l,u){for(var f,p=0,m=l.length;p<m;p++)!f&&p in l||((f=f||Array.prototype.slice.call(l,0,p))[p]=l[p]);return r.concat(f||Array.prototype.slice.call(l))}var o=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:lo,a=Object.keys,c=Array.isArray;function h(r,l){return typeof l!="object"||a(l).forEach(function(u){r[u]=l[u]}),r}typeof Promise>"u"||o.Promise||(o.Promise=Promise);var d=Object.getPrototypeOf,g={}.hasOwnProperty;function b(r,l){return g.call(r,l)}function v(r,l){typeof l=="function"&&(l=l(d(r))),(typeof Reflect>"u"?a:Reflect.ownKeys)(l).forEach(function(u){I(r,u,l[u])})}var w=Object.defineProperty;function I(r,l,u,f){w(r,l,h(u&&b(u,"get")&&typeof u.get=="function"?{get:u.get,set:u.set,configurable:!0}:{value:u,configurable:!0,writable:!0},f))}function T(r){return{from:function(l){return r.prototype=Object.create(l.prototype),I(r.prototype,"constructor",r),{extend:v.bind(null,r.prototype)}}}}var R=Object.getOwnPropertyDescriptor,z=[].slice;function U(r,l,u){return z.call(r,l,u)}function J(r,l){return l(r)}function G(r){if(!r)throw new Error("Assertion Failed")}function K(r){o.setImmediate?setImmediate(r):setTimeout(r,0)}function Q(r,l){if(typeof l=="string"&&b(r,l))return r[l];if(!l)return r;if(typeof l!="string"){for(var u=[],f=0,p=l.length;f<p;++f){var m=Q(r,l[f]);u.push(m)}return u}var y=l.indexOf(".");if(y!==-1){var _=r[l.substr(0,y)];return _==null?void 0:Q(_,l.substr(y+1))}}function Y(r,l,u){if(r&&l!==void 0&&!("isFrozen"in Object&&Object.isFrozen(r)))if(typeof l!="string"&&"length"in l){G(typeof u!="string"&&"length"in u);for(var f=0,p=l.length;f<p;++f)Y(r,l[f],u[f])}else{var m,y,_=l.indexOf(".");_!==-1?(m=l.substr(0,_),(y=l.substr(_+1))===""?u===void 0?c(r)&&!isNaN(parseInt(m))?r.splice(m,1):delete r[m]:r[m]=u:Y(_=!(_=r[m])||!b(r,m)?r[m]={}:_,y,u)):u===void 0?c(r)&&!isNaN(parseInt(l))?r.splice(l,1):delete r[l]:r[l]=u}}function Z(r){var l,u={};for(l in r)b(r,l)&&(u[l]=r[l]);return u}var it=[].concat;function ft(r){return it.apply([],r)}var Re="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(ft([8,16,32,64].map(function(r){return["Int","Uint","Float"].map(function(l){return l+r+"Array"})}))).filter(function(r){return o[r]}),at=new Set(Re.map(function(r){return o[r]})),ct=null;function wt(r){return ct=new WeakMap,r=function l(u){if(!u||typeof u!="object")return u;var f=ct.get(u);if(f)return f;if(c(u)){f=[],ct.set(u,f);for(var p=0,m=u.length;p<m;++p)f.push(l(u[p]))}else if(at.has(u.constructor))f=u;else{var y,_=d(u);for(y in f=_===Object.prototype?{}:Object.create(_),ct.set(u,f),u)b(u,y)&&(f[y]=l(u[y]))}return f}(r),ct=null,r}var Vt={}.toString;function vt(r){return Vt.call(r).slice(8,-1)}var kt=typeof Symbol<"u"?Symbol.iterator:"@@iterator",zt=typeof kt=="symbol"?function(r){var l;return r!=null&&(l=r[kt])&&l.apply(r)}:function(){return null};function qt(r,l){return l=r.indexOf(l),0<=l&&r.splice(l,1),0<=l}var Jt={};function Tt(r){var l,u,f,p;if(arguments.length===1){if(c(r))return r.slice();if(this===Jt&&typeof r=="string")return[r];if(p=zt(r)){for(u=[];!(f=p.next()).done;)u.push(f.value);return u}if(r==null)return[r];if(typeof(l=r.length)!="number")return[r];for(u=new Array(l);l--;)u[l]=r[l];return u}for(l=arguments.length,u=new Array(l);l--;)u[l]=arguments[l];return u}var ve=typeof Symbol<"u"?function(r){return r[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},bn=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Ut=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(bn),_e={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function $t(r,l){this.name=r,this.message=l}function ne(r,l){return r+". Errors: "+Object.keys(l).map(function(u){return l[u].toString()}).filter(function(u,f,p){return p.indexOf(u)===f}).join(`
`)}function ie(r,l,u,f){this.failures=l,this.failedKeys=f,this.successCount=u,this.message=ne(r,l)}function jt(r,l){this.name="BulkError",this.failures=Object.keys(l).map(function(u){return l[u]}),this.failuresByPos=l,this.message=ne(r,this.failures)}T($t).from(Error).extend({toString:function(){return this.name+": "+this.message}}),T(ie).from($t),T(jt).from($t);var ss=Ut.reduce(function(r,l){return r[l]=l+"Error",r},{}),ll=$t,et=Ut.reduce(function(r,l){var u=l+"Error";function f(p,m){this.name=u,p?typeof p=="string"?(this.message="".concat(p).concat(m?`
 `+m:""),this.inner=m||null):typeof p=="object"&&(this.message="".concat(p.name," ").concat(p.message),this.inner=p):(this.message=_e[l]||u,this.inner=null)}return T(f).from(ll),r[l]=f,r},{});et.Syntax=SyntaxError,et.Type=TypeError,et.Range=RangeError;var Or=bn.reduce(function(r,l){return r[l+"Error"]=et[l],r},{}),ti=Ut.reduce(function(r,l){return["Syntax","Type","Range"].indexOf(l)===-1&&(r[l+"Error"]=et[l]),r},{});function mt(){}function mn(r){return r}function cl(r,l){return r==null||r===mn?l:function(u){return l(r(u))}}function Ie(r,l){return function(){r.apply(this,arguments),l.apply(this,arguments)}}function ul(r,l){return r===mt?l:function(){var u=r.apply(this,arguments);u!==void 0&&(arguments[0]=u);var f=this.onsuccess,p=this.onerror;this.onsuccess=null,this.onerror=null;var m=l.apply(this,arguments);return f&&(this.onsuccess=this.onsuccess?Ie(f,this.onsuccess):f),p&&(this.onerror=this.onerror?Ie(p,this.onerror):p),m!==void 0?m:u}}function hl(r,l){return r===mt?l:function(){r.apply(this,arguments);var u=this.onsuccess,f=this.onerror;this.onsuccess=this.onerror=null,l.apply(this,arguments),u&&(this.onsuccess=this.onsuccess?Ie(u,this.onsuccess):u),f&&(this.onerror=this.onerror?Ie(f,this.onerror):f)}}function fl(r,l){return r===mt?l:function(u){var f=r.apply(this,arguments);h(u,f);var p=this.onsuccess,m=this.onerror;return this.onsuccess=null,this.onerror=null,u=l.apply(this,arguments),p&&(this.onsuccess=this.onsuccess?Ie(p,this.onsuccess):p),m&&(this.onerror=this.onerror?Ie(m,this.onerror):m),f===void 0?u===void 0?void 0:u:h(f,u)}}function dl(r,l){return r===mt?l:function(){return l.apply(this,arguments)!==!1&&r.apply(this,arguments)}}function rs(r,l){return r===mt?l:function(){var u=r.apply(this,arguments);if(u&&typeof u.then=="function"){for(var f=this,p=arguments.length,m=new Array(p);p--;)m[p]=arguments[p];return u.then(function(){return l.apply(f,m)})}return l.apply(this,arguments)}}ti.ModifyError=ie,ti.DexieError=$t,ti.BulkError=jt;var se=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Mr(r){se=r}var yn={},Dr=100,Re=typeof Promise>"u"?[]:function(){var r=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[r,d(r),r];var l=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[l,d(l),r]}(),bn=Re[0],Ut=Re[1],Re=Re[2],Ut=Ut&&Ut.then,Le=bn&&bn.constructor,os=!!Re,vn=function(r,l){_n.push([r,l]),ei&&(queueMicrotask(gl),ei=!1)},as=!0,ei=!0,Be=[],ni=[],ls=mn,xe={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:mt,pgp:!1,env:{},finalize:mt},tt=xe,_n=[],Fe=0,ii=[];function $(r){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var l=this._PSD=tt;if(typeof r!="function"){if(r!==yn)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&us(this,this._value))}this._state=null,this._value=null,++l.ref,function u(f,p){try{p(function(m){if(f._state===null){if(m===f)throw new TypeError("A promise cannot be resolved with itself.");var y=f._lib&&tn();m&&typeof m.then=="function"?u(f,function(_,k){m instanceof $?m._then(_,k):m.then(_,k)}):(f._state=!0,f._value=m,Ar(f)),y&&en()}},us.bind(null,f))}catch(m){us(f,m)}}(this,r)}var cs={get:function(){var r=tt,l=ai;function u(f,p){var m=this,y=!r.global&&(r!==tt||l!==ai),_=y&&!ke(),k=new $(function(S,D){hs(m,new Cr(Er(f,r,y,_),Er(p,r,y,_),S,D,r))});return this._consoleTask&&(k._consoleTask=this._consoleTask),k}return u.prototype=yn,u},set:function(r){I(this,"then",r&&r.prototype===yn?cs:{get:function(){return r},set:cs.set})}};function Cr(r,l,u,f,p){this.onFulfilled=typeof r=="function"?r:null,this.onRejected=typeof l=="function"?l:null,this.resolve=u,this.reject=f,this.psd=p}function us(r,l){var u,f;ni.push(l),r._state===null&&(u=r._lib&&tn(),l=ls(l),r._state=!1,r._value=l,f=r,Be.some(function(p){return p._value===f._value})||Be.push(f),Ar(r),u&&en())}function Ar(r){var l=r._listeners;r._listeners=[];for(var u=0,f=l.length;u<f;++u)hs(r,l[u]);var p=r._PSD;--p.ref||p.finalize(),Fe===0&&(++Fe,vn(function(){--Fe==0&&fs()},[]))}function hs(r,l){if(r._state!==null){var u=r._state?l.onFulfilled:l.onRejected;if(u===null)return(r._state?l.resolve:l.reject)(r._value);++l.psd.ref,++Fe,vn(pl,[u,r,l])}else r._listeners.push(l)}function pl(r,l,u){try{var f,p=l._value;!l._state&&ni.length&&(ni=[]),f=se&&l._consoleTask?l._consoleTask.run(function(){return r(p)}):r(p),l._state||ni.indexOf(p)!==-1||function(m){for(var y=Be.length;y;)if(Be[--y]._value===m._value)return Be.splice(y,1)}(l),u.resolve(f)}catch(m){u.reject(m)}finally{--Fe==0&&fs(),--u.psd.ref||u.psd.finalize()}}function gl(){ze(xe,function(){tn()&&en()})}function tn(){var r=as;return ei=as=!1,r}function en(){var r,l,u;do for(;0<_n.length;)for(r=_n,_n=[],u=r.length,l=0;l<u;++l){var f=r[l];f[0].apply(null,f[1])}while(0<_n.length);ei=as=!0}function fs(){var r=Be;Be=[],r.forEach(function(f){f._PSD.onunhandled.call(null,f._value,f)});for(var l=ii.slice(0),u=l.length;u;)l[--u]()}function si(r){return new $(yn,!1,r)}function xt(r,l){var u=tt;return function(){var f=tn(),p=tt;try{return Se(u,!0),r.apply(this,arguments)}catch(m){l&&l(m)}finally{Se(p,!1),f&&en()}}}v($.prototype,{then:cs,_then:function(r,l){hs(this,new Cr(null,null,r,l,tt))},catch:function(r){if(arguments.length===1)return this.then(null,r);var l=r,u=arguments[1];return typeof l=="function"?this.then(null,function(f){return(f instanceof l?u:si)(f)}):this.then(null,function(f){return(f&&f.name===l?u:si)(f)})},finally:function(r){return this.then(function(l){return $.resolve(r()).then(function(){return l})},function(l){return $.resolve(r()).then(function(){return si(l)})})},timeout:function(r,l){var u=this;return r<1/0?new $(function(f,p){var m=setTimeout(function(){return p(new et.Timeout(l))},r);u.then(f,p).finally(clearTimeout.bind(null,m))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&I($.prototype,Symbol.toStringTag,"Dexie.Promise"),xe.env=Tr(),v($,{all:function(){var r=Tt.apply(null,arguments).map(li);return new $(function(l,u){r.length===0&&l([]);var f=r.length;r.forEach(function(p,m){return $.resolve(p).then(function(y){r[m]=y,--f||l(r)},u)})})},resolve:function(r){return r instanceof $?r:r&&typeof r.then=="function"?new $(function(l,u){r.then(l,u)}):new $(yn,!0,r)},reject:si,race:function(){var r=Tt.apply(null,arguments).map(li);return new $(function(l,u){r.map(function(f){return $.resolve(f).then(l,u)})})},PSD:{get:function(){return tt},set:function(r){return tt=r}},totalEchoes:{get:function(){return ai}},newPSD:we,usePSD:ze,scheduler:{get:function(){return vn},set:function(r){vn=r}},rejectionMapper:{get:function(){return ls},set:function(r){ls=r}},follow:function(r,l){return new $(function(u,f){return we(function(p,m){var y=tt;y.unhandleds=[],y.onunhandled=m,y.finalize=Ie(function(){var _,k=this;_=function(){k.unhandleds.length===0?p():m(k.unhandleds[0])},ii.push(function S(){_(),ii.splice(ii.indexOf(S),1)}),++Fe,vn(function(){--Fe==0&&fs()},[])},y.finalize),r()},l,u,f)})}}),Le&&(Le.allSettled&&I($,"allSettled",function(){var r=Tt.apply(null,arguments).map(li);return new $(function(l){r.length===0&&l([]);var u=r.length,f=new Array(u);r.forEach(function(p,m){return $.resolve(p).then(function(y){return f[m]={status:"fulfilled",value:y}},function(y){return f[m]={status:"rejected",reason:y}}).then(function(){return--u||l(f)})})})}),Le.any&&typeof AggregateError<"u"&&I($,"any",function(){var r=Tt.apply(null,arguments).map(li);return new $(function(l,u){r.length===0&&u(new AggregateError([]));var f=r.length,p=new Array(f);r.forEach(function(m,y){return $.resolve(m).then(function(_){return l(_)},function(_){p[y]=_,--f||u(new AggregateError(p))})})})}),Le.withResolvers&&($.withResolvers=Le.withResolvers));var Mt={awaits:0,echoes:0,id:0},ml=0,ri=[],oi=0,ai=0,yl=0;function we(r,l,u,f){var p=tt,m=Object.create(p);return m.parent=p,m.ref=0,m.global=!1,m.id=++yl,xe.env,m.env=os?{Promise:$,PromiseProp:{value:$,configurable:!0,writable:!0},all:$.all,race:$.race,allSettled:$.allSettled,any:$.any,resolve:$.resolve,reject:$.reject}:{},l&&h(m,l),++p.ref,m.finalize=function(){--this.parent.ref||this.parent.finalize()},f=ze(m,r,u,f),m.ref===0&&m.finalize(),f}function nn(){return Mt.id||(Mt.id=++ml),++Mt.awaits,Mt.echoes+=Dr,Mt.id}function ke(){return!!Mt.awaits&&(--Mt.awaits==0&&(Mt.id=0),Mt.echoes=Mt.awaits*Dr,!0)}function li(r){return Mt.echoes&&r&&r.constructor===Le?(nn(),r.then(function(l){return ke(),l},function(l){return ke(),St(l)})):r}function bl(){var r=ri[ri.length-1];ri.pop(),Se(r,!1)}function Se(r,l){var u,f=tt;(l?!Mt.echoes||oi++&&r===tt:!oi||--oi&&r===tt)||queueMicrotask(l?(function(p){++ai,Mt.echoes&&--Mt.echoes!=0||(Mt.echoes=Mt.awaits=Mt.id=0),ri.push(tt),Se(p,!0)}).bind(null,r):bl),r!==tt&&(tt=r,f===xe&&(xe.env=Tr()),os&&(u=xe.env.Promise,l=r.env,(f.global||r.global)&&(Object.defineProperty(o,"Promise",l.PromiseProp),u.all=l.all,u.race=l.race,u.resolve=l.resolve,u.reject=l.reject,l.allSettled&&(u.allSettled=l.allSettled),l.any&&(u.any=l.any))))}function Tr(){var r=o.Promise;return os?{Promise:r,PromiseProp:Object.getOwnPropertyDescriptor(o,"Promise"),all:r.all,race:r.race,allSettled:r.allSettled,any:r.any,resolve:r.resolve,reject:r.reject}:{}}function ze(r,l,u,f,p){var m=tt;try{return Se(r,!0),l(u,f,p)}finally{Se(m,!1)}}function Er(r,l,u,f){return typeof r!="function"?r:function(){var p=tt;u&&nn(),Se(l,!0);try{return r.apply(this,arguments)}finally{Se(p,!1),f&&queueMicrotask(ke)}}}function ds(r){Promise===Le&&Mt.echoes===0?oi===0?r():enqueueNativeMicroTask(r):setTimeout(r,0)}(""+Ut).indexOf("[native code]")===-1&&(nn=ke=mt);var St=$.reject,je="ï¿¿",he="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Ir="String expected.",sn=[],ci="__dbnames",ps="readonly",gs="readwrite";function Ne(r,l){return r?l?function(){return r.apply(this,arguments)&&l.apply(this,arguments)}:r:l}var Rr={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function ui(r){return typeof r!="string"||/\./.test(r)?function(l){return l}:function(l){return l[r]===void 0&&r in l&&delete(l=wt(l))[r],l}}function Lr(){throw et.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function ut(r,l){try{var u=Br(r),f=Br(l);if(u!==f)return u==="Array"?1:f==="Array"?-1:u==="binary"?1:f==="binary"?-1:u==="string"?1:f==="string"?-1:u==="Date"?1:f!=="Date"?NaN:-1;switch(u){case"number":case"Date":case"string":return l<r?1:r<l?-1:0;case"binary":return function(p,m){for(var y=p.length,_=m.length,k=y<_?y:_,S=0;S<k;++S)if(p[S]!==m[S])return p[S]<m[S]?-1:1;return y===_?0:y<_?-1:1}(Fr(r),Fr(l));case"Array":return function(p,m){for(var y=p.length,_=m.length,k=y<_?y:_,S=0;S<k;++S){var D=ut(p[S],m[S]);if(D!==0)return D}return y===_?0:y<_?-1:1}(r,l)}}catch{}return NaN}function Br(r){var l=typeof r;return l!="object"?l:ArrayBuffer.isView(r)?"binary":(r=vt(r),r==="ArrayBuffer"?"binary":r)}function Fr(r){return r instanceof Uint8Array?r:ArrayBuffer.isView(r)?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):new Uint8Array(r)}function hi(r,l,u){var f=r.schema.yProps;return f?(l&&0<u.numFailures&&(l=l.filter(function(p,m){return!u.failures[m]})),Promise.all(f.map(function(p){return p=p.updatesTable,l?r.db.table(p).where("k").anyOf(l).delete():r.db.table(p).clear()})).then(function(){return u})):u}var xn=(zr.prototype.execute=function(r){var l=this["@@propmod"];if(l.add!==void 0){var u=l.add;if(c(u))return s(s([],c(r)?r:[],!0),u).sort();if(typeof u=="number")return(Number(r)||0)+u;if(typeof u=="bigint")try{return BigInt(r)+u}catch{return BigInt(0)+u}throw new TypeError("Invalid term ".concat(u))}if(l.remove!==void 0){var f=l.remove;if(c(f))return c(r)?r.filter(function(p){return!f.includes(p)}).sort():[];if(typeof f=="number")return Number(r)-f;if(typeof f=="bigint")try{return BigInt(r)-f}catch{return BigInt(0)-f}throw new TypeError("Invalid subtrahend ".concat(f))}return u=(u=l.replacePrefix)===null||u===void 0?void 0:u[0],u&&typeof r=="string"&&r.startsWith(u)?l.replacePrefix[1]+r.substring(u.length):r},zr);function zr(r){this["@@propmod"]=r}function jr(r,l){for(var u=a(l),f=u.length,p=!1,m=0;m<f;++m){var y=u[m],_=l[y],k=Q(r,y);_ instanceof xn?(Y(r,y,_.execute(k)),p=!0):k!==_&&(Y(r,y,_),p=!0)}return p}var Nr=(yt.prototype._trans=function(r,l,u){var f=this._tx||tt.trans,p=this.name,m=se&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(r==="readonly"?"read":"write"," ").concat(this.name));function y(S,D,x){if(!x.schema[p])throw new et.NotFound("Table "+p+" not part of transaction");return l(x.idbtrans,x)}var _=tn();try{var k=f&&f.db._novip===this.db._novip?f===tt.trans?f._promise(r,y,u):we(function(){return f._promise(r,y,u)},{trans:f,transless:tt.transless||tt}):function S(D,x,A,P){if(D.idbdb&&(D._state.openComplete||tt.letThrough||D._vip)){var O=D._createTransaction(x,A,D._dbSchema);try{O.create(),D._state.PR1398_maxLoop=3}catch(M){return M.name===ss.InvalidState&&D.isOpen()&&0<--D._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),D.close({disableAutoOpen:!1}),D.open().then(function(){return S(D,x,A,P)})):St(M)}return O._promise(x,function(M,C){return we(function(){return tt.trans=O,P(M,C,O)})}).then(function(M){if(x==="readwrite")try{O.idbtrans.commit()}catch{}return x==="readonly"?M:O._completion.then(function(){return M})})}if(D._state.openComplete)return St(new et.DatabaseClosed(D._state.dbOpenError));if(!D._state.isBeingOpened){if(!D._state.autoOpen)return St(new et.DatabaseClosed);D.open().catch(mt)}return D._state.dbReadyPromise.then(function(){return S(D,x,A,P)})}(this.db,r,[this.name],y);return m&&(k._consoleTask=m,k=k.catch(function(S){return console.trace(S),St(S)})),k}finally{_&&en()}},yt.prototype.get=function(r,l){var u=this;return r&&r.constructor===Object?this.where(r).first(l):r==null?St(new et.Type("Invalid argument to Table.get()")):this._trans("readonly",function(f){return u.core.get({trans:f,key:r}).then(function(p){return u.hook.reading.fire(p)})}).then(l)},yt.prototype.where=function(r){if(typeof r=="string")return new this.db.WhereClause(this,r);if(c(r))return new this.db.WhereClause(this,"[".concat(r.join("+"),"]"));var l=a(r);if(l.length===1)return this.where(l[0]).equals(r[l[0]]);var u=this.schema.indexes.concat(this.schema.primKey).filter(function(_){if(_.compound&&l.every(function(S){return 0<=_.keyPath.indexOf(S)})){for(var k=0;k<l.length;++k)if(l.indexOf(_.keyPath[k])===-1)return!1;return!0}return!1}).sort(function(_,k){return _.keyPath.length-k.keyPath.length})[0];if(u&&this.db._maxKey!==je){var m=u.keyPath.slice(0,l.length);return this.where(m).equals(m.map(function(k){return r[k]}))}!u&&se&&console.warn("The query ".concat(JSON.stringify(r)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(l.join("+"),"]"));var f=this.schema.idxByName;function p(_,k){return ut(_,k)===0}var y=l.reduce(function(x,k){var S=x[0],D=x[1],x=f[k],A=r[k];return[S||x,S||!x?Ne(D,x&&x.multi?function(P){return P=Q(P,k),c(P)&&P.some(function(O){return p(A,O)})}:function(P){return p(A,Q(P,k))}):D]},[null,null]),m=y[0],y=y[1];return m?this.where(m.name).equals(r[m.keyPath]).filter(y):u?this.filter(y):this.where(l).equals("")},yt.prototype.filter=function(r){return this.toCollection().and(r)},yt.prototype.count=function(r){return this.toCollection().count(r)},yt.prototype.offset=function(r){return this.toCollection().offset(r)},yt.prototype.limit=function(r){return this.toCollection().limit(r)},yt.prototype.each=function(r){return this.toCollection().each(r)},yt.prototype.toArray=function(r){return this.toCollection().toArray(r)},yt.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},yt.prototype.orderBy=function(r){return new this.db.Collection(new this.db.WhereClause(this,c(r)?"[".concat(r.join("+"),"]"):r))},yt.prototype.reverse=function(){return this.toCollection().reverse()},yt.prototype.mapToClass=function(r){var l,u=this.db,f=this.name;function p(){return l!==null&&l.apply(this,arguments)||this}(this.schema.mappedClass=r).prototype instanceof Lr&&(function(k,S){if(typeof S!="function"&&S!==null)throw new TypeError("Class extends value "+String(S)+" is not a constructor or null");function D(){this.constructor=k}e(k,S),k.prototype=S===null?Object.create(S):(D.prototype=S.prototype,new D)}(p,l=r),Object.defineProperty(p.prototype,"db",{get:function(){return u},enumerable:!1,configurable:!0}),p.prototype.table=function(){return f},r=p);for(var m=new Set,y=r.prototype;y;y=d(y))Object.getOwnPropertyNames(y).forEach(function(k){return m.add(k)});function _(k){if(!k)return k;var S,D=Object.create(r.prototype);for(S in k)if(!m.has(S))try{D[S]=k[S]}catch{}return D}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=_,this.hook("reading",_),r},yt.prototype.defineClass=function(){return this.mapToClass(function(r){h(this,r)})},yt.prototype.add=function(r,l){var u=this,f=this.schema.primKey,p=f.auto,m=f.keyPath,y=r;return m&&p&&(y=ui(m)(r)),this._trans("readwrite",function(_){return u.core.mutate({trans:_,type:"add",keys:l!=null?[l]:null,values:[y]})}).then(function(_){return _.numFailures?$.reject(_.failures[0]):_.lastResult}).then(function(_){if(m)try{Y(r,m,_)}catch{}return _})},yt.prototype.upsert=function(r,l){var u=this,f=this.schema.primKey.keyPath;return this._trans("readwrite",function(p){return u.core.get({trans:p,key:r}).then(function(m){var y=m??{};return jr(y,l),f&&Y(y,f,r),u.core.mutate({trans:p,type:"put",values:[y],keys:[r],upsert:!0,updates:{keys:[r],changeSpecs:[l]}}).then(function(_){return _.numFailures?$.reject(_.failures[0]):!!m})})})},yt.prototype.update=function(r,l){return typeof r!="object"||c(r)?this.where(":id").equals(r).modify(l):(r=Q(r,this.schema.primKey.keyPath),r===void 0?St(new et.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(r).modify(l))},yt.prototype.put=function(r,l){var u=this,f=this.schema.primKey,p=f.auto,m=f.keyPath,y=r;return m&&p&&(y=ui(m)(r)),this._trans("readwrite",function(_){return u.core.mutate({trans:_,type:"put",values:[y],keys:l!=null?[l]:null})}).then(function(_){return _.numFailures?$.reject(_.failures[0]):_.lastResult}).then(function(_){if(m)try{Y(r,m,_)}catch{}return _})},yt.prototype.delete=function(r){var l=this;return this._trans("readwrite",function(u){return l.core.mutate({trans:u,type:"delete",keys:[r]}).then(function(f){return hi(l,[r],f)}).then(function(f){return f.numFailures?$.reject(f.failures[0]):void 0})})},yt.prototype.clear=function(){var r=this;return this._trans("readwrite",function(l){return r.core.mutate({trans:l,type:"deleteRange",range:Rr}).then(function(u){return hi(r,null,u)})}).then(function(l){return l.numFailures?$.reject(l.failures[0]):void 0})},yt.prototype.bulkGet=function(r){var l=this;return this._trans("readonly",function(u){return l.core.getMany({keys:r,trans:u}).then(function(f){return f.map(function(p){return l.hook.reading.fire(p)})})})},yt.prototype.bulkAdd=function(r,l,u){var f=this,p=Array.isArray(l)?l:void 0,m=(u=u||(p?void 0:l))?u.allKeys:void 0;return this._trans("readwrite",function(y){var S=f.schema.primKey,_=S.auto,S=S.keyPath;if(S&&p)throw new et.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(p&&p.length!==r.length)throw new et.InvalidArgument("Arguments objects and keys must have the same length");var k=r.length,S=S&&_?r.map(ui(S)):r;return f.core.mutate({trans:y,type:"add",keys:p,values:S,wantResults:m}).then(function(O){var x=O.numFailures,A=O.results,P=O.lastResult,O=O.failures;if(x===0)return m?A:P;throw new jt("".concat(f.name,".bulkAdd(): ").concat(x," of ").concat(k," operations failed"),O)})})},yt.prototype.bulkPut=function(r,l,u){var f=this,p=Array.isArray(l)?l:void 0,m=(u=u||(p?void 0:l))?u.allKeys:void 0;return this._trans("readwrite",function(y){var S=f.schema.primKey,_=S.auto,S=S.keyPath;if(S&&p)throw new et.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(p&&p.length!==r.length)throw new et.InvalidArgument("Arguments objects and keys must have the same length");var k=r.length,S=S&&_?r.map(ui(S)):r;return f.core.mutate({trans:y,type:"put",keys:p,values:S,wantResults:m}).then(function(O){var x=O.numFailures,A=O.results,P=O.lastResult,O=O.failures;if(x===0)return m?A:P;throw new jt("".concat(f.name,".bulkPut(): ").concat(x," of ").concat(k," operations failed"),O)})})},yt.prototype.bulkUpdate=function(r){var l=this,u=this.core,f=r.map(function(y){return y.key}),p=r.map(function(y){return y.changes}),m=[];return this._trans("readwrite",function(y){return u.getMany({trans:y,keys:f,cache:"clone"}).then(function(_){var k=[],S=[];r.forEach(function(x,A){var P=x.key,O=x.changes,M=_[A];if(M){for(var C=0,E=Object.keys(O);C<E.length;C++){var L=E[C],B=O[L];if(L===l.schema.primKey.keyPath){if(ut(B,P)!==0)throw new et.Constraint("Cannot update primary key in bulkUpdate()")}else Y(M,L,B)}m.push(A),k.push(P),S.push(M)}});var D=k.length;return u.mutate({trans:y,type:"put",keys:k,values:S,updates:{keys:f,changeSpecs:p}}).then(function(x){var A=x.numFailures,P=x.failures;if(A===0)return D;for(var O=0,M=Object.keys(P);O<M.length;O++){var C,E=M[O],L=m[Number(E)];L!=null&&(C=P[E],delete P[E],P[L]=C)}throw new jt("".concat(l.name,".bulkUpdate(): ").concat(A," of ").concat(D," operations failed"),P)})})})},yt.prototype.bulkDelete=function(r){var l=this,u=r.length;return this._trans("readwrite",function(f){return l.core.mutate({trans:f,type:"delete",keys:r}).then(function(p){return hi(l,r,p)})}).then(function(y){var p=y.numFailures,m=y.lastResult,y=y.failures;if(p===0)return m;throw new jt("".concat(l.name,".bulkDelete(): ").concat(p," of ").concat(u," operations failed"),y)})},yt);function yt(){}function wn(r){function l(y,_){if(_){for(var k=arguments.length,S=new Array(k-1);--k;)S[k-1]=arguments[k];return u[y].subscribe.apply(null,S),r}if(typeof y=="string")return u[y]}var u={};l.addEventType=m;for(var f=1,p=arguments.length;f<p;++f)m(arguments[f]);return l;function m(y,_,k){if(typeof y!="object"){var S;_=_||dl;var D={subscribers:[],fire:k=k||mt,subscribe:function(x){D.subscribers.indexOf(x)===-1&&(D.subscribers.push(x),D.fire=_(D.fire,x))},unsubscribe:function(x){D.subscribers=D.subscribers.filter(function(A){return A!==x}),D.fire=D.subscribers.reduce(_,k)}};return u[y]=l[y]=D}a(S=y).forEach(function(x){var A=S[x];if(c(A))m(x,S[x][0],S[x][1]);else{if(A!=="asap")throw new et.InvalidArgument("Invalid event config");var P=m(x,mn,function(){for(var O=arguments.length,M=new Array(O);O--;)M[O]=arguments[O];P.subscribers.forEach(function(C){K(function(){C.apply(null,M)})})})}})}}function kn(r,l){return T(l).from({prototype:r}),l}function rn(r,l){return!(r.filter||r.algorithm||r.or)&&(l?r.justLimit:!r.replayFilter)}function ms(r,l){r.filter=Ne(r.filter,l)}function ys(r,l,u){var f=r.replayFilter;r.replayFilter=f?function(){return Ne(f(),l())}:l,r.justLimit=u&&!f}function fi(r,l){if(r.isPrimKey)return l.primaryKey;var u=l.getIndexByKeyPath(r.index);if(!u)throw new et.Schema("KeyPath "+r.index+" on object store "+l.name+" is not indexed");return u}function Hr(r,l,u){var f=fi(r,l.schema);return l.openCursor({trans:u,values:!r.keysOnly,reverse:r.dir==="prev",unique:!!r.unique,query:{index:f,range:r.range}})}function di(r,l,u,f){var p=r.replayFilter?Ne(r.filter,r.replayFilter()):r.filter;if(r.or){var m={},y=function(_,k,S){var D,x;p&&!p(k,S,function(A){return k.stop(A)},function(A){return k.fail(A)})||((x=""+(D=k.primaryKey))=="[object ArrayBuffer]"&&(x=""+new Uint8Array(D)),b(m,x)||(m[x]=!0,l(_,k,S)))};return Promise.all([r.or._iterate(y,u),Wr(Hr(r,f,u),r.algorithm,y,!r.keysOnly&&r.valueMapper)])}return Wr(Hr(r,f,u),Ne(r.algorithm,p),l,!r.keysOnly&&r.valueMapper)}function Wr(r,l,u,f){var p=xt(f?function(m,y,_){return u(f(m),y,_)}:u);return r.then(function(m){if(m)return m.start(function(){var y=function(){return m.continue()};l&&!l(m,function(_){return y=_},function(_){m.stop(_),y=mt},function(_){m.fail(_),y=mt})||p(m.value,m,function(_){return y=_}),y()})})}var vl=(dt.prototype._read=function(r,l){var u=this._ctx;return u.error?u.table._trans(null,St.bind(null,u.error)):u.table._trans("readonly",r).then(l)},dt.prototype._write=function(r){var l=this._ctx;return l.error?l.table._trans(null,St.bind(null,l.error)):l.table._trans("readwrite",r,"locked")},dt.prototype._addAlgorithm=function(r){var l=this._ctx;l.algorithm=Ne(l.algorithm,r)},dt.prototype._iterate=function(r,l){return di(this._ctx,r,l,this._ctx.table.core)},dt.prototype.clone=function(r){var l=Object.create(this.constructor.prototype),u=Object.create(this._ctx);return r&&h(u,r),l._ctx=u,l},dt.prototype.raw=function(){return this._ctx.valueMapper=null,this},dt.prototype.each=function(r){var l=this._ctx;return this._read(function(u){return di(l,r,u,l.table.core)})},dt.prototype.count=function(r){var l=this;return this._read(function(u){var f=l._ctx,p=f.table.core;if(rn(f,!0))return p.count({trans:u,query:{index:fi(f,p.schema),range:f.range}}).then(function(y){return Math.min(y,f.limit)});var m=0;return di(f,function(){return++m,!1},u,p).then(function(){return m})}).then(r)},dt.prototype.sortBy=function(r,l){var u=r.split(".").reverse(),f=u[0],p=u.length-1;function m(k,S){return S?m(k[u[S]],S-1):k[f]}var y=this._ctx.dir==="next"?1:-1;function _(k,S){return ut(m(k,p),m(S,p))*y}return this.toArray(function(k){return k.sort(_)}).then(l)},dt.prototype.toArray=function(r){var l=this;return this._read(function(u){var f=l._ctx;if(f.dir==="next"&&rn(f,!0)&&0<f.limit){var p=f.valueMapper,m=fi(f,f.table.core.schema);return f.table.core.query({trans:u,limit:f.limit,values:!0,query:{index:m,range:f.range}}).then(function(_){return _=_.result,p?_.map(p):_})}var y=[];return di(f,function(_){return y.push(_)},u,f.table.core).then(function(){return y})},r)},dt.prototype.offset=function(r){var l=this._ctx;return r<=0||(l.offset+=r,rn(l)?ys(l,function(){var u=r;return function(f,p){return u===0||(u===1?--u:p(function(){f.advance(u),u=0}),!1)}}):ys(l,function(){var u=r;return function(){return--u<0}})),this},dt.prototype.limit=function(r){return this._ctx.limit=Math.min(this._ctx.limit,r),ys(this._ctx,function(){var l=r;return function(u,f,p){return--l<=0&&f(p),0<=l}},!0),this},dt.prototype.until=function(r,l){return ms(this._ctx,function(u,f,p){return!r(u.value)||(f(p),l)}),this},dt.prototype.first=function(r){return this.limit(1).toArray(function(l){return l[0]}).then(r)},dt.prototype.last=function(r){return this.reverse().first(r)},dt.prototype.filter=function(r){var l;return ms(this._ctx,function(u){return r(u.value)}),(l=this._ctx).isMatch=Ne(l.isMatch,r),this},dt.prototype.and=function(r){return this.filter(r)},dt.prototype.or=function(r){return new this.db.WhereClause(this._ctx.table,r,this)},dt.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},dt.prototype.desc=function(){return this.reverse()},dt.prototype.eachKey=function(r){var l=this._ctx;return l.keysOnly=!l.isMatch,this.each(function(u,f){r(f.key,f)})},dt.prototype.eachUniqueKey=function(r){return this._ctx.unique="unique",this.eachKey(r)},dt.prototype.eachPrimaryKey=function(r){var l=this._ctx;return l.keysOnly=!l.isMatch,this.each(function(u,f){r(f.primaryKey,f)})},dt.prototype.keys=function(r){var l=this._ctx;l.keysOnly=!l.isMatch;var u=[];return this.each(function(f,p){u.push(p.key)}).then(function(){return u}).then(r)},dt.prototype.primaryKeys=function(r){var l=this._ctx;if(l.dir==="next"&&rn(l,!0)&&0<l.limit)return this._read(function(f){var p=fi(l,l.table.core.schema);return l.table.core.query({trans:f,values:!1,limit:l.limit,query:{index:p,range:l.range}})}).then(function(f){return f.result}).then(r);l.keysOnly=!l.isMatch;var u=[];return this.each(function(f,p){u.push(p.primaryKey)}).then(function(){return u}).then(r)},dt.prototype.uniqueKeys=function(r){return this._ctx.unique="unique",this.keys(r)},dt.prototype.firstKey=function(r){return this.limit(1).keys(function(l){return l[0]}).then(r)},dt.prototype.lastKey=function(r){return this.reverse().firstKey(r)},dt.prototype.distinct=function(){var r=this._ctx,r=r.index&&r.table.schema.idxByName[r.index];if(!r||!r.multi)return this;var l={};return ms(this._ctx,function(p){var f=p.primaryKey.toString(),p=b(l,f);return l[f]=!0,!p}),this},dt.prototype.modify=function(r){var l=this,u=this._ctx;return this._write(function(f){var p=typeof r=="function"?r:function(M){return jr(M,r)},m=u.table.core,S=m.schema.primaryKey,y=S.outbound,_=S.extractKey,k=200,S=l.db._options.modifyChunkSize;S&&(k=typeof S=="object"?S[m.name]||S["*"]||200:S);function D(M,L){var E=L.failures,L=L.numFailures;A+=M-L;for(var B=0,F=a(E);B<F.length;B++){var N=F[B];x.push(E[N])}}var x=[],A=0,P=[],O=r===Kr;return l.clone().primaryKeys().then(function(M){function C(L){var B=Math.min(k,M.length-L),F=M.slice(L,L+B);return(O?Promise.resolve([]):m.getMany({trans:f,keys:F,cache:"immutable"})).then(function(N){var V=[],j=[],H=y?[]:null,q=O?F:[];if(!O)for(var W=0;W<B;++W){var X=N[W],st={value:wt(X),primKey:M[L+W]};p.call(st,st.value,st)!==!1&&(st.value==null?q.push(M[L+W]):y||ut(_(X),_(st.value))===0?(j.push(st.value),y&&H.push(M[L+W])):(q.push(M[L+W]),V.push(st.value)))}return Promise.resolve(0<V.length&&m.mutate({trans:f,type:"add",values:V}).then(function(rt){for(var lt in rt.failures)q.splice(parseInt(lt),1);D(V.length,rt)})).then(function(){return(0<j.length||E&&typeof r=="object")&&m.mutate({trans:f,type:"put",keys:H,values:j,criteria:E,changeSpec:typeof r!="function"&&r,isAdditionalChunk:0<L}).then(function(rt){return D(j.length,rt)})}).then(function(){return(0<q.length||E&&O)&&m.mutate({trans:f,type:"delete",keys:q,criteria:E,isAdditionalChunk:0<L}).then(function(rt){return hi(u.table,q,rt)}).then(function(rt){return D(q.length,rt)})}).then(function(){return M.length>L+B&&C(L+k)})})}var E=rn(u)&&u.limit===1/0&&(typeof r!="function"||O)&&{index:u.index,range:u.range};return C(0).then(function(){if(0<x.length)throw new ie("Error modifying one or more objects",x,A,P);return M.length})})})},dt.prototype.delete=function(){var r=this._ctx,l=r.range;return!rn(r)||r.table.schema.yProps||!r.isPrimKey&&l.type!==3?this.modify(Kr):this._write(function(u){var f=r.table.core.schema.primaryKey,p=l;return r.table.core.count({trans:u,query:{index:f,range:p}}).then(function(m){return r.table.core.mutate({trans:u,type:"deleteRange",range:p}).then(function(k){var _=k.failures,k=k.numFailures;if(k)throw new ie("Could not delete some values",Object.keys(_).map(function(S){return _[S]}),m-k);return m-k})})})},dt);function dt(){}var Kr=function(r,l){return l.value=null};function _l(r,l){return r<l?-1:r===l?0:1}function xl(r,l){return l<r?-1:r===l?0:1}function Wt(r,l,u){return r=r instanceof qr?new r.Collection(r):r,r._ctx.error=new(u||TypeError)(l),r}function on(r){return new r.Collection(r,function(){return Vr("")}).limit(0)}function pi(r,l,u,f){var p,m,y,_,k,S,D,x=u.length;if(!u.every(function(O){return typeof O=="string"}))return Wt(r,Ir);function A(O){p=O==="next"?function(C){return C.toUpperCase()}:function(C){return C.toLowerCase()},m=O==="next"?function(C){return C.toLowerCase()}:function(C){return C.toUpperCase()},y=O==="next"?_l:xl;var M=u.map(function(C){return{lower:m(C),upper:p(C)}}).sort(function(C,E){return y(C.lower,E.lower)});_=M.map(function(C){return C.upper}),k=M.map(function(C){return C.lower}),D=(S=O)==="next"?"":f}A("next"),r=new r.Collection(r,function(){return Pe(_[0],k[x-1]+f)}),r._ondirectionchange=function(O){A(O)};var P=0;return r._addAlgorithm(function(O,M,C){var E=O.key;if(typeof E!="string")return!1;var L=m(E);if(l(L,k,P))return!0;for(var B=null,F=P;F<x;++F){var N=function(V,j,H,q,W,X){for(var st=Math.min(V.length,q.length),rt=-1,lt=0;lt<st;++lt){var Kt=j[lt];if(Kt!==q[lt])return W(V[lt],H[lt])<0?V.substr(0,lt)+H[lt]+H.substr(lt+1):W(V[lt],q[lt])<0?V.substr(0,lt)+q[lt]+H.substr(lt+1):0<=rt?V.substr(0,rt)+j[rt]+H.substr(rt+1):null;W(V[lt],Kt)<0&&(rt=lt)}return st<q.length&&X==="next"?V+H.substr(V.length):st<V.length&&X==="prev"?V.substr(0,H.length):rt<0?null:V.substr(0,rt)+q[rt]+H.substr(rt+1)}(E,L,_[F],k[F],y,S);N===null&&B===null?P=F+1:(B===null||0<y(B,N))&&(B=N)}return M(B!==null?function(){O.continue(B+D)}:C),!1}),r}function Pe(r,l,u,f){return{type:2,lower:r,upper:l,lowerOpen:u,upperOpen:f}}function Vr(r){return{type:1,lower:r,upper:r}}var qr=(Object.defineProperty(Dt.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Dt.prototype.between=function(r,l,u,f){u=u!==!1,f=f===!0;try{return 0<this._cmp(r,l)||this._cmp(r,l)===0&&(u||f)&&(!u||!f)?on(this):new this.Collection(this,function(){return Pe(r,l,!u,!f)})}catch{return Wt(this,he)}},Dt.prototype.equals=function(r){return r==null?Wt(this,he):new this.Collection(this,function(){return Vr(r)})},Dt.prototype.above=function(r){return r==null?Wt(this,he):new this.Collection(this,function(){return Pe(r,void 0,!0)})},Dt.prototype.aboveOrEqual=function(r){return r==null?Wt(this,he):new this.Collection(this,function(){return Pe(r,void 0,!1)})},Dt.prototype.below=function(r){return r==null?Wt(this,he):new this.Collection(this,function(){return Pe(void 0,r,!1,!0)})},Dt.prototype.belowOrEqual=function(r){return r==null?Wt(this,he):new this.Collection(this,function(){return Pe(void 0,r)})},Dt.prototype.startsWith=function(r){return typeof r!="string"?Wt(this,Ir):this.between(r,r+je,!0,!0)},Dt.prototype.startsWithIgnoreCase=function(r){return r===""?this.startsWith(r):pi(this,function(l,u){return l.indexOf(u[0])===0},[r],je)},Dt.prototype.equalsIgnoreCase=function(r){return pi(this,function(l,u){return l===u[0]},[r],"")},Dt.prototype.anyOfIgnoreCase=function(){var r=Tt.apply(Jt,arguments);return r.length===0?on(this):pi(this,function(l,u){return u.indexOf(l)!==-1},r,"")},Dt.prototype.startsWithAnyOfIgnoreCase=function(){var r=Tt.apply(Jt,arguments);return r.length===0?on(this):pi(this,function(l,u){return u.some(function(f){return l.indexOf(f)===0})},r,je)},Dt.prototype.anyOf=function(){var r=this,l=Tt.apply(Jt,arguments),u=this._cmp;try{l.sort(u)}catch{return Wt(this,he)}if(l.length===0)return on(this);var f=new this.Collection(this,function(){return Pe(l[0],l[l.length-1])});f._ondirectionchange=function(m){u=m==="next"?r._ascending:r._descending,l.sort(u)};var p=0;return f._addAlgorithm(function(m,y,_){for(var k=m.key;0<u(k,l[p]);)if(++p===l.length)return y(_),!1;return u(k,l[p])===0||(y(function(){m.continue(l[p])}),!1)}),f},Dt.prototype.notEqual=function(r){return this.inAnyRange([[-1/0,r],[r,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Dt.prototype.noneOf=function(){var r=Tt.apply(Jt,arguments);if(r.length===0)return new this.Collection(this);try{r.sort(this._ascending)}catch{return Wt(this,he)}var l=r.reduce(function(u,f){return u?u.concat([[u[u.length-1][1],f]]):[[-1/0,f]]},null);return l.push([r[r.length-1],this.db._maxKey]),this.inAnyRange(l,{includeLowers:!1,includeUppers:!1})},Dt.prototype.inAnyRange=function(E,l){var u=this,f=this._cmp,p=this._ascending,m=this._descending,y=this._min,_=this._max;if(E.length===0)return on(this);if(!E.every(function(L){return L[0]!==void 0&&L[1]!==void 0&&p(L[0],L[1])<=0}))return Wt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",et.InvalidArgument);var k=!l||l.includeLowers!==!1,S=l&&l.includeUppers===!0,D,x=p;function A(L,B){return x(L[0],B[0])}try{(D=E.reduce(function(L,B){for(var F=0,N=L.length;F<N;++F){var V=L[F];if(f(B[0],V[1])<0&&0<f(B[1],V[0])){V[0]=y(V[0],B[0]),V[1]=_(V[1],B[1]);break}}return F===N&&L.push(B),L},[])).sort(A)}catch{return Wt(this,he)}var P=0,O=S?function(L){return 0<p(L,D[P][1])}:function(L){return 0<=p(L,D[P][1])},M=k?function(L){return 0<m(L,D[P][0])}:function(L){return 0<=m(L,D[P][0])},C=O,E=new this.Collection(this,function(){return Pe(D[0][0],D[D.length-1][1],!k,!S)});return E._ondirectionchange=function(L){x=L==="next"?(C=O,p):(C=M,m),D.sort(A)},E._addAlgorithm(function(L,B,F){for(var N,V=L.key;C(V);)if(++P===D.length)return B(F),!1;return!O(N=V)&&!M(N)||(u._cmp(V,D[P][1])===0||u._cmp(V,D[P][0])===0||B(function(){x===p?L.continue(D[P][0]):L.continue(D[P][1])}),!1)}),E},Dt.prototype.startsWithAnyOf=function(){var r=Tt.apply(Jt,arguments);return r.every(function(l){return typeof l=="string"})?r.length===0?on(this):this.inAnyRange(r.map(function(l){return[l,l+je]})):Wt(this,"startsWithAnyOf() only works with strings")},Dt);function Dt(){}function re(r){return xt(function(l){return Sn(l),r(l.target.error),!1})}function Sn(r){r.stopPropagation&&r.stopPropagation(),r.preventDefault&&r.preventDefault()}var Pn="storagemutated",bs="x-storagemutated-1",Oe=wn(null,Pn),wl=(oe.prototype._lock=function(){return G(!tt.global),++this._reculock,this._reculock!==1||tt.global||(tt.lockOwnerFor=this),this},oe.prototype._unlock=function(){if(G(!tt.global),--this._reculock==0)for(tt.global||(tt.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var r=this._blockedFuncs.shift();try{ze(r[1],r[0])}catch{}}return this},oe.prototype._locked=function(){return this._reculock&&tt.lockOwnerFor!==this},oe.prototype.create=function(r){var l=this;if(!this.mode)return this;var u=this.db.idbdb,f=this.db._state.dbOpenError;if(G(!this.idbtrans),!r&&!u)switch(f&&f.name){case"DatabaseClosedError":throw new et.DatabaseClosed(f);case"MissingAPIError":throw new et.MissingAPI(f.message,f);default:throw new et.OpenFailed(f)}if(!this.active)throw new et.TransactionInactive;return G(this._completion._state===null),(r=this.idbtrans=r||(this.db.core||u).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=xt(function(p){Sn(p),l._reject(r.error)}),r.onabort=xt(function(p){Sn(p),l.active&&l._reject(new et.Abort(r.error)),l.active=!1,l.on("abort").fire(p)}),r.oncomplete=xt(function(){l.active=!1,l._resolve(),"mutatedParts"in r&&Oe.storagemutated.fire(r.mutatedParts)}),this},oe.prototype._promise=function(r,l,u){var f=this;if(r==="readwrite"&&this.mode!=="readwrite")return St(new et.ReadOnly("Transaction is readonly"));if(!this.active)return St(new et.TransactionInactive);if(this._locked())return new $(function(m,y){f._blockedFuncs.push([function(){f._promise(r,l,u).then(m,y)},tt])});if(u)return we(function(){var m=new $(function(y,_){f._lock();var k=l(y,_,f);k&&k.then&&k.then(y,_)});return m.finally(function(){return f._unlock()}),m._lib=!0,m});var p=new $(function(m,y){var _=l(m,y,f);_&&_.then&&_.then(m,y)});return p._lib=!0,p},oe.prototype._root=function(){return this.parent?this.parent._root():this},oe.prototype.waitFor=function(r){var l,u=this._root(),f=$.resolve(r);u._waitingFor?u._waitingFor=u._waitingFor.then(function(){return f}):(u._waitingFor=f,u._waitingQueue=[],l=u.idbtrans.objectStore(u.storeNames[0]),function m(){for(++u._spinCount;u._waitingQueue.length;)u._waitingQueue.shift()();u._waitingFor&&(l.get(-1/0).onsuccess=m)}());var p=u._waitingFor;return new $(function(m,y){f.then(function(_){return u._waitingQueue.push(xt(m.bind(null,_)))},function(_){return u._waitingQueue.push(xt(y.bind(null,_)))}).finally(function(){u._waitingFor===p&&(u._waitingFor=null)})})},oe.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new et.Abort))},oe.prototype.table=function(r){var l=this._memoizedTables||(this._memoizedTables={});if(b(l,r))return l[r];var u=this.schema[r];if(!u)throw new et.NotFound("Table "+r+" not part of transaction");return u=new this.db.Table(r,u,this),u.core=this.db.core.table(r),l[r]=u},oe);function oe(){}function vs(r,l,u,f,p,m,y,_){return{name:r,keyPath:l,unique:u,multi:f,auto:p,compound:m,src:(u&&!y?"&":"")+(f?"*":"")+(p?"++":"")+$r(l),type:_}}function $r(r){return typeof r=="string"?r:r?"["+[].join.call(r,"+")+"]":""}function _s(r,l,u){return{name:r,primKey:l,indexes:u,mappedClass:null,idxByName:(f=function(p){return[p.name,p]},u.reduce(function(p,m,y){return y=f(m,y),y&&(p[y[0]]=y[1]),p},{}))};var f}var On=function(r){try{return r.only([[]]),On=function(){return[[]]},[[]]}catch{return On=function(){return je},je}};function xs(r){return r==null?function(){}:typeof r=="string"?(l=r).split(".").length===1?function(u){return u[l]}:function(u){return Q(u,l)}:function(u){return Q(u,r)};var l}function Ur(r){return[].slice.call(r)}var kl=0;function Mn(r){return r==null?":id":typeof r=="string"?r:"[".concat(r.join("+"),"]")}function Sl(r,l,k){function f(C){if(C.type===3)return null;if(C.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var P=C.lower,O=C.upper,M=C.lowerOpen,C=C.upperOpen;return P===void 0?O===void 0?null:l.upperBound(O,!!C):O===void 0?l.lowerBound(P,!!M):l.bound(P,O,!!M,!!C)}function p(A){var P,O=A.name;return{name:O,schema:A,mutate:function(M){var C=M.trans,E=M.type,L=M.keys,B=M.values,F=M.range;return new Promise(function(N,V){N=xt(N);var j=C.objectStore(O),H=j.keyPath==null,q=E==="put"||E==="add";if(!q&&E!=="delete"&&E!=="deleteRange")throw new Error("Invalid operation type: "+E);var W,X=(L||B||{length:1}).length;if(L&&B&&L.length!==B.length)throw new Error("Given keys array must have same length as given values array.");if(X===0)return N({numFailures:0,failures:{},results:[],lastResult:void 0});function st(Ft){++Kt,Sn(Ft)}var rt=[],lt=[],Kt=0;if(E==="deleteRange"){if(F.type===4)return N({numFailures:Kt,failures:lt,results:[],lastResult:void 0});F.type===3?rt.push(W=j.clear()):rt.push(W=j.delete(f(F)))}else{var H=q?H?[B,L]:[B,null]:[L,null],nt=H[0],It=H[1];if(q)for(var Rt=0;Rt<X;++Rt)rt.push(W=It&&It[Rt]!==void 0?j[E](nt[Rt],It[Rt]):j[E](nt[Rt])),W.onerror=st;else for(Rt=0;Rt<X;++Rt)rt.push(W=j[E](nt[Rt])),W.onerror=st}function Oi(Ft){Ft=Ft.target.result,rt.forEach(function(Ke,js){return Ke.error!=null&&(lt[js]=Ke.error)}),N({numFailures:Kt,failures:lt,results:E==="delete"?L:rt.map(function(Ke){return Ke.result}),lastResult:Ft})}W.onerror=function(Ft){st(Ft),Oi(Ft)},W.onsuccess=Oi})},getMany:function(M){var C=M.trans,E=M.keys;return new Promise(function(L,B){L=xt(L);for(var F,N=C.objectStore(O),V=E.length,j=new Array(V),H=0,q=0,W=function(rt){rt=rt.target,j[rt._pos]=rt.result,++q===H&&L(j)},X=re(B),st=0;st<V;++st)E[st]!=null&&((F=N.get(E[st]))._pos=st,F.onsuccess=W,F.onerror=X,++H);H===0&&L(j)})},get:function(M){var C=M.trans,E=M.key;return new Promise(function(L,B){L=xt(L);var F=C.objectStore(O).get(E);F.onsuccess=function(N){return L(N.target.result)},F.onerror=re(B)})},query:(P=S,function(M){return new Promise(function(C,E){C=xt(C);var L,B,F,H=M.trans,N=M.values,V=M.limit,W=M.query,j=V===1/0?void 0:V,q=W.index,W=W.range,H=H.objectStore(O),q=q.isPrimaryKey?H:H.index(q.name),W=f(W);if(V===0)return C({result:[]});P?((j=N?q.getAll(W,j):q.getAllKeys(W,j)).onsuccess=function(X){return C({result:X.target.result})},j.onerror=re(E)):(L=0,B=!N&&"openKeyCursor"in q?q.openKeyCursor(W):q.openCursor(W),F=[],B.onsuccess=function(X){var st=B.result;return st?(F.push(N?st.value:st.primaryKey),++L===V?C({result:F}):void st.continue()):C({result:F})},B.onerror=re(E))})}),openCursor:function(M){var C=M.trans,E=M.values,L=M.query,B=M.reverse,F=M.unique;return new Promise(function(N,V){N=xt(N);var q=L.index,j=L.range,H=C.objectStore(O),H=q.isPrimaryKey?H:H.index(q.name),q=B?F?"prevunique":"prev":F?"nextunique":"next",W=!E&&"openKeyCursor"in H?H.openKeyCursor(f(j),q):H.openCursor(f(j),q);W.onerror=re(V),W.onsuccess=xt(function(X){var st,rt,lt,Kt,nt=W.result;nt?(nt.___id=++kl,nt.done=!1,st=nt.continue.bind(nt),rt=(rt=nt.continuePrimaryKey)&&rt.bind(nt),lt=nt.advance.bind(nt),Kt=function(){throw new Error("Cursor not stopped")},nt.trans=C,nt.stop=nt.continue=nt.continuePrimaryKey=nt.advance=function(){throw new Error("Cursor not started")},nt.fail=xt(V),nt.next=function(){var It=this,Rt=1;return this.start(function(){return Rt--?It.continue():It.stop()}).then(function(){return It})},nt.start=function(It){function Rt(){if(W.result)try{It()}catch(Ft){nt.fail(Ft)}else nt.done=!0,nt.start=function(){throw new Error("Cursor behind last entry")},nt.stop()}var Oi=new Promise(function(Ft,Ke){Ft=xt(Ft),W.onerror=re(Ke),nt.fail=Ke,nt.stop=function(js){nt.stop=nt.continue=nt.continuePrimaryKey=nt.advance=Kt,Ft(js)}});return W.onsuccess=xt(function(Ft){W.onsuccess=Rt,Rt()}),nt.continue=st,nt.continuePrimaryKey=rt,nt.advance=lt,Rt(),Oi},N(nt)):N(null)},V)})},count:function(M){var C=M.query,E=M.trans,L=C.index,B=C.range;return new Promise(function(F,N){var V=E.objectStore(O),j=L.isPrimaryKey?V:V.index(L.name),V=f(B),j=V?j.count(V):j.count();j.onsuccess=xt(function(H){return F(H.target.result)}),j.onerror=re(N)})}}}var m,y,_,D=(y=k,_=Ur((m=r).objectStoreNames),{schema:{name:m.name,tables:_.map(function(A){return y.objectStore(A)}).map(function(A){var P=A.keyPath,C=A.autoIncrement,O=c(P),M={},C={name:A.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:P==null,compound:O,keyPath:P,autoIncrement:C,unique:!0,extractKey:xs(P)},indexes:Ur(A.indexNames).map(function(E){return A.index(E)}).map(function(F){var L=F.name,B=F.unique,N=F.multiEntry,F=F.keyPath,N={name:L,compound:c(F),keyPath:F,unique:B,multiEntry:N,extractKey:xs(F)};return M[Mn(F)]=N}),getIndexByKeyPath:function(E){return M[Mn(E)]}};return M[":id"]=C.primaryKey,P!=null&&(M[Mn(P)]=C.primaryKey),C})},hasGetAll:0<_.length&&"getAll"in y.objectStore(_[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),k=D.schema,S=D.hasGetAll,D=k.tables.map(p),x={};return D.forEach(function(A){return x[A.name]=A}),{stack:"dbcore",transaction:r.transaction.bind(r),table:function(A){if(!x[A])throw new Error("Table '".concat(A,"' not found"));return x[A]},MIN_KEY:-1/0,MAX_KEY:On(l),schema:k}}function Pl(r,l,u,f){var p=u.IDBKeyRange;return u.indexedDB,{dbcore:(f=Sl(l,p,f),r.dbcore.reduce(function(m,y){return y=y.create,i(i({},m),y(m))},f))}}function gi(r,f){var u=f.db,f=Pl(r._middlewares,u,r._deps,f);r.core=f.dbcore,r.tables.forEach(function(p){var m=p.name;r.core.schema.tables.some(function(y){return y.name===m})&&(p.core=r.core.table(m),r[m]instanceof r.Table&&(r[m].core=p.core))})}function mi(r,l,u,f){u.forEach(function(p){var m=f[p];l.forEach(function(y){var _=function k(S,D){return R(S,D)||(S=d(S))&&k(S,D)}(y,p);(!_||"value"in _&&_.value===void 0)&&(y===r.Transaction.prototype||y instanceof r.Transaction?I(y,p,{get:function(){return this.table(p)},set:function(k){w(this,p,{value:k,writable:!0,configurable:!0,enumerable:!0})}}):y[p]=new r.Table(p,m))})})}function ws(r,l){l.forEach(function(u){for(var f in u)u[f]instanceof r.Table&&delete u[f]})}function Ol(r,l){return r._cfg.version-l._cfg.version}function Ml(r,l,u,f){var p=r._dbSchema;u.objectStoreNames.contains("$meta")&&!p.$meta&&(p.$meta=_s("$meta",Xr("")[0],[]),r._storeNames.push("$meta"));var m=r._createTransaction("readwrite",r._storeNames,p);m.create(u),m._completion.catch(f);var y=m._reject.bind(m),_=tt.transless||tt;we(function(){return tt.trans=m,tt.transless=_,l!==0?(gi(r,u),S=l,((k=m).storeNames.includes("$meta")?k.table("$meta").get("version").then(function(D){return D??S}):$.resolve(S)).then(function(D){return A=D,P=m,O=u,M=[],D=(x=r)._versions,C=x._dbSchema=bi(0,x.idbdb,O),(D=D.filter(function(E){return E._cfg.version>=A})).length!==0?(D.forEach(function(E){M.push(function(){var L=C,B=E._cfg.dbschema;vi(x,L,O),vi(x,B,O),C=x._dbSchema=B;var F=ks(L,B);F.add.forEach(function(q){Ss(O,q[0],q[1].primKey,q[1].indexes)}),F.change.forEach(function(q){if(q.recreate)throw new et.Upgrade("Not yet support for changing primary key");var W=O.objectStore(q.name);q.add.forEach(function(X){return yi(W,X)}),q.change.forEach(function(X){W.deleteIndex(X.name),yi(W,X)}),q.del.forEach(function(X){return W.deleteIndex(X)})});var N=E._cfg.contentUpgrade;if(N&&E._cfg.version>A){gi(x,O),P._memoizedTables={};var V=Z(B);F.del.forEach(function(q){V[q]=L[q]}),ws(x,[x.Transaction.prototype]),mi(x,[x.Transaction.prototype],a(V),V),P.schema=V;var j,H=ve(N);return H&&nn(),F=$.follow(function(){var q;(j=N(P))&&H&&(q=ke.bind(null,null),j.then(q,q))}),j&&typeof j.then=="function"?$.resolve(j):F.then(function(){return j})}}),M.push(function(L){var B,F,N=E._cfg.dbschema;B=N,F=L,[].slice.call(F.db.objectStoreNames).forEach(function(V){return B[V]==null&&F.db.deleteObjectStore(V)}),ws(x,[x.Transaction.prototype]),mi(x,[x.Transaction.prototype],x._storeNames,x._dbSchema),P.schema=x._dbSchema}),M.push(function(L){x.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(x.idbdb.version/10)===E._cfg.version?(x.idbdb.deleteObjectStore("$meta"),delete x._dbSchema.$meta,x._storeNames=x._storeNames.filter(function(B){return B!=="$meta"})):L.objectStore("$meta").put(E._cfg.version,"version"))})}),function E(){return M.length?$.resolve(M.shift()(P.idbtrans)).then(E):$.resolve()}().then(function(){Yr(C,O)})):$.resolve();var x,A,P,O,M,C}).catch(y)):(a(p).forEach(function(D){Ss(u,D,p[D].primKey,p[D].indexes)}),gi(r,u),void $.follow(function(){return r.on.populate.fire(m)}).catch(y));var k,S})}function Dl(r,l){Yr(r._dbSchema,l),l.db.version%10!=0||l.objectStoreNames.contains("$meta")||l.db.createObjectStore("$meta").add(Math.ceil(l.db.version/10-1),"version");var u=bi(0,r.idbdb,l);vi(r,r._dbSchema,l);for(var f=0,p=ks(u,r._dbSchema).change;f<p.length;f++){var m=function(y){if(y.change.length||y.recreate)return console.warn("Unable to patch indexes of table ".concat(y.name," because it has changes on the type of index or primary key.")),{value:void 0};var _=l.objectStore(y.name);y.add.forEach(function(k){se&&console.debug("Dexie upgrade patch: Creating missing index ".concat(y.name,".").concat(k.src)),yi(_,k)})}(p[f]);if(typeof m=="object")return m.value}}function ks(r,l){var u,f={del:[],add:[],change:[]};for(u in r)l[u]||f.del.push(u);for(u in l){var p=r[u],m=l[u];if(p){var y={name:u,def:m,recreate:!1,del:[],add:[],change:[]};if(""+(p.primKey.keyPath||"")!=""+(m.primKey.keyPath||"")||p.primKey.auto!==m.primKey.auto)y.recreate=!0,f.change.push(y);else{var _=p.idxByName,k=m.idxByName,S=void 0;for(S in _)k[S]||y.del.push(S);for(S in k){var D=_[S],x=k[S];D?D.src!==x.src&&y.change.push(x):y.add.push(x)}(0<y.del.length||0<y.add.length||0<y.change.length)&&f.change.push(y)}}else f.add.push([u,m])}return f}function Ss(r,l,u,f){var p=r.db.createObjectStore(l,u.keyPath?{keyPath:u.keyPath,autoIncrement:u.auto}:{autoIncrement:u.auto});return f.forEach(function(m){return yi(p,m)}),p}function Yr(r,l){a(r).forEach(function(u){l.db.objectStoreNames.contains(u)||(se&&console.debug("Dexie: Creating missing table",u),Ss(l,u,r[u].primKey,r[u].indexes))})}function yi(r,l){r.createIndex(l.name,l.keyPath,{unique:l.unique,multiEntry:l.multi})}function bi(r,l,u){var f={};return U(l.objectStoreNames,0).forEach(function(p){for(var m=u.objectStore(p),y=vs($r(S=m.keyPath),S||"",!0,!1,!!m.autoIncrement,S&&typeof S!="string",!0),_=[],k=0;k<m.indexNames.length;++k){var D=m.index(m.indexNames[k]),S=D.keyPath,D=vs(D.name,S,!!D.unique,!!D.multiEntry,!1,S&&typeof S!="string",!1);_.push(D)}f[p]=_s(p,y,_)}),f}function vi(r,l,u){for(var f=u.db.objectStoreNames,p=0;p<f.length;++p){var m=f[p],y=u.objectStore(m);r._hasGetAll="getAll"in y;for(var _=0;_<y.indexNames.length;++_){var k=y.indexNames[_],S=y.index(k).keyPath,D=typeof S=="string"?S:"["+U(S).join("+")+"]";!l[m]||(S=l[m].idxByName[D])&&(S.name=k,delete l[m].idxByName[D],l[m].idxByName[k]=S)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&o.WorkerGlobalScope&&o instanceof o.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(r._hasGetAll=!1)}function Xr(r){return r.split(",").map(function(l,u){var m=l.split(":"),f=(p=m[1])===null||p===void 0?void 0:p.trim(),p=(l=m[0].trim()).replace(/([&*]|\+\+)/g,""),m=/^\[/.test(p)?p.match(/^\[(.*)\]$/)[1].split("+"):p;return vs(p,m||null,/\&/.test(l),/\*/.test(l),/\+\+/.test(l),c(m),u===0,f)})}var Cl=(an.prototype._createTableSchema=_s,an.prototype._parseIndexSyntax=Xr,an.prototype._parseStoresSpec=function(r,l){var u=this;a(r).forEach(function(f){if(r[f]!==null){var p=u._parseIndexSyntax(r[f]),m=p.shift();if(!m)throw new et.Schema("Invalid schema for table "+f+": "+r[f]);if(m.unique=!0,m.multi)throw new et.Schema("Primary key cannot be multiEntry*");p.forEach(function(y){if(y.auto)throw new et.Schema("Only primary key can be marked as autoIncrement (++)");if(!y.keyPath)throw new et.Schema("Index must have a name and cannot be an empty string")}),p=u._createTableSchema(f,m,p),l[f]=p}})},an.prototype.stores=function(u){var l=this.db;this._cfg.storesSource=this._cfg.storesSource?h(this._cfg.storesSource,u):u;var u=l._versions,f={},p={};return u.forEach(function(m){h(f,m._cfg.storesSource),p=m._cfg.dbschema={},m._parseStoresSpec(f,p)}),l._dbSchema=p,ws(l,[l._allTables,l,l.Transaction.prototype]),mi(l,[l._allTables,l,l.Transaction.prototype,this._cfg.tables],a(p),p),l._storeNames=a(p),this},an.prototype.upgrade=function(r){return this._cfg.contentUpgrade=rs(this._cfg.contentUpgrade||mt,r),this},an);function an(){}function Ps(r,l){var u=r._dbNamesDB;return u||(u=r._dbNamesDB=new fe(ci,{addons:[],indexedDB:r,IDBKeyRange:l})).version(1).stores({dbnames:"name"}),u.table("dbnames")}function Os(r){return r&&typeof r.databases=="function"}function Ms(r){return we(function(){return tt.letThrough=!0,r()})}function Ds(r){return!("from"in r)}var Et=function(r,l){if(!this){var u=new Et;return r&&"d"in r&&h(u,r),u}h(this,arguments.length?{d:1,from:r,to:1<arguments.length?l:r}:{d:0})};function Dn(r,l,u){var f=ut(l,u);if(!isNaN(f)){if(0<f)throw RangeError();if(Ds(r))return h(r,{from:l,to:u,d:1});var p=r.l,f=r.r;if(ut(u,r.from)<0)return p?Dn(p,l,u):r.l={from:l,to:u,d:1,l:null,r:null},Qr(r);if(0<ut(l,r.to))return f?Dn(f,l,u):r.r={from:l,to:u,d:1,l:null,r:null},Qr(r);ut(l,r.from)<0&&(r.from=l,r.l=null,r.d=f?f.d+1:1),0<ut(u,r.to)&&(r.to=u,r.r=null,r.d=r.l?r.l.d+1:1),u=!r.r,p&&!r.l&&Cn(r,p),f&&u&&Cn(r,f)}}function Cn(r,l){Ds(l)||function u(f,k){var m=k.from,y=k.to,_=k.l,k=k.r;Dn(f,m,y),_&&u(f,_),k&&u(f,k)}(r,l)}function Gr(r,l){var u=_i(l),f=u.next();if(f.done)return!1;for(var p=f.value,m=_i(r),y=m.next(p.from),_=y.value;!f.done&&!y.done;){if(ut(_.from,p.to)<=0&&0<=ut(_.to,p.from))return!0;ut(p.from,_.from)<0?p=(f=u.next(_.from)).value:_=(y=m.next(p.from)).value}return!1}function _i(r){var l=Ds(r)?null:{s:0,n:r};return{next:function(u){for(var f=0<arguments.length;l;)switch(l.s){case 0:if(l.s=1,f)for(;l.n.l&&ut(u,l.n.from)<0;)l={up:l,n:l.n.l,s:1};else for(;l.n.l;)l={up:l,n:l.n.l,s:1};case 1:if(l.s=2,!f||ut(u,l.n.to)<=0)return{value:l.n,done:!1};case 2:if(l.n.r){l.s=3,l={up:l,n:l.n.r,s:0};continue}case 3:l=l.up}return{done:!0}}}}function Qr(r){var l,u,f=(((l=r.r)===null||l===void 0?void 0:l.d)||0)-(((u=r.l)===null||u===void 0?void 0:u.d)||0),p=1<f?"r":f<-1?"l":"";p&&(l=p=="r"?"l":"r",u=i({},r),f=r[p],r.from=f.from,r.to=f.to,r[p]=f[p],u[p]=f[l],(r[l]=u).d=Zr(u)),r.d=Zr(r)}function Zr(u){var l=u.r,u=u.l;return(l?u?Math.max(l.d,u.d):l.d:u?u.d:0)+1}function xi(r,l){return a(l).forEach(function(u){r[u]?Cn(r[u],l[u]):r[u]=function f(p){var m,y,_={};for(m in p)b(p,m)&&(y=p[m],_[m]=!y||typeof y!="object"||at.has(y.constructor)?y:f(y));return _}(l[u])}),r}function Cs(r,l){return r.all||l.all||Object.keys(r).some(function(u){return l[u]&&Gr(l[u],r[u])})}v(Et.prototype,((Ut={add:function(r){return Cn(this,r),this},addKey:function(r){return Dn(this,r,r),this},addKeys:function(r){var l=this;return r.forEach(function(u){return Dn(l,u,u)}),this},hasKey:function(r){var l=_i(this).next(r).value;return l&&ut(l.from,r)<=0&&0<=ut(l.to,r)}})[kt]=function(){return _i(this)},Ut));var He={},As={},Ts=!1;function wi(r){xi(As,r),Ts||(Ts=!0,setTimeout(function(){Ts=!1,Es(As,!(As={}))},0))}function Es(r,l){l===void 0&&(l=!1);var u=new Set;if(r.all)for(var f=0,p=Object.values(He);f<p.length;f++)Jr(y=p[f],r,u,l);else for(var m in r){var y,_=/^idb\:\/\/(.*)\/(.*)\//.exec(m);_&&(m=_[1],_=_[2],(y=He["idb://".concat(m,"/").concat(_)])&&Jr(y,r,u,l))}u.forEach(function(k){return k()})}function Jr(r,l,u,f){for(var p=[],m=0,y=Object.entries(r.queries.query);m<y.length;m++){for(var _=y[m],k=_[0],S=[],D=0,x=_[1];D<x.length;D++){var A=x[D];Cs(l,A.obsSet)?A.subscribers.forEach(function(C){return u.add(C)}):f&&S.push(A)}f&&p.push([k,S])}if(f)for(var P=0,O=p;P<O.length;P++){var M=O[P],k=M[0],S=M[1];r.queries.query[k]=S}}function Al(r){var l=r._state,u=r._deps.indexedDB;if(l.isBeingOpened||r.idbdb)return l.dbReadyPromise.then(function(){return l.dbOpenError?St(l.dbOpenError):r});l.isBeingOpened=!0,l.dbOpenError=null,l.openComplete=!1;var f=l.openCanceller,p=Math.round(10*r.verno),m=!1;function y(){if(l.openCanceller!==f)throw new et.DatabaseClosed("db.open() was cancelled")}function _(){return new $(function(A,P){if(y(),!u)throw new et.MissingAPI;var O=r.name,M=l.autoSchema||!p?u.open(O):u.open(O,p);if(!M)throw new et.MissingAPI;M.onerror=re(P),M.onblocked=xt(r._fireOnBlocked),M.onupgradeneeded=xt(function(C){var E;D=M.transaction,l.autoSchema&&!r._options.allowEmptyDB?(M.onerror=Sn,D.abort(),M.result.close(),(E=u.deleteDatabase(O)).onsuccess=E.onerror=xt(function(){P(new et.NoSuchDatabase("Database ".concat(O," doesnt exist")))})):(D.onerror=re(P),C=C.oldVersion>Math.pow(2,62)?0:C.oldVersion,x=C<1,r.idbdb=M.result,m&&Dl(r,D),Ml(r,C/10,D,P))},P),M.onsuccess=xt(function(){D=null;var C,E,L,B,F,N=r.idbdb=M.result,V=U(N.objectStoreNames);if(0<V.length)try{var j=N.transaction((B=V).length===1?B[0]:B,"readonly");if(l.autoSchema)E=N,L=j,(C=r).verno=E.version/10,L=C._dbSchema=bi(0,E,L),C._storeNames=U(E.objectStoreNames,0),mi(C,[C._allTables],a(L),L);else if(vi(r,r._dbSchema,j),((F=ks(bi(0,(F=r).idbdb,j),F._dbSchema)).add.length||F.change.some(function(H){return H.add.length||H.change.length}))&&!m)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),N.close(),p=N.version+1,m=!0,A(_());gi(r,j)}catch{}sn.push(r),N.onversionchange=xt(function(H){l.vcFired=!0,r.on("versionchange").fire(H)}),N.onclose=xt(function(){r.close({disableAutoOpen:!1})}),x&&(F=r._deps,j=O,N=F.indexedDB,F=F.IDBKeyRange,Os(N)||j===ci||Ps(N,F).put({name:j}).catch(mt)),A()},P)}).catch(function(A){switch(A==null?void 0:A.name){case"UnknownError":if(0<l.PR1398_maxLoop)return l.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),_();break;case"VersionError":if(0<p)return p=0,_()}return $.reject(A)})}var k,S=l.dbReadyResolve,D=null,x=!1;return $.race([f,(typeof navigator>"u"?$.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(A){function P(){return indexedDB.databases().finally(A)}k=setInterval(P,100),P()}).finally(function(){return clearInterval(k)}):Promise.resolve()).then(_)]).then(function(){return y(),l.onReadyBeingFired=[],$.resolve(Ms(function(){return r.on.ready.fire(r.vip)})).then(function A(){if(0<l.onReadyBeingFired.length){var P=l.onReadyBeingFired.reduce(rs,mt);return l.onReadyBeingFired=[],$.resolve(Ms(function(){return P(r.vip)})).then(A)}})}).finally(function(){l.openCanceller===f&&(l.onReadyBeingFired=null,l.isBeingOpened=!1)}).catch(function(A){l.dbOpenError=A;try{D&&D.abort()}catch{}return f===l.openCanceller&&r._close(),St(A)}).finally(function(){l.openComplete=!0,S()}).then(function(){var A;return x&&(A={},r.tables.forEach(function(P){P.schema.indexes.forEach(function(O){O.name&&(A["idb://".concat(r.name,"/").concat(P.name,"/").concat(O.name)]=new Et(-1/0,[[[]]]))}),A["idb://".concat(r.name,"/").concat(P.name,"/")]=A["idb://".concat(r.name,"/").concat(P.name,"/:dels")]=new Et(-1/0,[[[]]])}),Oe(Pn).fire(A),Es(A,!0)),r})}function Is(r){function l(m){return r.next(m)}var u=p(l),f=p(function(m){return r.throw(m)});function p(m){return function(k){var _=m(k),k=_.value;return _.done?k:k&&typeof k.then=="function"?k.then(u,f):c(k)?Promise.all(k).then(u,f):u(k)}}return p(l)()}function ki(r,l,u){for(var f=c(r)?r.slice():[r],p=0;p<u;++p)f.push(l);return f}var Tl={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(r){return i(i({},r),{table:function(l){var u=r.table(l),f=u.schema,p={},m=[];function y(x,A,P){var O=Mn(x),M=p[O]=p[O]||[],C=x==null?0:typeof x=="string"?1:x.length,E=0<A,E=i(i({},P),{name:E?"".concat(O,"(virtual-from:").concat(P.name,")"):P.name,lowLevelIndex:P,isVirtual:E,keyTail:A,keyLength:C,extractKey:xs(x),unique:!E&&P.unique});return M.push(E),E.isPrimaryKey||m.push(E),1<C&&y(C===2?x[0]:x.slice(0,C-1),A+1,P),M.sort(function(L,B){return L.keyTail-B.keyTail}),E}l=y(f.primaryKey.keyPath,0,f.primaryKey),p[":id"]=[l];for(var _=0,k=f.indexes;_<k.length;_++){var S=k[_];y(S.keyPath,0,S)}function D(x){var A,P=x.query.index;return P.isVirtual?i(i({},x),{query:{index:P.lowLevelIndex,range:(A=x.query.range,P=P.keyTail,{type:A.type===1?2:A.type,lower:ki(A.lower,A.lowerOpen?r.MAX_KEY:r.MIN_KEY,P),lowerOpen:!0,upper:ki(A.upper,A.upperOpen?r.MIN_KEY:r.MAX_KEY,P),upperOpen:!0})}}):x}return i(i({},u),{schema:i(i({},f),{primaryKey:l,indexes:m,getIndexByKeyPath:function(x){return(x=p[Mn(x)])&&x[0]}}),count:function(x){return u.count(D(x))},query:function(x){return u.query(D(x))},openCursor:function(x){var A=x.query.index,P=A.keyTail,O=A.isVirtual,M=A.keyLength;return O?u.openCursor(D(x)).then(function(E){return E&&C(E)}):u.openCursor(x);function C(E){return Object.create(E,{continue:{value:function(L){L!=null?E.continue(ki(L,x.reverse?r.MAX_KEY:r.MIN_KEY,P)):x.unique?E.continue(E.key.slice(0,M).concat(x.reverse?r.MIN_KEY:r.MAX_KEY,P)):E.continue()}},continuePrimaryKey:{value:function(L,B){E.continuePrimaryKey(ki(L,r.MAX_KEY,P),B)}},primaryKey:{get:function(){return E.primaryKey}},key:{get:function(){var L=E.key;return M===1?L[0]:L.slice(0,M)}},value:{get:function(){return E.value}}})}}})}})}};function Rs(r,l,u,f){return u=u||{},f=f||"",a(r).forEach(function(p){var m,y,_;b(l,p)?(m=r[p],y=l[p],typeof m=="object"&&typeof y=="object"&&m&&y?(_=vt(m))!==vt(y)?u[f+p]=l[p]:_==="Object"?Rs(m,y,u,f+p+"."):m!==y&&(u[f+p]=l[p]):m!==y&&(u[f+p]=l[p])):u[f+p]=void 0}),a(l).forEach(function(p){b(r,p)||(u[f+p]=l[p])}),u}function Ls(r,l){return l.type==="delete"?l.keys:l.keys||l.values.map(r.extractKey)}var El={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(r){return i(i({},r),{table:function(l){var u=r.table(l),f=u.schema.primaryKey;return i(i({},u),{mutate:function(p){var m=tt.trans,y=m.table(l).hook,_=y.deleting,k=y.creating,S=y.updating;switch(p.type){case"add":if(k.fire===mt)break;return m._promise("readwrite",function(){return D(p)},!0);case"put":if(k.fire===mt&&S.fire===mt)break;return m._promise("readwrite",function(){return D(p)},!0);case"delete":if(_.fire===mt)break;return m._promise("readwrite",function(){return D(p)},!0);case"deleteRange":if(_.fire===mt)break;return m._promise("readwrite",function(){return function x(A,P,O){return u.query({trans:A,values:!1,query:{index:f,range:P},limit:O}).then(function(M){var C=M.result;return D({type:"delete",keys:C,trans:A}).then(function(E){return 0<E.numFailures?Promise.reject(E.failures[0]):C.length<O?{failures:[],numFailures:0,lastResult:void 0}:x(A,i(i({},P),{lower:C[C.length-1],lowerOpen:!0}),O)})})}(p.trans,p.range,1e4)},!0)}return u.mutate(p);function D(x){var A,P,O,M=tt.trans,C=x.keys||Ls(f,x);if(!C)throw new Error("Keys missing");return(x=x.type==="add"||x.type==="put"?i(i({},x),{keys:C}):i({},x)).type!=="delete"&&(x.values=s([],x.values)),x.keys&&(x.keys=s([],x.keys)),A=u,O=C,((P=x).type==="add"?Promise.resolve([]):A.getMany({trans:P.trans,keys:O,cache:"immutable"})).then(function(E){var L=C.map(function(B,F){var N,V,j,H=E[F],q={onerror:null,onsuccess:null};return x.type==="delete"?_.fire.call(q,B,H,M):x.type==="add"||H===void 0?(N=k.fire.call(q,B,x.values[F],M),B==null&&N!=null&&(x.keys[F]=B=N,f.outbound||Y(x.values[F],f.keyPath,B))):(N=Rs(H,x.values[F]),(V=S.fire.call(q,N,B,H,M))&&(j=x.values[F],Object.keys(V).forEach(function(W){b(j,W)?j[W]=V[W]:Y(j,W,V[W])}))),q});return u.mutate(x).then(function(B){for(var F=B.failures,N=B.results,V=B.numFailures,B=B.lastResult,j=0;j<C.length;++j){var H=(N||C)[j],q=L[j];H==null?q.onerror&&q.onerror(F[j]):q.onsuccess&&q.onsuccess(x.type==="put"&&E[j]?x.values[j]:H)}return{failures:F,results:N,numFailures:V,lastResult:B}}).catch(function(B){return L.forEach(function(F){return F.onerror&&F.onerror(B)}),Promise.reject(B)})})}}})}})}};function to(r,l,u){try{if(!l||l.keys.length<r.length)return null;for(var f=[],p=0,m=0;p<l.keys.length&&m<r.length;++p)ut(l.keys[p],r[m])===0&&(f.push(u?wt(l.values[p]):l.values[p]),++m);return f.length===r.length?f:null}catch{return null}}var Il={stack:"dbcore",level:-1,create:function(r){return{table:function(l){var u=r.table(l);return i(i({},u),{getMany:function(f){if(!f.cache)return u.getMany(f);var p=to(f.keys,f.trans._cache,f.cache==="clone");return p?$.resolve(p):u.getMany(f).then(function(m){return f.trans._cache={keys:f.keys,values:f.cache==="clone"?wt(m):m},m})},mutate:function(f){return f.type!=="add"&&(f.trans._cache=null),u.mutate(f)}})}}}};function eo(r,l){return r.trans.mode==="readonly"&&!!r.subscr&&!r.trans.explicit&&r.trans.db._options.cache!=="disabled"&&!l.schema.primaryKey.outbound}function no(r,l){switch(r){case"query":return l.values&&!l.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Rl={stack:"dbcore",level:0,name:"Observability",create:function(r){var l=r.schema.name,u=new Et(r.MIN_KEY,r.MAX_KEY);return i(i({},r),{transaction:function(f,p,m){if(tt.subscr&&p!=="readonly")throw new et.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(tt.querier));return r.transaction(f,p,m)},table:function(f){var p=r.table(f),m=p.schema,y=m.primaryKey,x=m.indexes,_=y.extractKey,k=y.outbound,S=y.autoIncrement&&x.filter(function(P){return P.compound&&P.keyPath.includes(y.keyPath)}),D=i(i({},p),{mutate:function(P){function O(W){return W="idb://".concat(l,"/").concat(f,"/").concat(W),B[W]||(B[W]=new Et)}var M,C,E,L=P.trans,B=P.mutatedParts||(P.mutatedParts={}),F=O(""),N=O(":dels"),V=P.type,q=P.type==="deleteRange"?[P.range]:P.type==="delete"?[P.keys]:P.values.length<50?[Ls(y,P).filter(function(W){return W}),P.values]:[],j=q[0],H=q[1],q=P.trans._cache;return c(j)?(F.addKeys(j),(q=V==="delete"||j.length===H.length?to(j,q):null)||N.addKeys(j),(q||H)&&(M=O,C=q,E=H,m.indexes.forEach(function(W){var X=M(W.name||"");function st(lt){return lt!=null?W.extractKey(lt):null}function rt(lt){return W.multiEntry&&c(lt)?lt.forEach(function(Kt){return X.addKey(Kt)}):X.addKey(lt)}(C||E).forEach(function(lt,It){var nt=C&&st(C[It]),It=E&&st(E[It]);ut(nt,It)!==0&&(nt!=null&&rt(nt),It!=null&&rt(It))})}))):j?(H={from:(H=j.lower)!==null&&H!==void 0?H:r.MIN_KEY,to:(H=j.upper)!==null&&H!==void 0?H:r.MAX_KEY},N.add(H),F.add(H)):(F.add(u),N.add(u),m.indexes.forEach(function(W){return O(W.name).add(u)})),p.mutate(P).then(function(W){return!j||P.type!=="add"&&P.type!=="put"||(F.addKeys(W.results),S&&S.forEach(function(X){for(var st=P.values.map(function(nt){return X.extractKey(nt)}),rt=X.keyPath.findIndex(function(nt){return nt===y.keyPath}),lt=0,Kt=W.results.length;lt<Kt;++lt)st[lt][rt]=W.results[lt];O(X.name).addKeys(st)})),L.mutatedParts=xi(L.mutatedParts||{},B),W})}}),x=function(O){var M=O.query,O=M.index,M=M.range;return[O,new Et((O=M.lower)!==null&&O!==void 0?O:r.MIN_KEY,(M=M.upper)!==null&&M!==void 0?M:r.MAX_KEY)]},A={get:function(P){return[y,new Et(P.key)]},getMany:function(P){return[y,new Et().addKeys(P.keys)]},count:x,query:x,openCursor:x};return a(A).forEach(function(P){D[P]=function(O){var M=tt.subscr,C=!!M,E=eo(tt,p)&&no(P,O)?O.obsSet={}:M;if(C){var L=function(H){return H="idb://".concat(l,"/").concat(f,"/").concat(H),E[H]||(E[H]=new Et)},B=L(""),F=L(":dels"),M=A[P](O),C=M[0],M=M[1];if((P==="query"&&C.isPrimaryKey&&!O.values?F:L(C.name||"")).add(M),!C.isPrimaryKey){if(P!=="count"){var N=P==="query"&&k&&O.values&&p.query(i(i({},O),{values:!1}));return p[P].apply(this,arguments).then(function(H){if(P==="query"){if(k&&O.values)return N.then(function(st){return st=st.result,B.addKeys(st),H});var q=O.values?H.result.map(_):H.result;(O.values?B:F).addKeys(q)}else if(P==="openCursor"){var W=H,X=O.values;return W&&Object.create(W,{key:{get:function(){return F.addKey(W.primaryKey),W.key}},primaryKey:{get:function(){var st=W.primaryKey;return F.addKey(st),st}},value:{get:function(){return X&&B.addKey(W.primaryKey),W.value}}})}return H})}F.add(u)}}return p[P].apply(this,arguments)}}),D}})}};function io(r,l,u){if(u.numFailures===0)return l;if(l.type==="deleteRange")return null;var f=l.keys?l.keys.length:"values"in l&&l.values?l.values.length:1;return u.numFailures===f?null:(l=i({},l),c(l.keys)&&(l.keys=l.keys.filter(function(p,m){return!(m in u.failures)})),"values"in l&&c(l.values)&&(l.values=l.values.filter(function(p,m){return!(m in u.failures)})),l)}function Bs(r,l){return u=r,((f=l).lower===void 0||(f.lowerOpen?0<ut(u,f.lower):0<=ut(u,f.lower)))&&(r=r,(l=l).upper===void 0||(l.upperOpen?ut(r,l.upper)<0:ut(r,l.upper)<=0));var u,f}function so(r,l,A,f,p,m){if(!A||A.length===0)return r;var y=l.query.index,_=y.multiEntry,k=l.query.range,S=f.schema.primaryKey.extractKey,D=y.extractKey,x=(y.lowLevelIndex||y).extractKey,A=A.reduce(function(P,O){var M=P,C=[];if(O.type==="add"||O.type==="put")for(var E=new Et,L=O.values.length-1;0<=L;--L){var B,F=O.values[L],N=S(F);E.hasKey(N)||(B=D(F),(_&&c(B)?B.some(function(W){return Bs(W,k)}):Bs(B,k))&&(E.addKey(N),C.push(F)))}switch(O.type){case"add":var V=new Et().addKeys(l.values?P.map(function(X){return S(X)}):P),M=P.concat(l.values?C.filter(function(X){return X=S(X),!V.hasKey(X)&&(V.addKey(X),!0)}):C.map(function(X){return S(X)}).filter(function(X){return!V.hasKey(X)&&(V.addKey(X),!0)}));break;case"put":var j=new Et().addKeys(O.values.map(function(X){return S(X)}));M=P.filter(function(X){return!j.hasKey(l.values?S(X):X)}).concat(l.values?C:C.map(function(X){return S(X)}));break;case"delete":var H=new Et().addKeys(O.keys);M=P.filter(function(X){return!H.hasKey(l.values?S(X):X)});break;case"deleteRange":var q=O.range;M=P.filter(function(X){return!Bs(S(X),q)})}return M},r);return A===r?r:(A.sort(function(P,O){return ut(x(P),x(O))||ut(S(P),S(O))}),l.limit&&l.limit<1/0&&(A.length>l.limit?A.length=l.limit:r.length===l.limit&&A.length<l.limit&&(p.dirty=!0)),m?Object.freeze(A):A)}function ro(r,l){return ut(r.lower,l.lower)===0&&ut(r.upper,l.upper)===0&&!!r.lowerOpen==!!l.lowerOpen&&!!r.upperOpen==!!l.upperOpen}function Ll(r,l){return function(u,f,p,m){if(u===void 0)return f!==void 0?-1:0;if(f===void 0)return 1;if((f=ut(u,f))===0){if(p&&m)return 0;if(p)return 1;if(m)return-1}return f}(r.lower,l.lower,r.lowerOpen,l.lowerOpen)<=0&&0<=function(u,f,p,m){if(u===void 0)return f!==void 0?1:0;if(f===void 0)return-1;if((f=ut(u,f))===0){if(p&&m)return 0;if(p)return-1;if(m)return 1}return f}(r.upper,l.upper,r.upperOpen,l.upperOpen)}function Bl(r,l,u,f){r.subscribers.add(u),f.addEventListener("abort",function(){var p,m;r.subscribers.delete(u),r.subscribers.size===0&&(p=r,m=l,setTimeout(function(){p.subscribers.size===0&&qt(m,p)},3e3))})}var Fl={stack:"dbcore",level:0,name:"Cache",create:function(r){var l=r.schema.name;return i(i({},r),{transaction:function(u,f,p){var m,y,_=r.transaction(u,f,p);return f==="readwrite"&&(y=(m=new AbortController).signal,p=function(k){return function(){if(m.abort(),f==="readwrite"){for(var S=new Set,D=0,x=u;D<x.length;D++){var A=x[D],P=He["idb://".concat(l,"/").concat(A)];if(P){var O=r.table(A),M=P.optimisticOps.filter(function(X){return X.trans===_});if(_._explicit&&k&&_.mutatedParts)for(var C=0,E=Object.values(P.queries.query);C<E.length;C++)for(var L=0,B=(V=E[C]).slice();L<B.length;L++)Cs((j=B[L]).obsSet,_.mutatedParts)&&(qt(V,j),j.subscribers.forEach(function(X){return S.add(X)}));else if(0<M.length){P.optimisticOps=P.optimisticOps.filter(function(X){return X.trans!==_});for(var F=0,N=Object.values(P.queries.query);F<N.length;F++)for(var V,j,H,q=0,W=(V=N[F]).slice();q<W.length;q++)(j=W[q]).res!=null&&_.mutatedParts&&(k&&!j.dirty?(H=Object.isFrozen(j.res),H=so(j.res,j.req,M,O,j,H),j.dirty?(qt(V,j),j.subscribers.forEach(function(X){return S.add(X)})):H!==j.res&&(j.res=H,j.promise=$.resolve({result:H}))):(j.dirty&&qt(V,j),j.subscribers.forEach(function(X){return S.add(X)})))}}}S.forEach(function(X){return X()})}}},_.addEventListener("abort",p(!1),{signal:y}),_.addEventListener("error",p(!1),{signal:y}),_.addEventListener("complete",p(!0),{signal:y})),_},table:function(u){var f=r.table(u),p=f.schema.primaryKey;return i(i({},f),{mutate:function(m){var y=tt.trans;if(p.outbound||y.db._options.cache==="disabled"||y.explicit||y.idbtrans.mode!=="readwrite")return f.mutate(m);var _=He["idb://".concat(l,"/").concat(u)];return _?(y=f.mutate(m),m.type!=="add"&&m.type!=="put"||!(50<=m.values.length||Ls(p,m).some(function(k){return k==null}))?(_.optimisticOps.push(m),m.mutatedParts&&wi(m.mutatedParts),y.then(function(k){0<k.numFailures&&(qt(_.optimisticOps,m),(k=io(0,m,k))&&_.optimisticOps.push(k),m.mutatedParts&&wi(m.mutatedParts))}),y.catch(function(){qt(_.optimisticOps,m),m.mutatedParts&&wi(m.mutatedParts)})):y.then(function(k){var S=io(0,i(i({},m),{values:m.values.map(function(D,x){var A;return k.failures[x]?D:(D=(A=p.keyPath)!==null&&A!==void 0&&A.includes(".")?wt(D):i({},D),Y(D,p.keyPath,k.results[x]),D)})}),k);_.optimisticOps.push(S),queueMicrotask(function(){return m.mutatedParts&&wi(m.mutatedParts)})}),y):f.mutate(m)},query:function(m){if(!eo(tt,f)||!no("query",m))return f.query(m);var y=((S=tt.trans)===null||S===void 0?void 0:S.db._options.cache)==="immutable",x=tt,_=x.requery,k=x.signal,S=function(O,M,C,E){var L=He["idb://".concat(O,"/").concat(M)];if(!L)return[];if(!(M=L.queries[C]))return[null,!1,L,null];var B=M[(E.query?E.query.index.name:null)||""];if(!B)return[null,!1,L,null];switch(C){case"query":var F=B.find(function(N){return N.req.limit===E.limit&&N.req.values===E.values&&ro(N.req.query.range,E.query.range)});return F?[F,!0,L,B]:[B.find(function(N){return("limit"in N.req?N.req.limit:1/0)>=E.limit&&(!E.values||N.req.values)&&Ll(N.req.query.range,E.query.range)}),!1,L,B];case"count":return F=B.find(function(N){return ro(N.req.query.range,E.query.range)}),[F,!!F,L,B]}}(l,u,"query",m),D=S[0],x=S[1],A=S[2],P=S[3];return D&&x?D.obsSet=m.obsSet:(x=f.query(m).then(function(O){var M=O.result;if(D&&(D.res=M),y){for(var C=0,E=M.length;C<E;++C)Object.freeze(M[C]);Object.freeze(M)}else O.result=wt(M);return O}).catch(function(O){return P&&D&&qt(P,D),Promise.reject(O)}),D={obsSet:m.obsSet,promise:x,subscribers:new Set,type:"query",req:m,dirty:!1},P?P.push(D):(P=[D],(A=A||(He["idb://".concat(l,"/").concat(u)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[m.query.index.name||""]=P)),Bl(D,P,_,k),D.promise.then(function(O){return{result:so(O.result,m,A==null?void 0:A.optimisticOps,f,D,y)}})}})}})}};function Si(r,l){return new Proxy(r,{get:function(u,f,p){return f==="db"?l:Reflect.get(u,f,p)}})}var fe=(Pt.prototype.version=function(r){if(isNaN(r)||r<.1)throw new et.Type("Given version is not a positive number");if(r=Math.round(10*r)/10,this.idbdb||this._state.isBeingOpened)throw new et.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,r);var l=this._versions,u=l.filter(function(f){return f._cfg.version===r})[0];return u||(u=new this.Version(r),l.push(u),l.sort(Ol),u.stores({}),this._state.autoSchema=!1,u)},Pt.prototype._whenReady=function(r){var l=this;return this.idbdb&&(this._state.openComplete||tt.letThrough||this._vip)?r():new $(function(u,f){if(l._state.openComplete)return f(new et.DatabaseClosed(l._state.dbOpenError));if(!l._state.isBeingOpened){if(!l._state.autoOpen)return void f(new et.DatabaseClosed);l.open().catch(mt)}l._state.dbReadyPromise.then(u,f)}).then(r)},Pt.prototype.use=function(r){var l=r.stack,u=r.create,f=r.level,p=r.name;return p&&this.unuse({stack:l,name:p}),r=this._middlewares[l]||(this._middlewares[l]=[]),r.push({stack:l,create:u,level:f??10,name:p}),r.sort(function(m,y){return m.level-y.level}),this},Pt.prototype.unuse=function(r){var l=r.stack,u=r.name,f=r.create;return l&&this._middlewares[l]&&(this._middlewares[l]=this._middlewares[l].filter(function(p){return f?p.create!==f:!!u&&p.name!==u})),this},Pt.prototype.open=function(){var r=this;return ze(xe,function(){return Al(r)})},Pt.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var r=this._state,l=sn.indexOf(this);if(0<=l&&sn.splice(l,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}r.isBeingOpened||(r.dbReadyPromise=new $(function(u){r.dbReadyResolve=u}),r.openCanceller=new $(function(u,f){r.cancelOpen=f}))},Pt.prototype.close=function(u){var l=(u===void 0?{disableAutoOpen:!0}:u).disableAutoOpen,u=this._state;l?(u.isBeingOpened&&u.cancelOpen(new et.DatabaseClosed),this._close(),u.autoOpen=!1,u.dbOpenError=new et.DatabaseClosed):(this._close(),u.autoOpen=this._options.autoOpen||u.isBeingOpened,u.openComplete=!1,u.dbOpenError=null)},Pt.prototype.delete=function(r){var l=this;r===void 0&&(r={disableAutoOpen:!0});var u=0<arguments.length&&typeof arguments[0]!="object",f=this._state;return new $(function(p,m){function y(){l.close(r);var _=l._deps.indexedDB.deleteDatabase(l.name);_.onsuccess=xt(function(){var k,S,D;k=l._deps,S=l.name,D=k.indexedDB,k=k.IDBKeyRange,Os(D)||S===ci||Ps(D,k).delete(S).catch(mt),p()}),_.onerror=re(m),_.onblocked=l._fireOnBlocked}if(u)throw new et.InvalidArgument("Invalid closeOptions argument to db.delete()");f.isBeingOpened?f.dbReadyPromise.then(y):y()})},Pt.prototype.backendDB=function(){return this.idbdb},Pt.prototype.isOpen=function(){return this.idbdb!==null},Pt.prototype.hasBeenClosed=function(){var r=this._state.dbOpenError;return r&&r.name==="DatabaseClosed"},Pt.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Pt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Pt.prototype,"tables",{get:function(){var r=this;return a(this._allTables).map(function(l){return r._allTables[l]})},enumerable:!1,configurable:!0}),Pt.prototype.transaction=function(){var r=(function(l,u,f){var p=arguments.length;if(p<2)throw new et.InvalidArgument("Too few arguments");for(var m=new Array(p-1);--p;)m[p-1]=arguments[p];return f=m.pop(),[l,ft(m),f]}).apply(this,arguments);return this._transaction.apply(this,r)},Pt.prototype._transaction=function(r,l,u){var f=this,p=tt.trans;p&&p.db===this&&r.indexOf("!")===-1||(p=null);var m,y,_=r.indexOf("?")!==-1;r=r.replace("!","").replace("?","");try{if(y=l.map(function(S){if(S=S instanceof f.Table?S.name:S,typeof S!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return S}),r=="r"||r===ps)m=ps;else{if(r!="rw"&&r!=gs)throw new et.InvalidArgument("Invalid transaction mode: "+r);m=gs}if(p){if(p.mode===ps&&m===gs){if(!_)throw new et.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");p=null}p&&y.forEach(function(S){if(p&&p.storeNames.indexOf(S)===-1){if(!_)throw new et.SubTransaction("Table "+S+" not included in parent transaction.");p=null}}),_&&p&&!p.active&&(p=null)}}catch(S){return p?p._promise(null,function(D,x){x(S)}):St(S)}var k=(function S(D,x,A,P,O){return $.resolve().then(function(){var M=tt.transless||tt,C=D._createTransaction(x,A,D._dbSchema,P);if(C.explicit=!0,M={trans:C,transless:M},P)C.idbtrans=P.idbtrans;else try{C.create(),C.idbtrans._explicit=!0,D._state.PR1398_maxLoop=3}catch(B){return B.name===ss.InvalidState&&D.isOpen()&&0<--D._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),D.close({disableAutoOpen:!1}),D.open().then(function(){return S(D,x,A,null,O)})):St(B)}var E,L=ve(O);return L&&nn(),M=$.follow(function(){var B;(E=O.call(C,C))&&(L?(B=ke.bind(null,null),E.then(B,B)):typeof E.next=="function"&&typeof E.throw=="function"&&(E=Is(E)))},M),(E&&typeof E.then=="function"?$.resolve(E).then(function(B){return C.active?B:St(new et.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):M.then(function(){return E})).then(function(B){return P&&C._resolve(),C._completion.then(function(){return B})}).catch(function(B){return C._reject(B),St(B)})})}).bind(null,this,m,y,p,u);return p?p._promise(m,k,"lock"):tt.trans?ze(tt.transless,function(){return f._whenReady(k)}):this._whenReady(k)},Pt.prototype.table=function(r){if(!b(this._allTables,r))throw new et.InvalidTable("Table ".concat(r," does not exist"));return this._allTables[r]},Pt);function Pt(r,l){var u=this;this._middlewares={},this.verno=0;var f=Pt.dependencies;this._options=l=i({addons:Pt.addons,autoOpen:!0,indexedDB:f.indexedDB,IDBKeyRange:f.IDBKeyRange,cache:"cloned"},l),this._deps={indexedDB:l.indexedDB,IDBKeyRange:l.IDBKeyRange},f=l.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var p,m,y,_,k,S={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:mt,dbReadyPromise:null,cancelOpen:mt,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:l.autoOpen};S.dbReadyPromise=new $(function(x){S.dbReadyResolve=x}),S.openCanceller=new $(function(x,A){S.cancelOpen=A}),this._state=S,this.name=r,this.on=wn(this,"populate","blocked","versionchange","close",{ready:[rs,mt]}),this.once=function(x,A){var P=function(){for(var O=[],M=0;M<arguments.length;M++)O[M]=arguments[M];u.on(x).unsubscribe(P),A.apply(u,O)};return u.on(x,P)},this.on.ready.subscribe=J(this.on.ready.subscribe,function(x){return function(A,P){Pt.vip(function(){var O,M=u._state;M.openComplete?(M.dbOpenError||$.resolve().then(A),P&&x(A)):M.onReadyBeingFired?(M.onReadyBeingFired.push(A),P&&x(A)):(x(A),O=u,P||x(function C(){O.on.ready.unsubscribe(A),O.on.ready.unsubscribe(C)}))})}}),this.Collection=(p=this,kn(vl.prototype,function(E,C){this.db=p;var P=Rr,O=null;if(C)try{P=C()}catch(L){O=L}var M=E._ctx,C=M.table,E=C.hook.reading.fire;this._ctx={table:C,index:M.index,isPrimKey:!M.index||C.schema.primKey.keyPath&&M.index===C.schema.primKey.name,range:P,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:O,or:M.or,valueMapper:E!==mn?E:null}})),this.Table=(m=this,kn(Nr.prototype,function(x,A,P){this.db=m,this._tx=P,this.name=x,this.schema=A,this.hook=m._allTables[x]?m._allTables[x].hook:wn(null,{creating:[ul,mt],reading:[cl,mn],updating:[fl,mt],deleting:[hl,mt]})})),this.Transaction=(y=this,kn(wl.prototype,function(x,A,P,O,M){var C=this;x!=="readonly"&&A.forEach(function(E){E=(E=P[E])===null||E===void 0?void 0:E.yProps,E&&(A=A.concat(E.map(function(L){return L.updatesTable})))}),this.db=y,this.mode=x,this.storeNames=A,this.schema=P,this.chromeTransactionDurability=O,this.idbtrans=null,this.on=wn(this,"complete","error","abort"),this.parent=M||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new $(function(E,L){C._resolve=E,C._reject=L}),this._completion.then(function(){C.active=!1,C.on.complete.fire()},function(E){var L=C.active;return C.active=!1,C.on.error.fire(E),C.parent?C.parent._reject(E):L&&C.idbtrans&&C.idbtrans.abort(),St(E)})})),this.Version=(_=this,kn(Cl.prototype,function(x){this.db=_,this._cfg={version:x,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(k=this,kn(qr.prototype,function(x,A,P){if(this.db=k,this._ctx={table:x,index:A===":id"?null:A,or:P},this._cmp=this._ascending=ut,this._descending=function(O,M){return ut(M,O)},this._max=function(O,M){return 0<ut(O,M)?O:M},this._min=function(O,M){return ut(O,M)<0?O:M},this._IDBKeyRange=k._deps.IDBKeyRange,!this._IDBKeyRange)throw new et.MissingAPI})),this.on("versionchange",function(x){0<x.newVersion?console.warn("Another connection wants to upgrade database '".concat(u.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(u.name,"'. Closing db now to resume the delete request.")),u.close({disableAutoOpen:!1})}),this.on("blocked",function(x){!x.newVersion||x.newVersion<x.oldVersion?console.warn("Dexie.delete('".concat(u.name,"') was blocked")):console.warn("Upgrade '".concat(u.name,"' blocked by other connection holding version ").concat(x.oldVersion/10))}),this._maxKey=On(l.IDBKeyRange),this._createTransaction=function(x,A,P,O){return new u.Transaction(x,A,P,u._options.chromeTransactionDurability,O)},this._fireOnBlocked=function(x){u.on("blocked").fire(x),sn.filter(function(A){return A.name===u.name&&A!==u&&!A._state.vcFired}).map(function(A){return A.on("versionchange").fire(x)})},this.use(Il),this.use(Fl),this.use(Rl),this.use(Tl),this.use(El);var D=new Proxy(this,{get:function(x,A,P){if(A==="_vip")return!0;if(A==="table")return function(M){return Si(u.table(M),D)};var O=Reflect.get(x,A,P);return O instanceof Nr?Si(O,D):A==="tables"?O.map(function(M){return Si(M,D)}):A==="_createTransaction"?function(){return Si(O.apply(this,arguments),D)}:O}});this.vip=D,f.forEach(function(x){return x(u)})}var Pi,Ut=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",zl=(Fs.prototype.subscribe=function(r,l,u){return this._subscribe(r&&typeof r!="function"?r:{next:r,error:l,complete:u})},Fs.prototype[Ut]=function(){return this},Fs);function Fs(r){this._subscribe=r}try{Pi={indexedDB:o.indexedDB||o.mozIndexedDB||o.webkitIndexedDB||o.msIndexedDB,IDBKeyRange:o.IDBKeyRange||o.webkitIDBKeyRange}}catch{Pi={indexedDB:null,IDBKeyRange:null}}function oo(r){var l,u=!1,f=new zl(function(p){var m=ve(r),y,_=!1,k={},S={},D={get closed(){return _},unsubscribe:function(){_||(_=!0,y&&y.abort(),x&&Oe.storagemutated.unsubscribe(P))}};p.start&&p.start(D);var x=!1,A=function(){return ds(O)},P=function(M){xi(k,M),Cs(S,k)&&A()},O=function(){var M,C,E;!_&&Pi.indexedDB&&(k={},M={},y&&y.abort(),y=new AbortController,E=function(L){var B=tn();try{m&&nn();var F=we(r,L);return F=m?F.finally(ke):F}finally{B&&en()}}(C={subscr:M,signal:y.signal,requery:A,querier:r,trans:null}),Promise.resolve(E).then(function(L){u=!0,l=L,_||C.signal.aborted||(k={},function(B){for(var F in B)if(b(B,F))return;return 1}(S=M)||x||(Oe(Pn,P),x=!0),ds(function(){return!_&&p.next&&p.next(L)}))},function(L){u=!1,["DatabaseClosedError","AbortError"].includes(L==null?void 0:L.name)||_||ds(function(){_||p.error&&p.error(L)})}))};return setTimeout(A,0),D});return f.hasValue=function(){return u},f.getValue=function(){return l},f}var We=fe;function zs(r){var l=Me;try{Me=!0,Oe.storagemutated.fire(r),Es(r,!0)}finally{Me=l}}v(We,i(i({},ti),{delete:function(r){return new We(r,{addons:[]}).delete()},exists:function(r){return new We(r,{addons:[]}).open().then(function(l){return l.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(r){try{return l=We.dependencies,u=l.indexedDB,l=l.IDBKeyRange,(Os(u)?Promise.resolve(u.databases()).then(function(f){return f.map(function(p){return p.name}).filter(function(p){return p!==ci})}):Ps(u,l).toCollection().primaryKeys()).then(r)}catch{return St(new et.MissingAPI)}var l,u},defineClass:function(){return function(r){h(this,r)}},ignoreTransaction:function(r){return tt.trans?ze(tt.transless,r):r()},vip:Ms,async:function(r){return function(){try{var l=Is(r.apply(this,arguments));return l&&typeof l.then=="function"?l:$.resolve(l)}catch(u){return St(u)}}},spawn:function(r,l,u){try{var f=Is(r.apply(u,l||[]));return f&&typeof f.then=="function"?f:$.resolve(f)}catch(p){return St(p)}},currentTransaction:{get:function(){return tt.trans||null}},waitFor:function(r,l){return l=$.resolve(typeof r=="function"?We.ignoreTransaction(r):r).timeout(l||6e4),tt.trans?tt.trans.waitFor(l):l},Promise:$,debug:{get:function(){return se},set:function(r){Mr(r)}},derive:T,extend:h,props:v,override:J,Events:wn,on:Oe,liveQuery:oo,extendObservabilitySet:xi,getByKeyPath:Q,setByKeyPath:Y,delByKeyPath:function(r,l){typeof l=="string"?Y(r,l,void 0):"length"in l&&[].map.call(l,function(u){Y(r,u,void 0)})},shallowClone:Z,deepClone:wt,getObjectDiff:Rs,cmp:ut,asap:K,minKey:-1/0,addons:[],connections:sn,errnames:ss,dependencies:Pi,cache:He,semVer:"4.2.1",version:"4.2.1".split(".").map(function(r){return parseInt(r)}).reduce(function(r,l,u){return r+l/Math.pow(10,2*u)})})),We.maxKey=On(We.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Oe(Pn,function(r){Me||(r=new CustomEvent(bs,{detail:r}),Me=!0,dispatchEvent(r),Me=!1)}),addEventListener(bs,function(r){r=r.detail,Me||zs(r)}));var ln,Me=!1,ao=function(){};return typeof BroadcastChannel<"u"&&((ao=function(){(ln=new BroadcastChannel(bs)).onmessage=function(r){return r.data&&zs(r.data)}})(),typeof ln.unref=="function"&&ln.unref(),Oe(Pn,function(r){Me||ln.postMessage(r)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(r){if(!fe.disableBfCache&&r.persisted){se&&console.debug("Dexie: handling persisted pagehide"),ln!=null&&ln.close();for(var l=0,u=sn;l<u.length;l++)u[l].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(r){!fe.disableBfCache&&r.persisted&&(se&&console.debug("Dexie: handling persisted pageshow"),ao(),zs({all:new Et(-1/0,[[]])}))})),$.rejectionMapper=function(r,l){return!r||r instanceof $t||r instanceof TypeError||r instanceof SyntaxError||!r.name||!Or[r.name]?r:(l=new Or[r.name](l||r.message,r),"stack"in r&&I(l,"stack",{get:function(){return this.inner.stack}}),l)},Mr(se),i(fe,Object.freeze({__proto__:null,Dexie:fe,liveQuery:oo,Entity:Lr,cmp:ut,PropModification:xn,replacePrefix:function(r,l){return new xn({replacePrefix:[r,l]})},add:function(r){return new xn({add:r})},remove:function(r){return new xn({remove:r})},default:fe,RangeSet:Et,mergeRanges:Cn,rangesOverlap:Gr}),{default:fe}),fe})})(xa);var Wl=xa.exports;const Zs=Hl(Wl),co=Symbol.for("Dexie"),Vi=globalThis[co]||(globalThis[co]=Zs);if(Zs.semVer!==Vi.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Zs.semVer} and ${Vi.semVer}`);const{liveQuery:gd,mergeRanges:md,rangesOverlap:yd,RangeSet:bd,cmp:vd,Entity:_d,PropModification:xd,replacePrefix:wd,add:kd,remove:Sd,DexieYProvider:Pd}=Vi;class Kl extends Vi{constructor(){super("BloodPressureDB"),this.version(1).stores({readings:"++id, systolic, diastolic, pulse, timestamp, category, userId",users:"++id, username, created"})}}const Ji=new Kl;async function Vl(){try{const n=localStorage.getItem("bpHistory");if(n){const t=JSON.parse(n);console.log("Migrating",t.length,"readings from localStorage to IndexedDB");for(const e of t)await Ji.readings.add({systolic:e.systolic,diastolic:e.diastolic,pulse:e.pulse,timestamp:new Date(e.date),category:null,userId:null});localStorage.removeItem("bpHistory"),console.log("Migration completed successfully")}}catch(n){console.error("Error migrating from localStorage:",n)}}let Ns=null;async function ur(){Ns||(Ns=Vl()),await Ns}async function ql(n){await ur();const t={systolic:n.systolic,diastolic:n.diastolic,pulse:n.pulse,timestamp:new Date(n.date),category:null,userId:null};try{await Ji.readings.add(t),console.log("Reading saved to IndexedDB:",t)}catch(e){throw console.error("Error saving reading:",e),e.name==="QuotaExceededError"||e.name==="AbortError"||e.inner&&e.inner.name==="QuotaExceededError"?alert("Unable to save: Storage quota exceeded. Try clearing browser data or use a different browser mode."):alert("Failed to save reading. Please try again."),e}}async function wa(){return await ur(),(await Ji.readings.orderBy("timestamp").reverse().toArray()).map(t=>({systolic:t.systolic,diastolic:t.diastolic,pulse:t.pulse,date:t.timestamp.toISOString(),id:t.id}))}async function $l(n){await ur();const t=await wa();if(n>=0&&n<t.length){const e=t[n];await Ji.readings.delete(e.id),console.log("Reading deleted from IndexedDB:",e.id)}}function ka(n,t){return n>180||t>120?{class:"crisis",text:"CRISIS - Seek immediate medical attention"}:n<90||t<60?{class:"low",text:"Low Blood Pressure - Consult healthcare provider"}:n>=140||t>=90?{class:"high2",text:"High Blood Pressure Stage 2"}:n>=130&&n<=139||t>=80&&t<=89?{class:"high1",text:"High Blood Pressure Stage 1"}:n>=120&&n<=129&&t<80?{class:"elevated",text:"Elevated Blood Pressure"}:n>=90&&n<120&&t>=60&&t<80?{class:"normal",text:"Normal Blood Pressure"}:{class:"elevated",text:"Check values"}}function Ul(n){return n<50?"Very Low - Consult doctor":n<60?"Low":n>120?"Very High - Consult doctor":n>100?"High":"Normal"}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Jn(n){return n+.5|0}const Ce=(n,t,e)=>Math.max(Math.min(n,e),t);function Ln(n){return Ce(Jn(n*2.55),0,255)}function Te(n){return Ce(Jn(n*255),0,255)}function me(n){return Ce(Jn(n/2.55)/100,0,1)}function uo(n){return Ce(Jn(n*100),0,100)}const Yt={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Js=[..."0123456789ABCDEF"],Yl=n=>Js[n&15],Xl=n=>Js[(n&240)>>4]+Js[n&15],Mi=n=>(n&240)>>4===(n&15),Gl=n=>Mi(n.r)&&Mi(n.g)&&Mi(n.b)&&Mi(n.a);function Ql(n){var t=n.length,e;return n[0]==="#"&&(t===4||t===5?e={r:255&Yt[n[1]]*17,g:255&Yt[n[2]]*17,b:255&Yt[n[3]]*17,a:t===5?Yt[n[4]]*17:255}:(t===7||t===9)&&(e={r:Yt[n[1]]<<4|Yt[n[2]],g:Yt[n[3]]<<4|Yt[n[4]],b:Yt[n[5]]<<4|Yt[n[6]],a:t===9?Yt[n[7]]<<4|Yt[n[8]]:255})),e}const Zl=(n,t)=>n<255?t(n):"";function Jl(n){var t=Gl(n)?Yl:Xl;return n?"#"+t(n.r)+t(n.g)+t(n.b)+Zl(n.a,t):void 0}const tc=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Sa(n,t,e){const i=t*Math.min(e,1-e),s=(o,a=(o+n/30)%12)=>e-i*Math.max(Math.min(a-3,9-a,1),-1);return[s(0),s(8),s(4)]}function ec(n,t,e){const i=(s,o=(s+n/60)%6)=>e-e*t*Math.max(Math.min(o,4-o,1),0);return[i(5),i(3),i(1)]}function nc(n,t,e){const i=Sa(n,1,.5);let s;for(t+e>1&&(s=1/(t+e),t*=s,e*=s),s=0;s<3;s++)i[s]*=1-t-e,i[s]+=t;return i}function ic(n,t,e,i,s){return n===s?(t-e)/i+(t<e?6:0):t===s?(e-n)/i+2:(n-t)/i+4}function hr(n){const e=n.r/255,i=n.g/255,s=n.b/255,o=Math.max(e,i,s),a=Math.min(e,i,s),c=(o+a)/2;let h,d,g;return o!==a&&(g=o-a,d=c>.5?g/(2-o-a):g/(o+a),h=ic(e,i,s,g,o),h=h*60+.5),[h|0,d||0,c]}function fr(n,t,e,i){return(Array.isArray(t)?n(t[0],t[1],t[2]):n(t,e,i)).map(Te)}function dr(n,t,e){return fr(Sa,n,t,e)}function sc(n,t,e){return fr(nc,n,t,e)}function rc(n,t,e){return fr(ec,n,t,e)}function Pa(n){return(n%360+360)%360}function oc(n){const t=tc.exec(n);let e=255,i;if(!t)return;t[5]!==i&&(e=t[6]?Ln(+t[5]):Te(+t[5]));const s=Pa(+t[2]),o=+t[3]/100,a=+t[4]/100;return t[1]==="hwb"?i=sc(s,o,a):t[1]==="hsv"?i=rc(s,o,a):i=dr(s,o,a),{r:i[0],g:i[1],b:i[2],a:e}}function ac(n,t){var e=hr(n);e[0]=Pa(e[0]+t),e=dr(e),n.r=e[0],n.g=e[1],n.b=e[2]}function lc(n){if(!n)return;const t=hr(n),e=t[0],i=uo(t[1]),s=uo(t[2]);return n.a<255?`hsla(${e}, ${i}%, ${s}%, ${me(n.a)})`:`hsl(${e}, ${i}%, ${s}%)`}const ho={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},fo={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function cc(){const n={},t=Object.keys(fo),e=Object.keys(ho);let i,s,o,a,c;for(i=0;i<t.length;i++){for(a=c=t[i],s=0;s<e.length;s++)o=e[s],c=c.replace(o,ho[o]);o=parseInt(fo[a],16),n[c]=[o>>16&255,o>>8&255,o&255]}return n}let Di;function uc(n){Di||(Di=cc(),Di.transparent=[0,0,0,0]);const t=Di[n.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const hc=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function fc(n){const t=hc.exec(n);let e=255,i,s,o;if(t){if(t[7]!==i){const a=+t[7];e=t[8]?Ln(a):Ce(a*255,0,255)}return i=+t[1],s=+t[3],o=+t[5],i=255&(t[2]?Ln(i):Ce(i,0,255)),s=255&(t[4]?Ln(s):Ce(s,0,255)),o=255&(t[6]?Ln(o):Ce(o,0,255)),{r:i,g:s,b:o,a:e}}}function dc(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${me(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const Hs=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,cn=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function pc(n,t,e){const i=cn(me(n.r)),s=cn(me(n.g)),o=cn(me(n.b));return{r:Te(Hs(i+e*(cn(me(t.r))-i))),g:Te(Hs(s+e*(cn(me(t.g))-s))),b:Te(Hs(o+e*(cn(me(t.b))-o))),a:n.a+e*(t.a-n.a)}}function Ci(n,t,e){if(n){let i=hr(n);i[t]=Math.max(0,Math.min(i[t]+i[t]*e,t===0?360:1)),i=dr(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function Oa(n,t){return n&&Object.assign(t||{},n)}function po(n){var t={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(t={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(t.a=Te(n[3]))):(t=Oa(n,{r:0,g:0,b:0,a:1}),t.a=Te(t.a)),t}function gc(n){return n.charAt(0)==="r"?fc(n):oc(n)}class $n{constructor(t){if(t instanceof $n)return t;const e=typeof t;let i;e==="object"?i=po(t):e==="string"&&(i=Ql(t)||uc(t)||gc(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=Oa(this._rgb);return t&&(t.a=me(t.a)),t}set rgb(t){this._rgb=po(t)}rgbString(){return this._valid?dc(this._rgb):void 0}hexString(){return this._valid?Jl(this._rgb):void 0}hslString(){return this._valid?lc(this._rgb):void 0}mix(t,e){if(t){const i=this.rgb,s=t.rgb;let o;const a=e===o?.5:e,c=2*a-1,h=i.a-s.a,d=((c*h===-1?c:(c+h)/(1+c*h))+1)/2;o=1-d,i.r=255&d*i.r+o*s.r+.5,i.g=255&d*i.g+o*s.g+.5,i.b=255&d*i.b+o*s.b+.5,i.a=a*i.a+(1-a)*s.a,this.rgb=i}return this}interpolate(t,e){return t&&(this._rgb=pc(this._rgb,t._rgb,e)),this}clone(){return new $n(this.rgb)}alpha(t){return this._rgb.a=Te(t),this}clearer(t){const e=this._rgb;return e.a*=1-t,this}greyscale(){const t=this._rgb,e=Jn(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=e,this}opaquer(t){const e=this._rgb;return e.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Ci(this._rgb,2,t),this}darken(t){return Ci(this._rgb,2,-t),this}saturate(t){return Ci(this._rgb,1,t),this}desaturate(t){return Ci(this._rgb,1,-t),this}rotate(t){return ac(this._rgb,t),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function de(){}const mc=(()=>{let n=0;return()=>n++})();function bt(n){return n==null}function Ct(n){if(Array.isArray&&Array.isArray(n))return!0;const t=Object.prototype.toString.call(n);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function pt(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function Qt(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function ae(n,t){return Qt(n)?n:t}function ht(n,t){return typeof n>"u"?t:n}const yc=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*t:+n;function _t(n,t,e){if(n&&typeof n.call=="function")return n.apply(e,t)}function gt(n,t,e,i){let s,o,a;if(Ct(n))for(o=n.length,s=0;s<o;s++)t.call(e,n[s],s);else if(pt(n))for(a=Object.keys(n),o=a.length,s=0;s<o;s++)t.call(e,n[a[s]],a[s])}function qi(n,t){let e,i,s,o;if(!n||!t||n.length!==t.length)return!1;for(e=0,i=n.length;e<i;++e)if(s=n[e],o=t[e],s.datasetIndex!==o.datasetIndex||s.index!==o.index)return!1;return!0}function $i(n){if(Ct(n))return n.map($i);if(pt(n)){const t=Object.create(null),e=Object.keys(n),i=e.length;let s=0;for(;s<i;++s)t[e[s]]=$i(n[e[s]]);return t}return n}function Ma(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function bc(n,t,e,i){if(!Ma(n))return;const s=t[n],o=e[n];pt(s)&&pt(o)?Un(s,o,i):t[n]=$i(o)}function Un(n,t,e){const i=Ct(t)?t:[t],s=i.length;if(!pt(n))return n;e=e||{};const o=e.merger||bc;let a;for(let c=0;c<s;++c){if(a=i[c],!pt(a))continue;const h=Object.keys(a);for(let d=0,g=h.length;d<g;++d)o(h[d],n,a,e)}return n}function Nn(n,t){return Un(n,t,{merger:vc})}function vc(n,t,e){if(!Ma(n))return;const i=t[n],s=e[n];pt(i)&&pt(s)?Nn(i,s):Object.prototype.hasOwnProperty.call(t,n)||(t[n]=$i(s))}const go={"":n=>n,x:n=>n.x,y:n=>n.y};function _c(n){const t=n.split("."),e=[];let i="";for(const s of t)i+=s,i.endsWith("\\")?i=i.slice(0,-1)+".":(e.push(i),i="");return e}function xc(n){const t=_c(n);return e=>{for(const i of t){if(i==="")break;e=e&&e[i]}return e}}function Ui(n,t){return(go[t]||(go[t]=xc(t)))(n)}function pr(n){return n.charAt(0).toUpperCase()+n.slice(1)}const Yi=n=>typeof n<"u",Ee=n=>typeof n=="function",mo=(n,t)=>{if(n.size!==t.size)return!1;for(const e of n)if(!t.has(e))return!1;return!0};function wc(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const At=Math.PI,ue=2*At,kc=ue+At,Xi=Number.POSITIVE_INFINITY,Sc=At/180,ee=At/2,Ve=At/4,yo=At*2/3,Da=Math.log10,fn=Math.sign;function Hn(n,t,e){return Math.abs(n-t)<e}function bo(n){const t=Math.round(n);n=Hn(n,t,n/1e3)?t:n;const e=Math.pow(10,Math.floor(Da(n))),i=n/e;return(i<=1?1:i<=2?2:i<=5?5:10)*e}function Pc(n){const t=[],e=Math.sqrt(n);let i;for(i=1;i<e;i++)n%i===0&&(t.push(i),t.push(n/i));return e===(e|0)&&t.push(e),t.sort((s,o)=>s-o).pop(),t}function Oc(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function Yn(n){return!Oc(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function Mc(n,t){const e=Math.round(n);return e-t<=n&&e+t>=n}function Dc(n,t,e){let i,s,o;for(i=0,s=n.length;i<s;i++)o=n[i][e],isNaN(o)||(t.min=Math.min(t.min,o),t.max=Math.max(t.max,o))}function Xe(n){return n*(At/180)}function Cc(n){return n*(180/At)}function vo(n){if(!Qt(n))return;let t=1,e=0;for(;Math.round(n*t)/t!==n;)t*=10,e++;return e}function Ac(n,t){const e=t.x-n.x,i=t.y-n.y,s=Math.sqrt(e*e+i*i);let o=Math.atan2(i,e);return o<-.5*At&&(o+=ue),{angle:o,distance:s}}function tr(n,t){return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}function Tc(n,t){return(n-t+kc)%ue-At}function De(n){return(n%ue+ue)%ue}function Ca(n,t,e,i){const s=De(n),o=De(t),a=De(e),c=De(o-s),h=De(a-s),d=De(s-o),g=De(s-a);return s===o||s===a||i&&o===a||c>h&&d<g}function Xt(n,t,e){return Math.max(t,Math.min(e,n))}function Ec(n){return Xt(n,-32768,32767)}function Bn(n,t,e,i=1e-6){return n>=Math.min(t,e)-i&&n<=Math.max(t,e)+i}function gr(n,t,e){e=e||(a=>n[a]<t);let i=n.length-1,s=0,o;for(;i-s>1;)o=s+i>>1,e(o)?s=o:i=o;return{lo:s,hi:i}}const Ge=(n,t,e,i)=>gr(n,e,i?s=>{const o=n[s][t];return o<e||o===e&&n[s+1][t]===e}:s=>n[s][t]<e),Ic=(n,t,e)=>gr(n,e,i=>n[i][t]>=e);function Rc(n,t,e){let i=0,s=n.length;for(;i<s&&n[i]<t;)i++;for(;s>i&&n[s-1]>e;)s--;return i>0||s<n.length?n.slice(i,s):n}const Aa=["push","pop","shift","splice","unshift"];function Lc(n,t){if(n._chartjs){n._chartjs.listeners.push(t);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),Aa.forEach(e=>{const i="_onData"+pr(e),s=n[e];Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value(...o){const a=s.apply(this,o);return n._chartjs.listeners.forEach(c=>{typeof c[i]=="function"&&c[i](...o)}),a}})})}function _o(n,t){const e=n._chartjs;if(!e)return;const i=e.listeners,s=i.indexOf(t);s!==-1&&i.splice(s,1),!(i.length>0)&&(Aa.forEach(o=>{delete n[o]}),delete n._chartjs)}function Bc(n){const t=new Set(n);return t.size===n.length?n:Array.from(t)}const Ta=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function Ea(n,t){let e=[],i=!1;return function(...s){e=s,i||(i=!0,Ta.call(window,()=>{i=!1,n.apply(t,e)}))}}function Fc(n,t){let e;return function(...i){return t?(clearTimeout(e),e=setTimeout(n,t,i)):n.apply(this,i),t}}const mr=n=>n==="start"?"left":n==="end"?"right":"center",Lt=(n,t,e)=>n==="start"?t:n==="end"?e:(t+e)/2,zc=(n,t,e,i)=>n===(i?"left":"right")?e:n==="center"?(t+e)/2:t;function jc(n,t,e){const i=t.length;let s=0,o=i;if(n._sorted){const{iScale:a,vScale:c,_parsed:h}=n,d=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null,g=a.axis,{min:b,max:v,minDefined:w,maxDefined:I}=a.getUserBounds();if(w){if(s=Math.min(Ge(h,g,b).lo,e?i:Ge(t,g,a.getPixelForValue(b)).lo),d){const T=h.slice(0,s+1).reverse().findIndex(R=>!bt(R[c.axis]));s-=Math.max(0,T)}s=Xt(s,0,i-1)}if(I){let T=Math.max(Ge(h,a.axis,v,!0).hi+1,e?0:Ge(t,g,a.getPixelForValue(v),!0).hi+1);if(d){const R=h.slice(T-1).findIndex(z=>!bt(z[c.axis]));T+=Math.max(0,R)}o=Xt(T,s,i)-s}else o=i-s}return{start:s,count:o}}function Nc(n){const{xScale:t,yScale:e,_scaleRanges:i}=n,s={xmin:t.min,xmax:t.max,ymin:e.min,ymax:e.max};if(!i)return n._scaleRanges=s,!0;const o=i.xmin!==t.min||i.xmax!==t.max||i.ymin!==e.min||i.ymax!==e.max;return Object.assign(i,s),o}const Ai=n=>n===0||n===1,xo=(n,t,e)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-t)*ue/e)),wo=(n,t,e)=>Math.pow(2,-10*n)*Math.sin((n-t)*ue/e)+1,Wn={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*ee)+1,easeOutSine:n=>Math.sin(n*ee),easeInOutSine:n=>-.5*(Math.cos(At*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>Ai(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>Ai(n)?n:xo(n,.075,.3),easeOutElastic:n=>Ai(n)?n:wo(n,.075,.3),easeInOutElastic(n){return Ai(n)?n:n<.5?.5*xo(n*2,.1125,.45):.5+.5*wo(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let t=1.70158;return(n/=.5)<1?.5*(n*n*(((t*=1.525)+1)*n-t)):.5*((n-=2)*n*(((t*=1.525)+1)*n+t)+2)},easeInBounce:n=>1-Wn.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?Wn.easeInBounce(n*2)*.5:Wn.easeOutBounce(n*2-1)*.5+.5};function yr(n){if(n&&typeof n=="object"){const t=n.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function ko(n){return yr(n)?n:new $n(n)}function Ws(n){return yr(n)?n:new $n(n).saturate(.5).darken(.1).hexString()}const Hc=["x","y","borderWidth","radius","tension"],Wc=["color","borderColor","backgroundColor"];function Kc(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),n.set("animations",{colors:{type:"color",properties:Wc},numbers:{type:"number",properties:Hc}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function Vc(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const So=new Map;function qc(n,t){t=t||{};const e=n+JSON.stringify(t);let i=So.get(e);return i||(i=new Intl.NumberFormat(n,t),So.set(e,i)),i}function Ia(n,t,e){return qc(t,e).format(n)}const $c={values(n){return Ct(n)?n:""+n},numeric(n,t,e){if(n===0)return"0";const i=this.chart.options.locale;let s,o=n;if(e.length>1){const d=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(d<1e-4||d>1e15)&&(s="scientific"),o=Uc(n,e)}const a=Da(Math.abs(o)),c=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),h={notation:s,minimumFractionDigits:c,maximumFractionDigits:c};return Object.assign(h,this.options.ticks.format),Ia(n,i,h)}};function Uc(n,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&n!==Math.floor(n)&&(e=n-Math.floor(n)),e}var Ra={formatters:$c};function Yc(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Ra.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const Ze=Object.create(null),er=Object.create(null);function Kn(n,t){if(!t)return n;const e=t.split(".");for(let i=0,s=e.length;i<s;++i){const o=e[i];n=n[o]||(n[o]=Object.create(null))}return n}function Ks(n,t,e){return typeof t=="string"?Un(Kn(n,t),e):Un(Kn(n,""),t)}class Xc{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,s)=>Ws(s.backgroundColor),this.hoverBorderColor=(i,s)=>Ws(s.borderColor),this.hoverColor=(i,s)=>Ws(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return Ks(this,t,e)}get(t){return Kn(this,t)}describe(t,e){return Ks(er,t,e)}override(t,e){return Ks(Ze,t,e)}route(t,e,i,s){const o=Kn(this,t),a=Kn(this,i),c="_"+e;Object.defineProperties(o,{[c]:{value:o[e],writable:!0},[e]:{enumerable:!0,get(){const h=this[c],d=a[s];return pt(h)?Object.assign({},d,h):ht(h,d)},set(h){this[c]=h}}})}apply(t){t.forEach(e=>e(this))}}var Ot=new Xc({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Kc,Vc,Yc]);function Gc(n){return!n||bt(n.size)||bt(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function Po(n,t,e,i,s){let o=t[s];return o||(o=t[s]=n.measureText(s).width,e.push(s)),o>i&&(i=o),i}function qe(n,t,e){const i=n.currentDevicePixelRatio,s=e!==0?Math.max(e/2,.5):0;return Math.round((t-s)*i)/i+s}function Oo(n,t){!t&&!n||(t=t||n.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,n.width,n.height),t.restore())}function nr(n,t,e,i){La(n,t,e,i,null)}function La(n,t,e,i,s){let o,a,c,h,d,g,b,v;const w=t.pointStyle,I=t.rotation,T=t.radius;let R=(I||0)*Sc;if(w&&typeof w=="object"&&(o=w.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){n.save(),n.translate(e,i),n.rotate(R),n.drawImage(w,-w.width/2,-w.height/2,w.width,w.height),n.restore();return}if(!(isNaN(T)||T<=0)){switch(n.beginPath(),w){default:s?n.ellipse(e,i,s/2,T,0,0,ue):n.arc(e,i,T,0,ue),n.closePath();break;case"triangle":g=s?s/2:T,n.moveTo(e+Math.sin(R)*g,i-Math.cos(R)*T),R+=yo,n.lineTo(e+Math.sin(R)*g,i-Math.cos(R)*T),R+=yo,n.lineTo(e+Math.sin(R)*g,i-Math.cos(R)*T),n.closePath();break;case"rectRounded":d=T*.516,h=T-d,a=Math.cos(R+Ve)*h,b=Math.cos(R+Ve)*(s?s/2-d:h),c=Math.sin(R+Ve)*h,v=Math.sin(R+Ve)*(s?s/2-d:h),n.arc(e-b,i-c,d,R-At,R-ee),n.arc(e+v,i-a,d,R-ee,R),n.arc(e+b,i+c,d,R,R+ee),n.arc(e-v,i+a,d,R+ee,R+At),n.closePath();break;case"rect":if(!I){h=Math.SQRT1_2*T,g=s?s/2:h,n.rect(e-g,i-h,2*g,2*h);break}R+=Ve;case"rectRot":b=Math.cos(R)*(s?s/2:T),a=Math.cos(R)*T,c=Math.sin(R)*T,v=Math.sin(R)*(s?s/2:T),n.moveTo(e-b,i-c),n.lineTo(e+v,i-a),n.lineTo(e+b,i+c),n.lineTo(e-v,i+a),n.closePath();break;case"crossRot":R+=Ve;case"cross":b=Math.cos(R)*(s?s/2:T),a=Math.cos(R)*T,c=Math.sin(R)*T,v=Math.sin(R)*(s?s/2:T),n.moveTo(e-b,i-c),n.lineTo(e+b,i+c),n.moveTo(e+v,i-a),n.lineTo(e-v,i+a);break;case"star":b=Math.cos(R)*(s?s/2:T),a=Math.cos(R)*T,c=Math.sin(R)*T,v=Math.sin(R)*(s?s/2:T),n.moveTo(e-b,i-c),n.lineTo(e+b,i+c),n.moveTo(e+v,i-a),n.lineTo(e-v,i+a),R+=Ve,b=Math.cos(R)*(s?s/2:T),a=Math.cos(R)*T,c=Math.sin(R)*T,v=Math.sin(R)*(s?s/2:T),n.moveTo(e-b,i-c),n.lineTo(e+b,i+c),n.moveTo(e+v,i-a),n.lineTo(e-v,i+a);break;case"line":a=s?s/2:Math.cos(R)*T,c=Math.sin(R)*T,n.moveTo(e-a,i-c),n.lineTo(e+a,i+c);break;case"dash":n.moveTo(e,i),n.lineTo(e+Math.cos(R)*(s?s/2:T),i+Math.sin(R)*T);break;case!1:n.closePath();break}n.fill(),t.borderWidth>0&&n.stroke()}}function Xn(n,t,e){return e=e||.5,!t||n&&n.x>t.left-e&&n.x<t.right+e&&n.y>t.top-e&&n.y<t.bottom+e}function br(n,t){n.save(),n.beginPath(),n.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),n.clip()}function vr(n){n.restore()}function Qc(n,t,e,i,s){if(!t)return n.lineTo(e.x,e.y);if(s==="middle"){const o=(t.x+e.x)/2;n.lineTo(o,t.y),n.lineTo(o,e.y)}else s==="after"!=!!i?n.lineTo(t.x,e.y):n.lineTo(e.x,t.y);n.lineTo(e.x,e.y)}function Zc(n,t,e,i){if(!t)return n.lineTo(e.x,e.y);n.bezierCurveTo(i?t.cp1x:t.cp2x,i?t.cp1y:t.cp2y,i?e.cp2x:e.cp1x,i?e.cp2y:e.cp1y,e.x,e.y)}function Jc(n,t){t.translation&&n.translate(t.translation[0],t.translation[1]),bt(t.rotation)||n.rotate(t.rotation),t.color&&(n.fillStyle=t.color),t.textAlign&&(n.textAlign=t.textAlign),t.textBaseline&&(n.textBaseline=t.textBaseline)}function tu(n,t,e,i,s){if(s.strikethrough||s.underline){const o=n.measureText(i),a=t-o.actualBoundingBoxLeft,c=t+o.actualBoundingBoxRight,h=e-o.actualBoundingBoxAscent,d=e+o.actualBoundingBoxDescent,g=s.strikethrough?(h+d)/2:d;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=s.decorationWidth||2,n.moveTo(a,g),n.lineTo(c,g),n.stroke()}}function eu(n,t){const e=n.fillStyle;n.fillStyle=t.color,n.fillRect(t.left,t.top,t.width,t.height),n.fillStyle=e}function Gn(n,t,e,i,s,o={}){const a=Ct(t)?t:[t],c=o.strokeWidth>0&&o.strokeColor!=="";let h,d;for(n.save(),n.font=s.string,Jc(n,o),h=0;h<a.length;++h)d=a[h],o.backdrop&&eu(n,o.backdrop),c&&(o.strokeColor&&(n.strokeStyle=o.strokeColor),bt(o.strokeWidth)||(n.lineWidth=o.strokeWidth),n.strokeText(d,e,i,o.maxWidth)),n.fillText(d,e,i,o.maxWidth),tu(n,e,i,d,o),i+=Number(s.lineHeight);n.restore()}function ir(n,t){const{x:e,y:i,w:s,h:o,radius:a}=t;n.arc(e+a.topLeft,i+a.topLeft,a.topLeft,1.5*At,At,!0),n.lineTo(e,i+o-a.bottomLeft),n.arc(e+a.bottomLeft,i+o-a.bottomLeft,a.bottomLeft,At,ee,!0),n.lineTo(e+s-a.bottomRight,i+o),n.arc(e+s-a.bottomRight,i+o-a.bottomRight,a.bottomRight,ee,0,!0),n.lineTo(e+s,i+a.topRight),n.arc(e+s-a.topRight,i+a.topRight,a.topRight,0,-ee,!0),n.lineTo(e+a.topLeft,i)}const nu=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,iu=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function su(n,t){const e=(""+n).match(nu);if(!e||e[1]==="normal")return t*1.2;switch(n=+e[2],e[3]){case"px":return n;case"%":n/=100;break}return t*n}const ru=n=>+n||0;function Ba(n,t){const e={},i=pt(t),s=i?Object.keys(t):t,o=pt(n)?i?a=>ht(n[a],n[t[a]]):a=>n[a]:()=>n;for(const a of s)e[a]=ru(o(a));return e}function ou(n){return Ba(n,{top:"y",right:"x",bottom:"y",left:"x"})}function Vn(n){return Ba(n,["topLeft","topRight","bottomLeft","bottomRight"])}function Zt(n){const t=ou(n);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Bt(n,t){n=n||{},t=t||Ot.font;let e=ht(n.size,t.size);typeof e=="string"&&(e=parseInt(e,10));let i=ht(n.style,t.style);i&&!(""+i).match(iu)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const s={family:ht(n.family,t.family),lineHeight:su(ht(n.lineHeight,t.lineHeight),e),size:e,style:i,weight:ht(n.weight,t.weight),string:""};return s.string=Gc(s),s}function Ti(n,t,e,i){let s,o,a;for(s=0,o=n.length;s<o;++s)if(a=n[s],a!==void 0&&a!==void 0)return a}function au(n,t,e){const{min:i,max:s}=n,o=yc(t,(s-i)/2),a=(c,h)=>e&&c===0?0:c+h;return{min:a(i,-Math.abs(o)),max:a(s,o)}}function Je(n,t){return Object.assign(Object.create(n),t)}function _r(n,t=[""],e,i,s=()=>n[0]){const o=e||n;typeof i>"u"&&(i=Na("_fallback",n));const a={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:o,_fallback:i,_getTarget:s,override:c=>_r([c,...n],t,o,i)};return new Proxy(a,{deleteProperty(c,h){return delete c[h],delete c._keys,delete n[0][h],!0},get(c,h){return za(c,h,()=>gu(h,t,n,c))},getOwnPropertyDescriptor(c,h){return Reflect.getOwnPropertyDescriptor(c._scopes[0],h)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(c,h){return Do(c).includes(h)},ownKeys(c){return Do(c)},set(c,h,d){const g=c._storage||(c._storage=s());return c[h]=g[h]=d,delete c._keys,!0}})}function dn(n,t,e,i){const s={_cacheable:!1,_proxy:n,_context:t,_subProxy:e,_stack:new Set,_descriptors:Fa(n,i),setContext:o=>dn(n,o,e,i),override:o=>dn(n.override(o),t,e,i)};return new Proxy(s,{deleteProperty(o,a){return delete o[a],delete n[a],!0},get(o,a,c){return za(o,a,()=>cu(o,a,c))},getOwnPropertyDescriptor(o,a){return o._descriptors.allKeys?Reflect.has(n,a)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,a)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(o,a){return Reflect.has(n,a)},ownKeys(){return Reflect.ownKeys(n)},set(o,a,c){return n[a]=c,delete o[a],!0}})}function Fa(n,t={scriptable:!0,indexable:!0}){const{_scriptable:e=t.scriptable,_indexable:i=t.indexable,_allKeys:s=t.allKeys}=n;return{allKeys:s,scriptable:e,indexable:i,isScriptable:Ee(e)?e:()=>e,isIndexable:Ee(i)?i:()=>i}}const lu=(n,t)=>n?n+pr(t):t,xr=(n,t)=>pt(t)&&n!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function za(n,t,e){if(Object.prototype.hasOwnProperty.call(n,t)||t==="constructor")return n[t];const i=e();return n[t]=i,i}function cu(n,t,e){const{_proxy:i,_context:s,_subProxy:o,_descriptors:a}=n;let c=i[t];return Ee(c)&&a.isScriptable(t)&&(c=uu(t,c,n,e)),Ct(c)&&c.length&&(c=hu(t,c,n,a.isIndexable)),xr(t,c)&&(c=dn(c,s,o&&o[t],a)),c}function uu(n,t,e,i){const{_proxy:s,_context:o,_subProxy:a,_stack:c}=e;if(c.has(n))throw new Error("Recursion detected: "+Array.from(c).join("->")+"->"+n);c.add(n);let h=t(o,a||i);return c.delete(n),xr(n,h)&&(h=wr(s._scopes,s,n,h)),h}function hu(n,t,e,i){const{_proxy:s,_context:o,_subProxy:a,_descriptors:c}=e;if(typeof o.index<"u"&&i(n))return t[o.index%t.length];if(pt(t[0])){const h=t,d=s._scopes.filter(g=>g!==h);t=[];for(const g of h){const b=wr(d,s,n,g);t.push(dn(b,o,a&&a[n],c))}}return t}function ja(n,t,e){return Ee(n)?n(t,e):n}const fu=(n,t)=>n===!0?t:typeof n=="string"?Ui(t,n):void 0;function du(n,t,e,i,s){for(const o of t){const a=fu(e,o);if(a){n.add(a);const c=ja(a._fallback,e,s);if(typeof c<"u"&&c!==e&&c!==i)return c}else if(a===!1&&typeof i<"u"&&e!==i)return null}return!1}function wr(n,t,e,i){const s=t._rootScopes,o=ja(t._fallback,e,i),a=[...n,...s],c=new Set;c.add(i);let h=Mo(c,a,e,o||e,i);return h===null||typeof o<"u"&&o!==e&&(h=Mo(c,a,o,h,i),h===null)?!1:_r(Array.from(c),[""],s,o,()=>pu(t,e,i))}function Mo(n,t,e,i,s){for(;e;)e=du(n,t,e,i,s);return e}function pu(n,t,e){const i=n._getTarget();t in i||(i[t]={});const s=i[t];return Ct(s)&&pt(e)?e:s||{}}function gu(n,t,e,i){let s;for(const o of t)if(s=Na(lu(o,n),e),typeof s<"u")return xr(n,s)?wr(e,i,n,s):s}function Na(n,t){for(const e of t){if(!e)continue;const i=e[n];if(typeof i<"u")return i}}function Do(n){let t=n._keys;return t||(t=n._keys=mu(n._scopes)),t}function mu(n){const t=new Set;for(const e of n)for(const i of Object.keys(e).filter(s=>!s.startsWith("_")))t.add(i);return Array.from(t)}const yu=Number.EPSILON||1e-14,pn=(n,t)=>t<n.length&&!n[t].skip&&n[t],Ha=n=>n==="x"?"y":"x";function bu(n,t,e,i){const s=n.skip?t:n,o=t,a=e.skip?t:e,c=tr(o,s),h=tr(a,o);let d=c/(c+h),g=h/(c+h);d=isNaN(d)?0:d,g=isNaN(g)?0:g;const b=i*d,v=i*g;return{previous:{x:o.x-b*(a.x-s.x),y:o.y-b*(a.y-s.y)},next:{x:o.x+v*(a.x-s.x),y:o.y+v*(a.y-s.y)}}}function vu(n,t,e){const i=n.length;let s,o,a,c,h,d=pn(n,0);for(let g=0;g<i-1;++g)if(h=d,d=pn(n,g+1),!(!h||!d)){if(Hn(t[g],0,yu)){e[g]=e[g+1]=0;continue}s=e[g]/t[g],o=e[g+1]/t[g],c=Math.pow(s,2)+Math.pow(o,2),!(c<=9)&&(a=3/Math.sqrt(c),e[g]=s*a*t[g],e[g+1]=o*a*t[g])}}function _u(n,t,e="x"){const i=Ha(e),s=n.length;let o,a,c,h=pn(n,0);for(let d=0;d<s;++d){if(a=c,c=h,h=pn(n,d+1),!c)continue;const g=c[e],b=c[i];a&&(o=(g-a[e])/3,c[`cp1${e}`]=g-o,c[`cp1${i}`]=b-o*t[d]),h&&(o=(h[e]-g)/3,c[`cp2${e}`]=g+o,c[`cp2${i}`]=b+o*t[d])}}function xu(n,t="x"){const e=Ha(t),i=n.length,s=Array(i).fill(0),o=Array(i);let a,c,h,d=pn(n,0);for(a=0;a<i;++a)if(c=h,h=d,d=pn(n,a+1),!!h){if(d){const g=d[t]-h[t];s[a]=g!==0?(d[e]-h[e])/g:0}o[a]=c?d?fn(s[a-1])!==fn(s[a])?0:(s[a-1]+s[a])/2:s[a-1]:s[a]}vu(n,s,o),_u(n,o,t)}function Ei(n,t,e){return Math.max(Math.min(n,e),t)}function wu(n,t){let e,i,s,o,a,c=Xn(n[0],t);for(e=0,i=n.length;e<i;++e)a=o,o=c,c=e<i-1&&Xn(n[e+1],t),o&&(s=n[e],a&&(s.cp1x=Ei(s.cp1x,t.left,t.right),s.cp1y=Ei(s.cp1y,t.top,t.bottom)),c&&(s.cp2x=Ei(s.cp2x,t.left,t.right),s.cp2y=Ei(s.cp2y,t.top,t.bottom)))}function ku(n,t,e,i,s){let o,a,c,h;if(t.spanGaps&&(n=n.filter(d=>!d.skip)),t.cubicInterpolationMode==="monotone")xu(n,s);else{let d=i?n[n.length-1]:n[0];for(o=0,a=n.length;o<a;++o)c=n[o],h=bu(d,c,n[Math.min(o+1,a-(i?0:1))%a],t.tension),c.cp1x=h.previous.x,c.cp1y=h.previous.y,c.cp2x=h.next.x,c.cp2y=h.next.y,d=c}t.capBezierPoints&&wu(n,e)}function kr(){return typeof window<"u"&&typeof document<"u"}function Sr(n){let t=n.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function Gi(n,t,e){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*t.parentNode[e])):i=n,i}const ts=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function Su(n,t){return ts(n).getPropertyValue(t)}const Pu=["top","right","bottom","left"];function Qe(n,t,e){const i={};e=e?"-"+e:"";for(let s=0;s<4;s++){const o=Pu[s];i[o]=parseFloat(n[t+"-"+o+e])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const Ou=(n,t,e)=>(n>0||t>0)&&(!e||!e.shadowRoot);function Mu(n,t){const e=n.touches,i=e&&e.length?e[0]:n,{offsetX:s,offsetY:o}=i;let a=!1,c,h;if(Ou(s,o,n.target))c=s,h=o;else{const d=t.getBoundingClientRect();c=i.clientX-d.left,h=i.clientY-d.top,a=!0}return{x:c,y:h,box:a}}function Ue(n,t){if("native"in n)return n;const{canvas:e,currentDevicePixelRatio:i}=t,s=ts(e),o=s.boxSizing==="border-box",a=Qe(s,"padding"),c=Qe(s,"border","width"),{x:h,y:d,box:g}=Mu(n,e),b=a.left+(g&&c.left),v=a.top+(g&&c.top);let{width:w,height:I}=t;return o&&(w-=a.width+c.width,I-=a.height+c.height),{x:Math.round((h-b)/w*e.width/i),y:Math.round((d-v)/I*e.height/i)}}function Du(n,t,e){let i,s;if(t===void 0||e===void 0){const o=n&&Sr(n);if(!o)t=n.clientWidth,e=n.clientHeight;else{const a=o.getBoundingClientRect(),c=ts(o),h=Qe(c,"border","width"),d=Qe(c,"padding");t=a.width-d.width-h.width,e=a.height-d.height-h.height,i=Gi(c.maxWidth,o,"clientWidth"),s=Gi(c.maxHeight,o,"clientHeight")}}return{width:t,height:e,maxWidth:i||Xi,maxHeight:s||Xi}}const Ae=n=>Math.round(n*10)/10;function Cu(n,t,e,i){const s=ts(n),o=Qe(s,"margin"),a=Gi(s.maxWidth,n,"clientWidth")||Xi,c=Gi(s.maxHeight,n,"clientHeight")||Xi,h=Du(n,t,e);let{width:d,height:g}=h;if(s.boxSizing==="content-box"){const v=Qe(s,"border","width"),w=Qe(s,"padding");d-=w.width+v.width,g-=w.height+v.height}return d=Math.max(0,d-o.width),g=Math.max(0,i?d/i:g-o.height),d=Ae(Math.min(d,a,h.maxWidth)),g=Ae(Math.min(g,c,h.maxHeight)),d&&!g&&(g=Ae(d/2)),(t!==void 0||e!==void 0)&&i&&h.height&&g>h.height&&(g=h.height,d=Ae(Math.floor(g*i))),{width:d,height:g}}function Co(n,t,e){const i=t||1,s=Ae(n.height*i),o=Ae(n.width*i);n.height=Ae(n.height),n.width=Ae(n.width);const a=n.canvas;return a.style&&(e||!a.style.height&&!a.style.width)&&(a.style.height=`${n.height}px`,a.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||a.height!==s||a.width!==o?(n.currentDevicePixelRatio=i,a.height=s,a.width=o,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}const Au=function(){let n=!1;try{const t={get passive(){return n=!0,!1}};kr()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return n}();function Ao(n,t){const e=Su(n,t),i=e&&e.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function Ye(n,t,e,i){return{x:n.x+e*(t.x-n.x),y:n.y+e*(t.y-n.y)}}function Tu(n,t,e,i){return{x:n.x+e*(t.x-n.x),y:i==="middle"?e<.5?n.y:t.y:i==="after"?e<1?n.y:t.y:e>0?t.y:n.y}}function Eu(n,t,e,i){const s={x:n.cp2x,y:n.cp2y},o={x:t.cp1x,y:t.cp1y},a=Ye(n,s,e),c=Ye(s,o,e),h=Ye(o,t,e),d=Ye(a,c,e),g=Ye(c,h,e);return Ye(d,g,e)}const Iu=function(n,t){return{x(e){return n+n+t-e},setWidth(e){t=e},textAlign(e){return e==="center"?e:e==="right"?"left":"right"},xPlus(e,i){return e-i},leftForLtr(e,i){return e-i}}},Ru=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,t){return n+t},leftForLtr(n,t){return n}}};function hn(n,t,e){return n?Iu(t,e):Ru()}function Wa(n,t){let e,i;(t==="ltr"||t==="rtl")&&(e=n.canvas.style,i=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),n.prevTextDirection=i)}function Ka(n,t){t!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",t[0],t[1]))}function Va(n){return n==="angle"?{between:Ca,compare:Tc,normalize:De}:{between:Bn,compare:(t,e)=>t-e,normalize:t=>t}}function To({start:n,end:t,count:e,loop:i,style:s}){return{start:n%e,end:t%e,loop:i&&(t-n+1)%e===0,style:s}}function Lu(n,t,e){const{property:i,start:s,end:o}=e,{between:a,normalize:c}=Va(i),h=t.length;let{start:d,end:g,loop:b}=n,v,w;if(b){for(d+=h,g+=h,v=0,w=h;v<w&&a(c(t[d%h][i]),s,o);++v)d--,g--;d%=h,g%=h}return g<d&&(g+=h),{start:d,end:g,loop:b,style:n.style}}function Bu(n,t,e){if(!e)return[n];const{property:i,start:s,end:o}=e,a=t.length,{compare:c,between:h,normalize:d}=Va(i),{start:g,end:b,loop:v,style:w}=Lu(n,t,e),I=[];let T=!1,R=null,z,U,J;const G=()=>h(s,J,z)&&c(s,J)!==0,K=()=>c(o,z)===0||h(o,J,z),Q=()=>T||G(),Y=()=>!T||K();for(let Z=g,it=g;Z<=b;++Z)U=t[Z%a],!U.skip&&(z=d(U[i]),z!==J&&(T=h(z,s,o),R===null&&Q()&&(R=c(z,s)===0?Z:it),R!==null&&Y()&&(I.push(To({start:R,end:Z,loop:v,count:a,style:w})),R=null),it=Z,J=z));return R!==null&&I.push(To({start:R,end:b,loop:v,count:a,style:w})),I}function Fu(n,t){const e=[],i=n.segments;for(let s=0;s<i.length;s++){const o=Bu(i[s],n.points,t);o.length&&e.push(...o)}return e}function zu(n,t,e,i){let s=0,o=t-1;if(e&&!i)for(;s<t&&!n[s].skip;)s++;for(;s<t&&n[s].skip;)s++;for(s%=t,e&&(o+=s);o>s&&n[o%t].skip;)o--;return o%=t,{start:s,end:o}}function ju(n,t,e,i){const s=n.length,o=[];let a=t,c=n[t],h;for(h=t+1;h<=e;++h){const d=n[h%s];d.skip||d.stop?c.skip||(i=!1,o.push({start:t%s,end:(h-1)%s,loop:i}),t=a=d.stop?h:null):(a=h,c.skip&&(t=h)),c=d}return a!==null&&o.push({start:t%s,end:a%s,loop:i}),o}function Nu(n,t){const e=n.points,i=n.options.spanGaps,s=e.length;if(!s)return[];const o=!!n._loop,{start:a,end:c}=zu(e,s,o,i);if(i===!0)return Eo(n,[{start:a,end:c,loop:o}],e,t);const h=c<a?c+s:c,d=!!n._fullLoop&&a===0&&c===s-1;return Eo(n,ju(e,a,h,d),e,t)}function Eo(n,t,e,i){return!i||!i.setContext||!e?t:Hu(n,t,e,i)}function Hu(n,t,e,i){const s=n._chart.getContext(),o=Io(n.options),{_datasetIndex:a,options:{spanGaps:c}}=n,h=e.length,d=[];let g=o,b=t[0].start,v=b;function w(I,T,R,z){const U=c?-1:1;if(I!==T){for(I+=h;e[I%h].skip;)I-=U;for(;e[T%h].skip;)T+=U;I%h!==T%h&&(d.push({start:I%h,end:T%h,loop:R,style:z}),g=z,b=T%h)}}for(const I of t){b=c?b:I.start;let T=e[b%h],R;for(v=b+1;v<=I.end;v++){const z=e[v%h];R=Io(i.setContext(Je(s,{type:"segment",p0:T,p1:z,p0DataIndex:(v-1)%h,p1DataIndex:v%h,datasetIndex:a}))),Wu(R,g)&&w(b,v-1,I.loop,g),T=z,g=R}b<v-1&&w(b,v-1,I.loop,g)}return d}function Io(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function Wu(n,t){if(!t)return!1;const e=[],i=function(s,o){return yr(o)?(e.includes(o)||e.push(o),e.indexOf(o)):o};return JSON.stringify(n,i)!==JSON.stringify(t,i)}function Ii(n,t,e){return n.options.clip?n[e]:t[e]}function Ku(n,t){const{xScale:e,yScale:i}=n;return e&&i?{left:Ii(e,t,"left"),right:Ii(e,t,"right"),top:Ii(i,t,"top"),bottom:Ii(i,t,"bottom")}:t}function Vu(n,t){const e=t._clip;if(e.disabled)return!1;const i=Ku(t,n.chartArea);return{left:e.left===!1?0:i.left-(e.left===!0?0:e.left),right:e.right===!1?n.width:i.right+(e.right===!0?0:e.right),top:e.top===!1?0:i.top-(e.top===!0?0:e.top),bottom:e.bottom===!1?n.height:i.bottom+(e.bottom===!0?0:e.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class qu{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,i,s){const o=e.listeners[s],a=e.duration;o.forEach(c=>c({chart:t,initial:e.initial,numSteps:a,currentStep:Math.min(i-e.start,a)}))}_refresh(){this._request||(this._running=!0,this._request=Ta.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((i,s)=>{if(!i.running||!i.items.length)return;const o=i.items;let a=o.length-1,c=!1,h;for(;a>=0;--a)h=o[a],h._active?(h._total>i.duration&&(i.duration=h._total),h.tick(t),c=!0):(o[a]=o[o.length-1],o.pop());c&&(s.draw(),this._notify(s,i,t,"progress")),o.length||(i.running=!1,this._notify(s,i,t,"complete"),i.initial=!1),e+=o.length}),this._lastDate=t,e===0&&(this._running=!1)}_getAnims(t){const e=this._charts;let i=e.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,i)),i}listen(t,e,i){this._getAnims(t).listeners[e].push(i)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((i,s)=>Math.max(i,s._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const i=e.items;let s=i.length-1;for(;s>=0;--s)i[s].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var pe=new qu;const Ro="transparent",$u={boolean(n,t,e){return e>.5?t:n},color(n,t,e){const i=ko(n||Ro),s=i.valid&&ko(t||Ro);return s&&s.valid?s.mix(i,e).hexString():t},number(n,t,e){return n+(t-n)*e}};class Uu{constructor(t,e,i,s){const o=e[i];s=Ti([t.to,s,o,t.from]);const a=Ti([t.from,o,s]);this._active=!0,this._fn=t.fn||$u[t.type||typeof a],this._easing=Wn[t.easing]||Wn.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=i,this._from=a,this._to=s,this._promises=void 0}active(){return this._active}update(t,e,i){if(this._active){this._notify(!1);const s=this._target[this._prop],o=i-this._start,a=this._duration-o;this._start=i,this._duration=Math.floor(Math.max(a,t.duration)),this._total+=o,this._loop=!!t.loop,this._to=Ti([t.to,e,s,t.from]),this._from=Ti([t.from,s,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,i=this._duration,s=this._prop,o=this._from,a=this._loop,c=this._to;let h;if(this._active=o!==c&&(a||e<i),!this._active){this._target[s]=c,this._notify(!0);return}if(e<0){this._target[s]=o;return}h=e/i%2,h=a&&h>1?2-h:h,h=this._easing(Math.min(1,Math.max(0,h))),this._target[s]=this._fn(o,c,h)}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,i)=>{t.push({res:e,rej:i})})}_notify(t){const e=t?"res":"rej",i=this._promises||[];for(let s=0;s<i.length;s++)i[s][e]()}}class qa{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!pt(t))return;const e=Object.keys(Ot.animation),i=this._properties;Object.getOwnPropertyNames(t).forEach(s=>{const o=t[s];if(!pt(o))return;const a={};for(const c of e)a[c]=o[c];(Ct(o.properties)&&o.properties||[s]).forEach(c=>{(c===s||!i.has(c))&&i.set(c,a)})})}_animateOptions(t,e){const i=e.options,s=Xu(t,i);if(!s)return[];const o=this._createAnimations(s,i);return i.$shared&&Yu(t.options.$animations,i).then(()=>{t.options=i},()=>{}),o}_createAnimations(t,e){const i=this._properties,s=[],o=t.$animations||(t.$animations={}),a=Object.keys(e),c=Date.now();let h;for(h=a.length-1;h>=0;--h){const d=a[h];if(d.charAt(0)==="$")continue;if(d==="options"){s.push(...this._animateOptions(t,e));continue}const g=e[d];let b=o[d];const v=i.get(d);if(b)if(v&&b.active()){b.update(v,g,c);continue}else b.cancel();if(!v||!v.duration){t[d]=g;continue}o[d]=b=new Uu(v,t,d,g),s.push(b)}return s}update(t,e){if(this._properties.size===0){Object.assign(t,e);return}const i=this._createAnimations(t,e);if(i.length)return pe.add(this._chart,i),!0}}function Yu(n,t){const e=[],i=Object.keys(t);for(let s=0;s<i.length;s++){const o=n[i[s]];o&&o.active()&&e.push(o.wait())}return Promise.all(e)}function Xu(n,t){if(!t)return;let e=n.options;if(!e){n.options=t;return}return e.$shared&&(n.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function Lo(n,t){const e=n&&n.options||{},i=e.reverse,s=e.min===void 0?t:0,o=e.max===void 0?t:0;return{start:i?o:s,end:i?s:o}}function Gu(n,t,e){if(e===!1)return!1;const i=Lo(n,e),s=Lo(t,e);return{top:s.end,right:i.end,bottom:s.start,left:i.start}}function Qu(n){let t,e,i,s;return pt(n)?(t=n.top,e=n.right,i=n.bottom,s=n.left):t=e=i=s=n,{top:t,right:e,bottom:i,left:s,disabled:n===!1}}function $a(n,t){const e=[],i=n._getSortedDatasetMetas(t);let s,o;for(s=0,o=i.length;s<o;++s)e.push(i[s].index);return e}function Bo(n,t,e,i={}){const s=n.keys,o=i.mode==="single";let a,c,h,d;if(t===null)return;let g=!1;for(a=0,c=s.length;a<c;++a){if(h=+s[a],h===e){if(g=!0,i.all)continue;break}d=n.values[h],Qt(d)&&(o||t===0||fn(t)===fn(d))&&(t+=d)}return!g&&!i.all?0:t}function Zu(n,t){const{iScale:e,vScale:i}=t,s=e.axis==="x"?"x":"y",o=i.axis==="x"?"x":"y",a=Object.keys(n),c=new Array(a.length);let h,d,g;for(h=0,d=a.length;h<d;++h)g=a[h],c[h]={[s]:g,[o]:n[g]};return c}function Vs(n,t){const e=n&&n.options.stacked;return e||e===void 0&&t.stack!==void 0}function Ju(n,t,e){return`${n.id}.${t.id}.${e.stack||e.type}`}function th(n){const{min:t,max:e,minDefined:i,maxDefined:s}=n.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:s?e:Number.POSITIVE_INFINITY}}function eh(n,t,e){const i=n[t]||(n[t]={});return i[e]||(i[e]={})}function Fo(n,t,e,i){for(const s of t.getMatchingVisibleMetas(i).reverse()){const o=n[s.index];if(e&&o>0||!e&&o<0)return s.index}return null}function zo(n,t){const{chart:e,_cachedMeta:i}=n,s=e._stacks||(e._stacks={}),{iScale:o,vScale:a,index:c}=i,h=o.axis,d=a.axis,g=Ju(o,a,i),b=t.length;let v;for(let w=0;w<b;++w){const I=t[w],{[h]:T,[d]:R}=I,z=I._stacks||(I._stacks={});v=z[d]=eh(s,g,T),v[c]=R,v._top=Fo(v,a,!0,i.type),v._bottom=Fo(v,a,!1,i.type);const U=v._visualValues||(v._visualValues={});U[c]=R}}function qs(n,t){const e=n.scales;return Object.keys(e).filter(i=>e[i].axis===t).shift()}function nh(n,t){return Je(n,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function ih(n,t,e){return Je(n,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}function An(n,t){const e=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){t=t||n._parsed;for(const s of t){const o=s._stacks;if(!o||o[i]===void 0||o[i][e]===void 0)return;delete o[i][e],o[i]._visualValues!==void 0&&o[i]._visualValues[e]!==void 0&&delete o[i]._visualValues[e]}}}const $s=n=>n==="reset"||n==="none",jo=(n,t)=>t?n:Object.assign({},n),sh=(n,t,e)=>n&&!t.hidden&&t._stacked&&{keys:$a(e,!0),values:null};class qn{constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=Vs(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&An(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,i=this.getDataset(),s=(b,v,w,I)=>b==="x"?v:b==="r"?I:w,o=e.xAxisID=ht(i.xAxisID,qs(t,"x")),a=e.yAxisID=ht(i.yAxisID,qs(t,"y")),c=e.rAxisID=ht(i.rAxisID,qs(t,"r")),h=e.indexAxis,d=e.iAxisID=s(h,o,a,c),g=e.vAxisID=s(h,a,o,c);e.xScale=this.getScaleForId(o),e.yScale=this.getScaleForId(a),e.rScale=this.getScaleForId(c),e.iScale=this.getScaleForId(d),e.vScale=this.getScaleForId(g)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&_o(this._data,this),t._stacked&&An(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),i=this._data;if(pt(e)){const s=this._cachedMeta;this._data=Zu(e,s)}else if(i!==e){if(i){_o(i,this);const s=this._cachedMeta;An(s),s._parsed=[]}e&&Object.isExtensible(e)&&Lc(e,this),this._syncList=[],this._data=e}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,i=this.getDataset();let s=!1;this._dataCheck();const o=e._stacked;e._stacked=Vs(e.vScale,e),e.stack!==i.stack&&(s=!0,An(e),e.stack=i.stack),this._resyncElements(t),(s||o!==e._stacked)&&(zo(this,e._parsed),e._stacked=Vs(e.vScale,e))}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:i,_data:s}=this,{iScale:o,_stacked:a}=i,c=o.axis;let h=t===0&&e===s.length?!0:i._sorted,d=t>0&&i._parsed[t-1],g,b,v;if(this._parsing===!1)i._parsed=s,i._sorted=!0,v=s;else{Ct(s[t])?v=this.parseArrayData(i,s,t,e):pt(s[t])?v=this.parseObjectData(i,s,t,e):v=this.parsePrimitiveData(i,s,t,e);const w=()=>b[c]===null||d&&b[c]<d[c];for(g=0;g<e;++g)i._parsed[g+t]=b=v[g],h&&(w()&&(h=!1),d=b);i._sorted=h}a&&zo(this,v)}parsePrimitiveData(t,e,i,s){const{iScale:o,vScale:a}=t,c=o.axis,h=a.axis,d=o.getLabels(),g=o===a,b=new Array(s);let v,w,I;for(v=0,w=s;v<w;++v)I=v+i,b[v]={[c]:g||o.parse(d[I],I),[h]:a.parse(e[I],I)};return b}parseArrayData(t,e,i,s){const{xScale:o,yScale:a}=t,c=new Array(s);let h,d,g,b;for(h=0,d=s;h<d;++h)g=h+i,b=e[g],c[h]={x:o.parse(b[0],g),y:a.parse(b[1],g)};return c}parseObjectData(t,e,i,s){const{xScale:o,yScale:a}=t,{xAxisKey:c="x",yAxisKey:h="y"}=this._parsing,d=new Array(s);let g,b,v,w;for(g=0,b=s;g<b;++g)v=g+i,w=e[v],d[g]={x:o.parse(Ui(w,c),v),y:a.parse(Ui(w,h),v)};return d}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,i){const s=this.chart,o=this._cachedMeta,a=e[t.axis],c={keys:$a(s,!0),values:e._stacks[t.axis]._visualValues};return Bo(c,a,o.index,{mode:i})}updateRangeFromParsed(t,e,i,s){const o=i[e.axis];let a=o===null?NaN:o;const c=s&&i._stacks[e.axis];s&&c&&(s.values=c,a=Bo(s,o,this._cachedMeta.index)),t.min=Math.min(t.min,a),t.max=Math.max(t.max,a)}getMinMax(t,e){const i=this._cachedMeta,s=i._parsed,o=i._sorted&&t===i.iScale,a=s.length,c=this._getOtherScale(t),h=sh(e,i,this.chart),d={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:g,max:b}=th(c);let v,w;function I(){w=s[v];const T=w[c.axis];return!Qt(w[t.axis])||g>T||b<T}for(v=0;v<a&&!(!I()&&(this.updateRangeFromParsed(d,t,w,h),o));++v);if(o){for(v=a-1;v>=0;--v)if(!I()){this.updateRangeFromParsed(d,t,w,h);break}}return d}getAllParsedValues(t){const e=this._cachedMeta._parsed,i=[];let s,o,a;for(s=0,o=e.length;s<o;++s)a=e[s][t.axis],Qt(a)&&i.push(a);return i}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,i=e.iScale,s=e.vScale,o=this.getParsed(t);return{label:i?""+i.getLabelForValue(o[i.axis]):"",value:s?""+s.getLabelForValue(o[s.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=Qu(ht(this.options.clip,Gu(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,i=this._cachedMeta,s=i.data||[],o=e.chartArea,a=[],c=this._drawStart||0,h=this._drawCount||s.length-c,d=this.options.drawActiveElementsOnTop;let g;for(i.dataset&&i.dataset.draw(t,o,c,h),g=c;g<c+h;++g){const b=s[g];b.hidden||(b.active&&d?a.push(b):b.draw(t,o))}for(g=0;g<a.length;++g)a[g].draw(t,o)}getStyle(t,e){const i=e?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,e,i){const s=this.getDataset();let o;if(t>=0&&t<this._cachedMeta.data.length){const a=this._cachedMeta.data[t];o=a.$context||(a.$context=ih(this.getContext(),t,a)),o.parsed=this.getParsed(t),o.raw=s.data[t],o.index=o.dataIndex=t}else o=this.$context||(this.$context=nh(this.chart.getContext(),this.index)),o.dataset=s,o.index=o.datasetIndex=this.index;return o.active=!!e,o.mode=i,o}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",i){const s=e==="active",o=this._cachedDataOpts,a=t+"-"+e,c=o[a],h=this.enableOptionSharing&&Yi(i);if(c)return jo(c,h);const d=this.chart.config,g=d.datasetElementScopeKeys(this._type,t),b=s?[`${t}Hover`,"hover",t,""]:[t,""],v=d.getOptionScopes(this.getDataset(),g),w=Object.keys(Ot.elements[t]),I=()=>this.getContext(i,s,e),T=d.resolveNamedOptions(v,w,I,b);return T.$shared&&(T.$shared=h,o[a]=Object.freeze(jo(T,h))),T}_resolveAnimations(t,e,i){const s=this.chart,o=this._cachedDataOpts,a=`animation-${e}`,c=o[a];if(c)return c;let h;if(s.options.animation!==!1){const g=this.chart.config,b=g.datasetAnimationScopeKeys(this._type,e),v=g.getOptionScopes(this.getDataset(),b);h=g.createResolver(v,this.getContext(t,i,e))}const d=new qa(s,h&&h.animations);return h&&h._cacheable&&(o[a]=Object.freeze(d)),d}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||$s(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const i=this.resolveDataElementOptions(t,e),s=this._sharedOptions,o=this.getSharedOptions(i),a=this.includeOptions(e,o)||o!==s;return this.updateSharedOptions(o,e,i),{sharedOptions:o,includeOptions:a}}updateElement(t,e,i,s){$s(s)?Object.assign(t,i):this._resolveAnimations(e,s).update(t,i)}updateSharedOptions(t,e,i){t&&!$s(e)&&this._resolveAnimations(void 0,e).update(t,i)}_setStyle(t,e,i,s){t.active=s;const o=this.getStyle(e,s);this._resolveAnimations(e,i,s).update(t,{options:!s&&this.getSharedOptions(o)||o})}removeHoverStyle(t,e,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,e,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,i=this._cachedMeta.data;for(const[c,h,d]of this._syncList)this[c](h,d);this._syncList=[];const s=i.length,o=e.length,a=Math.min(o,s);a&&this.parse(0,a),o>s?this._insertElements(s,o-s,t):o<s&&this._removeElements(o,s-o)}_insertElements(t,e,i=!0){const s=this._cachedMeta,o=s.data,a=t+e;let c;const h=d=>{for(d.length+=e,c=d.length-1;c>=a;c--)d[c]=d[c-e]};for(h(o),c=t;c<a;++c)o[c]=new this.dataElementType;this._parsing&&h(s._parsed),this.parse(t,e),i&&this.updateElements(o,t,e,"reset")}updateElements(t,e,i,s){}_removeElements(t,e){const i=this._cachedMeta;if(this._parsing){const s=i._parsed.splice(t,e);i._stacked&&An(i,s)}i.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,i,s]=t;this[e](i,s)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}ot(qn,"defaults",{}),ot(qn,"datasetElementType",null),ot(qn,"dataElementType",null);class Ni extends qn{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:i,data:s=[],_dataset:o}=e,a=this.chart._animationsDisabled;let{start:c,count:h}=jc(e,s,a);this._drawStart=c,this._drawCount=h,Nc(e)&&(c=0,h=s.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!o._decimated,i.points=s;const d=this.resolveDatasetElementOptions(t);this.options.showLine||(d.borderWidth=0),d.segment=this.options.segment,this.updateElement(i,void 0,{animated:!a,options:d},t),this.updateElements(s,c,h,t)}updateElements(t,e,i,s){const o=s==="reset",{iScale:a,vScale:c,_stacked:h,_dataset:d}=this._cachedMeta,{sharedOptions:g,includeOptions:b}=this._getSharedOptions(e,s),v=a.axis,w=c.axis,{spanGaps:I,segment:T}=this.options,R=Yn(I)?I:Number.POSITIVE_INFINITY,z=this.chart._animationsDisabled||o||s==="none",U=e+i,J=t.length;let G=e>0&&this.getParsed(e-1);for(let K=0;K<J;++K){const Q=t[K],Y=z?Q:{};if(K<e||K>=U){Y.skip=!0;continue}const Z=this.getParsed(K),it=bt(Z[w]),ft=Y[v]=a.getPixelForValue(Z[v],K),at=Y[w]=o||it?c.getBasePixel():c.getPixelForValue(h?this.applyStack(c,Z,h):Z[w],K);Y.skip=isNaN(ft)||isNaN(at)||it,Y.stop=K>0&&Math.abs(Z[v]-G[v])>R,T&&(Y.parsed=Z,Y.raw=d.data[K]),b&&(Y.options=g||this.resolveDataElementOptions(K,Q.active?"active":s)),z||this.updateElement(Q,K,Y,s),G=Z}}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,i=e.options&&e.options.borderWidth||0,s=t.data||[];if(!s.length)return i;const o=s[0].size(this.resolveDataElementOptions(0)),a=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(i,o,a)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}ot(Ni,"id","line"),ot(Ni,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),ot(Ni,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function $e(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Pr{constructor(t){ot(this,"options");this.options=t||{}}static override(t){Object.assign(Pr.prototype,t)}init(){}formats(){return $e()}parse(){return $e()}format(){return $e()}add(){return $e()}diff(){return $e()}startOf(){return $e()}endOf(){return $e()}}var rh={_date:Pr};function oh(n,t,e,i){const{controller:s,data:o,_sorted:a}=n,c=s._cachedMeta.iScale,h=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(c&&t===c.axis&&t!=="r"&&a&&o.length){const d=c._reversePixels?Ic:Ge;if(i){if(s._sharedOptions){const g=o[0],b=typeof g.getRange=="function"&&g.getRange(t);if(b){const v=d(o,t,e-b),w=d(o,t,e+b);return{lo:v.lo,hi:w.hi}}}}else{const g=d(o,t,e);if(h){const{vScale:b}=s._cachedMeta,{_parsed:v}=n,w=v.slice(0,g.lo+1).reverse().findIndex(T=>!bt(T[b.axis]));g.lo-=Math.max(0,w);const I=v.slice(g.hi).findIndex(T=>!bt(T[b.axis]));g.hi+=Math.max(0,I)}return g}}return{lo:0,hi:o.length-1}}function es(n,t,e,i,s){const o=n.getSortedVisibleDatasetMetas(),a=e[t];for(let c=0,h=o.length;c<h;++c){const{index:d,data:g}=o[c],{lo:b,hi:v}=oh(o[c],t,a,s);for(let w=b;w<=v;++w){const I=g[w];I.skip||i(I,d,w)}}}function ah(n){const t=n.indexOf("x")!==-1,e=n.indexOf("y")!==-1;return function(i,s){const o=t?Math.abs(i.x-s.x):0,a=e?Math.abs(i.y-s.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(a,2))}}function Us(n,t,e,i,s){const o=[];return!s&&!n.isPointInArea(t)||es(n,e,t,function(c,h,d){!s&&!Xn(c,n.chartArea,0)||c.inRange(t.x,t.y,i)&&o.push({element:c,datasetIndex:h,index:d})},!0),o}function lh(n,t,e,i){let s=[];function o(a,c,h){const{startAngle:d,endAngle:g}=a.getProps(["startAngle","endAngle"],i),{angle:b}=Ac(a,{x:t.x,y:t.y});Ca(b,d,g)&&s.push({element:a,datasetIndex:c,index:h})}return es(n,e,t,o),s}function ch(n,t,e,i,s,o){let a=[];const c=ah(e);let h=Number.POSITIVE_INFINITY;function d(g,b,v){const w=g.inRange(t.x,t.y,s);if(i&&!w)return;const I=g.getCenterPoint(s);if(!(!!o||n.isPointInArea(I))&&!w)return;const R=c(t,I);R<h?(a=[{element:g,datasetIndex:b,index:v}],h=R):R===h&&a.push({element:g,datasetIndex:b,index:v})}return es(n,e,t,d),a}function Ys(n,t,e,i,s,o){return!o&&!n.isPointInArea(t)?[]:e==="r"&&!i?lh(n,t,e,s):ch(n,t,e,i,s,o)}function No(n,t,e,i,s){const o=[],a=e==="x"?"inXRange":"inYRange";let c=!1;return es(n,e,t,(h,d,g)=>{h[a]&&h[a](t[e],s)&&(o.push({element:h,datasetIndex:d,index:g}),c=c||h.inRange(t.x,t.y,s))}),i&&!c?[]:o}var uh={modes:{index(n,t,e,i){const s=Ue(t,n),o=e.axis||"x",a=e.includeInvisible||!1,c=e.intersect?Us(n,s,o,i,a):Ys(n,s,o,!1,i,a),h=[];return c.length?(n.getSortedVisibleDatasetMetas().forEach(d=>{const g=c[0].index,b=d.data[g];b&&!b.skip&&h.push({element:b,datasetIndex:d.index,index:g})}),h):[]},dataset(n,t,e,i){const s=Ue(t,n),o=e.axis||"xy",a=e.includeInvisible||!1;let c=e.intersect?Us(n,s,o,i,a):Ys(n,s,o,!1,i,a);if(c.length>0){const h=c[0].datasetIndex,d=n.getDatasetMeta(h).data;c=[];for(let g=0;g<d.length;++g)c.push({element:d[g],datasetIndex:h,index:g})}return c},point(n,t,e,i){const s=Ue(t,n),o=e.axis||"xy",a=e.includeInvisible||!1;return Us(n,s,o,i,a)},nearest(n,t,e,i){const s=Ue(t,n),o=e.axis||"xy",a=e.includeInvisible||!1;return Ys(n,s,o,e.intersect,i,a)},x(n,t,e,i){const s=Ue(t,n);return No(n,s,"x",e.intersect,i)},y(n,t,e,i){const s=Ue(t,n);return No(n,s,"y",e.intersect,i)}}};const Ua=["left","top","right","bottom"];function Tn(n,t){return n.filter(e=>e.pos===t)}function Ho(n,t){return n.filter(e=>Ua.indexOf(e.pos)===-1&&e.box.axis===t)}function En(n,t){return n.sort((e,i)=>{const s=t?i:e,o=t?e:i;return s.weight===o.weight?s.index-o.index:s.weight-o.weight})}function hh(n){const t=[];let e,i,s,o,a,c;for(e=0,i=(n||[]).length;e<i;++e)s=n[e],{position:o,options:{stack:a,stackWeight:c=1}}=s,t.push({index:e,box:s,pos:o,horizontal:s.isHorizontal(),weight:s.weight,stack:a&&o+a,stackWeight:c});return t}function fh(n){const t={};for(const e of n){const{stack:i,pos:s,stackWeight:o}=e;if(!i||!Ua.includes(s))continue;const a=t[i]||(t[i]={count:0,placed:0,weight:0,size:0});a.count++,a.weight+=o}return t}function dh(n,t){const e=fh(n),{vBoxMaxWidth:i,hBoxMaxHeight:s}=t;let o,a,c;for(o=0,a=n.length;o<a;++o){c=n[o];const{fullSize:h}=c.box,d=e[c.stack],g=d&&c.stackWeight/d.weight;c.horizontal?(c.width=g?g*i:h&&t.availableWidth,c.height=s):(c.width=i,c.height=g?g*s:h&&t.availableHeight)}return e}function ph(n){const t=hh(n),e=En(t.filter(d=>d.box.fullSize),!0),i=En(Tn(t,"left"),!0),s=En(Tn(t,"right")),o=En(Tn(t,"top"),!0),a=En(Tn(t,"bottom")),c=Ho(t,"x"),h=Ho(t,"y");return{fullSize:e,leftAndTop:i.concat(o),rightAndBottom:s.concat(h).concat(a).concat(c),chartArea:Tn(t,"chartArea"),vertical:i.concat(s).concat(h),horizontal:o.concat(a).concat(c)}}function Wo(n,t,e,i){return Math.max(n[e],t[e])+Math.max(n[i],t[i])}function Ya(n,t){n.top=Math.max(n.top,t.top),n.left=Math.max(n.left,t.left),n.bottom=Math.max(n.bottom,t.bottom),n.right=Math.max(n.right,t.right)}function gh(n,t,e,i){const{pos:s,box:o}=e,a=n.maxPadding;if(!pt(s)){e.size&&(n[s]-=e.size);const b=i[e.stack]||{size:0,count:1};b.size=Math.max(b.size,e.horizontal?o.height:o.width),e.size=b.size/b.count,n[s]+=e.size}o.getPadding&&Ya(a,o.getPadding());const c=Math.max(0,t.outerWidth-Wo(a,n,"left","right")),h=Math.max(0,t.outerHeight-Wo(a,n,"top","bottom")),d=c!==n.w,g=h!==n.h;return n.w=c,n.h=h,e.horizontal?{same:d,other:g}:{same:g,other:d}}function mh(n){const t=n.maxPadding;function e(i){const s=Math.max(t[i]-n[i],0);return n[i]+=s,s}n.y+=e("top"),n.x+=e("left"),e("right"),e("bottom")}function yh(n,t){const e=t.maxPadding;function i(s){const o={left:0,top:0,right:0,bottom:0};return s.forEach(a=>{o[a]=Math.max(t[a],e[a])}),o}return i(n?["left","right"]:["top","bottom"])}function Fn(n,t,e,i){const s=[];let o,a,c,h,d,g;for(o=0,a=n.length,d=0;o<a;++o){c=n[o],h=c.box,h.update(c.width||t.w,c.height||t.h,yh(c.horizontal,t));const{same:b,other:v}=gh(t,e,c,i);d|=b&&s.length,g=g||v,h.fullSize||s.push(c)}return d&&Fn(s,t,e,i)||g}function Ri(n,t,e,i,s){n.top=e,n.left=t,n.right=t+i,n.bottom=e+s,n.width=i,n.height=s}function Ko(n,t,e,i){const s=e.padding;let{x:o,y:a}=t;for(const c of n){const h=c.box,d=i[c.stack]||{placed:0,weight:1},g=c.stackWeight/d.weight||1;if(c.horizontal){const b=t.w*g,v=d.size||h.height;Yi(d.start)&&(a=d.start),h.fullSize?Ri(h,s.left,a,e.outerWidth-s.right-s.left,v):Ri(h,t.left+d.placed,a,b,v),d.start=a,d.placed+=b,a=h.bottom}else{const b=t.h*g,v=d.size||h.width;Yi(d.start)&&(o=d.start),h.fullSize?Ri(h,o,s.top,v,e.outerHeight-s.bottom-s.top):Ri(h,o,t.top+d.placed,v,b),d.start=o,d.placed+=b,o=h.right}}t.x=o,t.y=a}var Gt={addBox(n,t){n.boxes||(n.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},n.boxes.push(t)},removeBox(n,t){const e=n.boxes?n.boxes.indexOf(t):-1;e!==-1&&n.boxes.splice(e,1)},configure(n,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(n,t,e,i){if(!n)return;const s=Zt(n.options.layout.padding),o=Math.max(t-s.width,0),a=Math.max(e-s.height,0),c=ph(n.boxes),h=c.vertical,d=c.horizontal;gt(n.boxes,T=>{typeof T.beforeLayout=="function"&&T.beforeLayout()});const g=h.reduce((T,R)=>R.box.options&&R.box.options.display===!1?T:T+1,0)||1,b=Object.freeze({outerWidth:t,outerHeight:e,padding:s,availableWidth:o,availableHeight:a,vBoxMaxWidth:o/2/g,hBoxMaxHeight:a/2}),v=Object.assign({},s);Ya(v,Zt(i));const w=Object.assign({maxPadding:v,w:o,h:a,x:s.left,y:s.top},s),I=dh(h.concat(d),b);Fn(c.fullSize,w,b,I),Fn(h,w,b,I),Fn(d,w,b,I)&&Fn(h,w,b,I),mh(w),Ko(c.leftAndTop,w,b,I),w.x+=w.w,w.y+=w.h,Ko(c.rightAndBottom,w,b,I),n.chartArea={left:w.left,top:w.top,right:w.left+w.w,bottom:w.top+w.h,height:w.h,width:w.w},gt(c.chartArea,T=>{const R=T.box;Object.assign(R,n.chartArea),R.update(w.w,w.h,{left:0,top:0,right:0,bottom:0})})}};class Xa{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,i){}removeEventListener(t,e,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,i,s){return e=Math.max(0,e||t.width),i=i||t.height,{width:e,height:Math.max(0,s?Math.floor(e/s):i)}}isAttached(t){return!0}updateConfig(t){}}class bh extends Xa{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Hi="$chartjs",vh={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Vo=n=>n===null||n==="";function _h(n,t){const e=n.style,i=n.getAttribute("height"),s=n.getAttribute("width");if(n[Hi]={initial:{height:i,width:s,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",Vo(s)){const o=Ao(n,"width");o!==void 0&&(n.width=o)}if(Vo(i))if(n.style.height==="")n.height=n.width/(t||2);else{const o=Ao(n,"height");o!==void 0&&(n.height=o)}return n}const Ga=Au?{passive:!0}:!1;function xh(n,t,e){n&&n.addEventListener(t,e,Ga)}function wh(n,t,e){n&&n.canvas&&n.canvas.removeEventListener(t,e,Ga)}function kh(n,t){const e=vh[n.type]||n.type,{x:i,y:s}=Ue(n,t);return{type:e,chart:t,native:n,x:i!==void 0?i:null,y:s!==void 0?s:null}}function Qi(n,t){for(const e of n)if(e===t||e.contains(t))return!0}function Sh(n,t,e){const i=n.canvas,s=new MutationObserver(o=>{let a=!1;for(const c of o)a=a||Qi(c.addedNodes,i),a=a&&!Qi(c.removedNodes,i);a&&e()});return s.observe(document,{childList:!0,subtree:!0}),s}function Ph(n,t,e){const i=n.canvas,s=new MutationObserver(o=>{let a=!1;for(const c of o)a=a||Qi(c.removedNodes,i),a=a&&!Qi(c.addedNodes,i);a&&e()});return s.observe(document,{childList:!0,subtree:!0}),s}const Qn=new Map;let qo=0;function Qa(){const n=window.devicePixelRatio;n!==qo&&(qo=n,Qn.forEach((t,e)=>{e.currentDevicePixelRatio!==n&&t()}))}function Oh(n,t){Qn.size||window.addEventListener("resize",Qa),Qn.set(n,t)}function Mh(n){Qn.delete(n),Qn.size||window.removeEventListener("resize",Qa)}function Dh(n,t,e){const i=n.canvas,s=i&&Sr(i);if(!s)return;const o=Ea((c,h)=>{const d=s.clientWidth;e(c,h),d<s.clientWidth&&e()},window),a=new ResizeObserver(c=>{const h=c[0],d=h.contentRect.width,g=h.contentRect.height;d===0&&g===0||o(d,g)});return a.observe(s),Oh(n,o),a}function Xs(n,t,e){e&&e.disconnect(),t==="resize"&&Mh(n)}function Ch(n,t,e){const i=n.canvas,s=Ea(o=>{n.ctx!==null&&e(kh(o,n))},n);return xh(i,t,s),s}class Ah extends Xa{acquireContext(t,e){const i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(_h(t,e),i):null}releaseContext(t){const e=t.canvas;if(!e[Hi])return!1;const i=e[Hi].initial;["height","width"].forEach(o=>{const a=i[o];bt(a)?e.removeAttribute(o):e.setAttribute(o,a)});const s=i.style||{};return Object.keys(s).forEach(o=>{e.style[o]=s[o]}),e.width=e.width,delete e[Hi],!0}addEventListener(t,e,i){this.removeEventListener(t,e);const s=t.$proxies||(t.$proxies={}),a={attach:Sh,detach:Ph,resize:Dh}[e]||Ch;s[e]=a(t,e,i)}removeEventListener(t,e){const i=t.$proxies||(t.$proxies={}),s=i[e];if(!s)return;({attach:Xs,detach:Xs,resize:Xs}[e]||wh)(t,e,s),i[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,i,s){return Cu(t,e,i,s)}isAttached(t){const e=t&&Sr(t);return!!(e&&e.isConnected)}}function Th(n){return!kr()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?bh:Ah}class be{constructor(){ot(this,"x");ot(this,"y");ot(this,"active",!1);ot(this,"options");ot(this,"$animations")}tooltipPosition(t){const{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}hasValue(){return Yn(this.x)&&Yn(this.y)}getProps(t,e){const i=this.$animations;if(!e||!i)return this;const s={};return t.forEach(o=>{s[o]=i[o]&&i[o].active()?i[o]._to:this[o]}),s}}ot(be,"defaults",{}),ot(be,"defaultRoutes");function Eh(n,t){const e=n.options.ticks,i=Ih(n),s=Math.min(e.maxTicksLimit||i,i),o=e.major.enabled?Lh(t):[],a=o.length,c=o[0],h=o[a-1],d=[];if(a>s)return Bh(t,d,o,a/s),d;const g=Rh(o,t,s);if(a>0){let b,v;const w=a>1?Math.round((h-c)/(a-1)):null;for(Li(t,d,g,bt(w)?0:c-w,c),b=0,v=a-1;b<v;b++)Li(t,d,g,o[b],o[b+1]);return Li(t,d,g,h,bt(w)?t.length:h+w),d}return Li(t,d,g),d}function Ih(n){const t=n.options.offset,e=n._tickSize(),i=n._length/e+(t?0:1),s=n._maxLength/e;return Math.floor(Math.min(i,s))}function Rh(n,t,e){const i=Fh(n),s=t.length/e;if(!i)return Math.max(s,1);const o=Pc(i);for(let a=0,c=o.length-1;a<c;a++){const h=o[a];if(h>s)return h}return Math.max(s,1)}function Lh(n){const t=[];let e,i;for(e=0,i=n.length;e<i;e++)n[e].major&&t.push(e);return t}function Bh(n,t,e,i){let s=0,o=e[0],a;for(i=Math.ceil(i),a=0;a<n.length;a++)a===o&&(t.push(n[a]),s++,o=e[s*i])}function Li(n,t,e,i,s){const o=ht(i,0),a=Math.min(ht(s,n.length),n.length);let c=0,h,d,g;for(e=Math.ceil(e),s&&(h=s-i,e=h/Math.floor(h/e)),g=o;g<0;)c++,g=Math.round(o+c*e);for(d=Math.max(o,0);d<a;d++)d===g&&(t.push(n[d]),c++,g=Math.round(o+c*e))}function Fh(n){const t=n.length;let e,i;if(t<2)return!1;for(i=n[0],e=1;e<t;++e)if(n[e]-n[e-1]!==i)return!1;return i}const zh=n=>n==="left"?"right":n==="right"?"left":n,$o=(n,t,e)=>t==="top"||t==="left"?n[t]+e:n[t]-e,Uo=(n,t)=>Math.min(t||n,n);function Yo(n,t){const e=[],i=n.length/t,s=n.length;let o=0;for(;o<s;o+=i)e.push(n[Math.floor(o)]);return e}function jh(n,t,e){const i=n.ticks.length,s=Math.min(t,i-1),o=n._startPixel,a=n._endPixel,c=1e-6;let h=n.getPixelForTick(s),d;if(!(e&&(i===1?d=Math.max(h-o,a-h):t===0?d=(n.getPixelForTick(1)-h)/2:d=(h-n.getPixelForTick(s-1))/2,h+=s<t?d:-d,h<o-c||h>a+c)))return h}function Nh(n,t){gt(n,e=>{const i=e.gc,s=i.length/2;let o;if(s>t){for(o=0;o<s;++o)delete e.data[i[o]];i.splice(0,s)}})}function In(n){return n.drawTicks?n.tickLength:0}function Xo(n,t){if(!n.display)return 0;const e=Bt(n.font,t),i=Zt(n.padding);return(Ct(n.text)?n.text.length:1)*e.lineHeight+i.height}function Hh(n,t){return Je(n,{scale:t,type:"scale"})}function Wh(n,t,e){return Je(n,{tick:e,index:t,type:"tick"})}function Kh(n,t,e){let i=mr(n);return(e&&t!=="right"||!e&&t==="right")&&(i=zh(i)),i}function Vh(n,t,e,i){const{top:s,left:o,bottom:a,right:c,chart:h}=n,{chartArea:d,scales:g}=h;let b=0,v,w,I;const T=a-s,R=c-o;if(n.isHorizontal()){if(w=Lt(i,o,c),pt(e)){const z=Object.keys(e)[0],U=e[z];I=g[z].getPixelForValue(U)+T-t}else e==="center"?I=(d.bottom+d.top)/2+T-t:I=$o(n,e,t);v=c-o}else{if(pt(e)){const z=Object.keys(e)[0],U=e[z];w=g[z].getPixelForValue(U)-R+t}else e==="center"?w=(d.left+d.right)/2-R+t:w=$o(n,e,t);I=Lt(i,a,s),b=e==="left"?-ee:ee}return{titleX:w,titleY:I,maxWidth:v,rotation:b}}class gn extends be{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:i,_suggestedMax:s}=this;return t=ae(t,Number.POSITIVE_INFINITY),e=ae(e,Number.NEGATIVE_INFINITY),i=ae(i,Number.POSITIVE_INFINITY),s=ae(s,Number.NEGATIVE_INFINITY),{min:ae(t,i),max:ae(e,s),minDefined:Qt(t),maxDefined:Qt(e)}}getMinMax(t){let{min:e,max:i,minDefined:s,maxDefined:o}=this.getUserBounds(),a;if(s&&o)return{min:e,max:i};const c=this.getMatchingVisibleMetas();for(let h=0,d=c.length;h<d;++h)a=c[h].controller.getMinMax(this,t),s||(e=Math.min(e,a.min)),o||(i=Math.max(i,a.max));return e=o&&e>i?i:e,i=s&&e>i?e:i,{min:ae(e,ae(i,e)),max:ae(i,ae(e,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){_t(this.options.beforeUpdate,[this])}update(t,e,i){const{beginAtZero:s,grace:o,ticks:a}=this.options,c=a.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=au(this,o,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const h=c<this.ticks.length;this._convertTicksToLabels(h?Yo(this.ticks,c):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),a.display&&(a.autoSkip||a.source==="auto")&&(this.ticks=Eh(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),h&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,e,i;this.isHorizontal()?(e=this.left,i=this.right):(e=this.top,i=this.bottom,t=!t),this._startPixel=e,this._endPixel=i,this._reversePixels=t,this._length=i-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){_t(this.options.afterUpdate,[this])}beforeSetDimensions(){_t(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){_t(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),_t(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){_t(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let i,s,o;for(i=0,s=t.length;i<s;i++)o=t[i],o.label=_t(e.callback,[o.value,i,t],this)}afterTickToLabelConversion(){_t(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){_t(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,i=Uo(this.ticks.length,t.ticks.maxTicksLimit),s=e.minRotation||0,o=e.maxRotation;let a=s,c,h,d;if(!this._isVisible()||!e.display||s>=o||i<=1||!this.isHorizontal()){this.labelRotation=s;return}const g=this._getLabelSizes(),b=g.widest.width,v=g.highest.height,w=Xt(this.chart.width-b,0,this.maxWidth);c=t.offset?this.maxWidth/i:w/(i-1),b+6>c&&(c=w/(i-(t.offset?.5:1)),h=this.maxHeight-In(t.grid)-e.padding-Xo(t.title,this.chart.options.font),d=Math.sqrt(b*b+v*v),a=Cc(Math.min(Math.asin(Xt((g.highest.height+6)/c,-1,1)),Math.asin(Xt(h/d,-1,1))-Math.asin(Xt(v/d,-1,1)))),a=Math.max(s,Math.min(o,a))),this.labelRotation=a}afterCalculateLabelRotation(){_t(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){_t(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:i,title:s,grid:o}}=this,a=this._isVisible(),c=this.isHorizontal();if(a){const h=Xo(s,e.options.font);if(c?(t.width=this.maxWidth,t.height=In(o)+h):(t.height=this.maxHeight,t.width=In(o)+h),i.display&&this.ticks.length){const{first:d,last:g,widest:b,highest:v}=this._getLabelSizes(),w=i.padding*2,I=Xe(this.labelRotation),T=Math.cos(I),R=Math.sin(I);if(c){const z=i.mirror?0:R*b.width+T*v.height;t.height=Math.min(this.maxHeight,t.height+z+w)}else{const z=i.mirror?0:T*b.width+R*v.height;t.width=Math.min(this.maxWidth,t.width+z+w)}this._calculatePadding(d,g,R,T)}}this._handleMargins(),c?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,i,s){const{ticks:{align:o,padding:a},position:c}=this.options,h=this.labelRotation!==0,d=c!=="top"&&this.axis==="x";if(this.isHorizontal()){const g=this.getPixelForTick(0)-this.left,b=this.right-this.getPixelForTick(this.ticks.length-1);let v=0,w=0;h?d?(v=s*t.width,w=i*e.height):(v=i*t.height,w=s*e.width):o==="start"?w=e.width:o==="end"?v=t.width:o!=="inner"&&(v=t.width/2,w=e.width/2),this.paddingLeft=Math.max((v-g+a)*this.width/(this.width-g),0),this.paddingRight=Math.max((w-b+a)*this.width/(this.width-b),0)}else{let g=e.height/2,b=t.height/2;o==="start"?(g=0,b=t.height):o==="end"&&(g=e.height,b=0),this.paddingTop=g+a,this.paddingBottom=b+a}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){_t(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return e==="top"||e==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let e,i;for(e=0,i=t.length;e<i;e++)bt(t[e].label)&&(t.splice(e,1),i--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let i=this.ticks;e<i.length&&(i=Yo(i,e)),this._labelSizes=t=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,i){const{ctx:s,_longestTextCache:o}=this,a=[],c=[],h=Math.floor(e/Uo(e,i));let d=0,g=0,b,v,w,I,T,R,z,U,J,G,K;for(b=0;b<e;b+=h){if(I=t[b].label,T=this._resolveTickFontOptions(b),s.font=R=T.string,z=o[R]=o[R]||{data:{},gc:[]},U=T.lineHeight,J=G=0,!bt(I)&&!Ct(I))J=Po(s,z.data,z.gc,J,I),G=U;else if(Ct(I))for(v=0,w=I.length;v<w;++v)K=I[v],!bt(K)&&!Ct(K)&&(J=Po(s,z.data,z.gc,J,K),G+=U);a.push(J),c.push(G),d=Math.max(J,d),g=Math.max(G,g)}Nh(o,e);const Q=a.indexOf(d),Y=c.indexOf(g),Z=it=>({width:a[it]||0,height:c[it]||0});return{first:Z(0),last:Z(e-1),widest:Z(Q),highest:Z(Y),widths:a,heights:c}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return Ec(this._alignToPixels?qe(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const i=e[t];return i.$context||(i.$context=Wh(this.getContext(),t,i))}return this.$context||(this.$context=Hh(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=Xe(this.labelRotation),i=Math.abs(Math.cos(e)),s=Math.abs(Math.sin(e)),o=this._getLabelSizes(),a=t.autoSkipPadding||0,c=o?o.widest.width+a:0,h=o?o.highest.height+a:0;return this.isHorizontal()?h*i>c*s?c/i:h/s:h*s<c*i?h/i:c/s}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,i=this.chart,s=this.options,{grid:o,position:a,border:c}=s,h=o.offset,d=this.isHorizontal(),b=this.ticks.length+(h?1:0),v=In(o),w=[],I=c.setContext(this.getContext()),T=I.display?I.width:0,R=T/2,z=function(kt){return qe(i,kt,T)};let U,J,G,K,Q,Y,Z,it,ft,at,ct,wt;if(a==="top")U=z(this.bottom),Y=this.bottom-v,it=U-R,at=z(t.top)+R,wt=t.bottom;else if(a==="bottom")U=z(this.top),at=t.top,wt=z(t.bottom)-R,Y=U+R,it=this.top+v;else if(a==="left")U=z(this.right),Q=this.right-v,Z=U-R,ft=z(t.left)+R,ct=t.right;else if(a==="right")U=z(this.left),ft=t.left,ct=z(t.right)-R,Q=U+R,Z=this.left+v;else if(e==="x"){if(a==="center")U=z((t.top+t.bottom)/2+.5);else if(pt(a)){const kt=Object.keys(a)[0],zt=a[kt];U=z(this.chart.scales[kt].getPixelForValue(zt))}at=t.top,wt=t.bottom,Y=U+R,it=Y+v}else if(e==="y"){if(a==="center")U=z((t.left+t.right)/2);else if(pt(a)){const kt=Object.keys(a)[0],zt=a[kt];U=z(this.chart.scales[kt].getPixelForValue(zt))}Q=U-R,Z=Q-v,ft=t.left,ct=t.right}const Vt=ht(s.ticks.maxTicksLimit,b),vt=Math.max(1,Math.ceil(b/Vt));for(J=0;J<b;J+=vt){const kt=this.getContext(J),zt=o.setContext(kt),qt=c.setContext(kt),Jt=zt.lineWidth,Tt=zt.color,ve=qt.dash||[],_e=qt.dashOffset,$t=zt.tickWidth,ne=zt.tickColor,ie=zt.tickBorderDash||[],jt=zt.tickBorderDashOffset;G=jh(this,J,h),G!==void 0&&(K=qe(i,G,Jt),d?Q=Z=ft=ct=K:Y=it=at=wt=K,w.push({tx1:Q,ty1:Y,tx2:Z,ty2:it,x1:ft,y1:at,x2:ct,y2:wt,width:Jt,color:Tt,borderDash:ve,borderDashOffset:_e,tickWidth:$t,tickColor:ne,tickBorderDash:ie,tickBorderDashOffset:jt}))}return this._ticksLength=b,this._borderValue=U,w}_computeLabelItems(t){const e=this.axis,i=this.options,{position:s,ticks:o}=i,a=this.isHorizontal(),c=this.ticks,{align:h,crossAlign:d,padding:g,mirror:b}=o,v=In(i.grid),w=v+g,I=b?-g:w,T=-Xe(this.labelRotation),R=[];let z,U,J,G,K,Q,Y,Z,it,ft,at,ct,wt="middle";if(s==="top")Q=this.bottom-I,Y=this._getXAxisLabelAlignment();else if(s==="bottom")Q=this.top+I,Y=this._getXAxisLabelAlignment();else if(s==="left"){const vt=this._getYAxisLabelAlignment(v);Y=vt.textAlign,K=vt.x}else if(s==="right"){const vt=this._getYAxisLabelAlignment(v);Y=vt.textAlign,K=vt.x}else if(e==="x"){if(s==="center")Q=(t.top+t.bottom)/2+w;else if(pt(s)){const vt=Object.keys(s)[0],kt=s[vt];Q=this.chart.scales[vt].getPixelForValue(kt)+w}Y=this._getXAxisLabelAlignment()}else if(e==="y"){if(s==="center")K=(t.left+t.right)/2-w;else if(pt(s)){const vt=Object.keys(s)[0],kt=s[vt];K=this.chart.scales[vt].getPixelForValue(kt)}Y=this._getYAxisLabelAlignment(v).textAlign}e==="y"&&(h==="start"?wt="top":h==="end"&&(wt="bottom"));const Vt=this._getLabelSizes();for(z=0,U=c.length;z<U;++z){J=c[z],G=J.label;const vt=o.setContext(this.getContext(z));Z=this.getPixelForTick(z)+o.labelOffset,it=this._resolveTickFontOptions(z),ft=it.lineHeight,at=Ct(G)?G.length:1;const kt=at/2,zt=vt.color,qt=vt.textStrokeColor,Jt=vt.textStrokeWidth;let Tt=Y;a?(K=Z,Y==="inner"&&(z===U-1?Tt=this.options.reverse?"left":"right":z===0?Tt=this.options.reverse?"right":"left":Tt="center"),s==="top"?d==="near"||T!==0?ct=-at*ft+ft/2:d==="center"?ct=-Vt.highest.height/2-kt*ft+ft:ct=-Vt.highest.height+ft/2:d==="near"||T!==0?ct=ft/2:d==="center"?ct=Vt.highest.height/2-kt*ft:ct=Vt.highest.height-at*ft,b&&(ct*=-1),T!==0&&!vt.showLabelBackdrop&&(K+=ft/2*Math.sin(T))):(Q=Z,ct=(1-at)*ft/2);let ve;if(vt.showLabelBackdrop){const _e=Zt(vt.backdropPadding),$t=Vt.heights[z],ne=Vt.widths[z];let ie=ct-_e.top,jt=0-_e.left;switch(wt){case"middle":ie-=$t/2;break;case"bottom":ie-=$t;break}switch(Y){case"center":jt-=ne/2;break;case"right":jt-=ne;break;case"inner":z===U-1?jt-=ne:z>0&&(jt-=ne/2);break}ve={left:jt,top:ie,width:ne+_e.width,height:$t+_e.height,color:vt.backdropColor}}R.push({label:G,font:it,textOffset:ct,options:{rotation:T,color:zt,strokeColor:qt,strokeWidth:Jt,textAlign:Tt,textBaseline:wt,translation:[K,Q],backdrop:ve}})}return R}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-Xe(this.labelRotation))return t==="top"?"left":"right";let s="center";return e.align==="start"?s="left":e.align==="end"?s="right":e.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:i,mirror:s,padding:o}}=this.options,a=this._getLabelSizes(),c=t+o,h=a.widest.width;let d,g;return e==="left"?s?(g=this.right+o,i==="near"?d="left":i==="center"?(d="center",g+=h/2):(d="right",g+=h)):(g=this.right-c,i==="near"?d="right":i==="center"?(d="center",g-=h/2):(d="left",g=this.left)):e==="right"?s?(g=this.left+o,i==="near"?d="right":i==="center"?(d="center",g-=h/2):(d="left",g-=h)):(g=this.left+c,i==="near"?d="left":i==="center"?(d="center",g+=h/2):(d="right",g=this.right)):d="right",{textAlign:d,x:g}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:i,top:s,width:o,height:a}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(i,s,o,a),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const s=this.ticks.findIndex(o=>o.value===t);return s>=0?e.setContext(this.getContext(s)).lineWidth:0}drawGrid(t){const e=this.options.grid,i=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let o,a;const c=(h,d,g)=>{!g.width||!g.color||(i.save(),i.lineWidth=g.width,i.strokeStyle=g.color,i.setLineDash(g.borderDash||[]),i.lineDashOffset=g.borderDashOffset,i.beginPath(),i.moveTo(h.x,h.y),i.lineTo(d.x,d.y),i.stroke(),i.restore())};if(e.display)for(o=0,a=s.length;o<a;++o){const h=s[o];e.drawOnChartArea&&c({x:h.x1,y:h.y1},{x:h.x2,y:h.y2},h),e.drawTicks&&c({x:h.tx1,y:h.ty1},{x:h.tx2,y:h.ty2},{color:h.tickColor,width:h.tickWidth,borderDash:h.tickBorderDash,borderDashOffset:h.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:i,grid:s}}=this,o=i.setContext(this.getContext()),a=i.display?o.width:0;if(!a)return;const c=s.setContext(this.getContext(0)).lineWidth,h=this._borderValue;let d,g,b,v;this.isHorizontal()?(d=qe(t,this.left,a)-a/2,g=qe(t,this.right,c)+c/2,b=v=h):(b=qe(t,this.top,a)-a/2,v=qe(t,this.bottom,c)+c/2,d=g=h),e.save(),e.lineWidth=o.width,e.strokeStyle=o.color,e.beginPath(),e.moveTo(d,b),e.lineTo(g,v),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const i=this.ctx,s=this._computeLabelArea();s&&br(i,s);const o=this.getLabelItems(t);for(const a of o){const c=a.options,h=a.font,d=a.label,g=a.textOffset;Gn(i,d,0,g,h,c)}s&&vr(i)}drawTitle(){const{ctx:t,options:{position:e,title:i,reverse:s}}=this;if(!i.display)return;const o=Bt(i.font),a=Zt(i.padding),c=i.align;let h=o.lineHeight/2;e==="bottom"||e==="center"||pt(e)?(h+=a.bottom,Ct(i.text)&&(h+=o.lineHeight*(i.text.length-1))):h+=a.top;const{titleX:d,titleY:g,maxWidth:b,rotation:v}=Vh(this,h,e,c);Gn(t,i.text,0,0,o,{color:i.color,maxWidth:b,rotation:v,textAlign:Kh(c,e,s),textBaseline:"middle",translation:[d,g]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,i=ht(t.grid&&t.grid.z,-1),s=ht(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==gn.prototype.draw?[{z:e,draw:o=>{this.draw(o)}}]:[{z:i,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:e,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",s=[];let o,a;for(o=0,a=e.length;o<a;++o){const c=e[o];c[i]===this.id&&(!t||c.type===t)&&s.push(c)}return s}_resolveTickFontOptions(t){const e=this.options.ticks.setContext(this.getContext(t));return Bt(e.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Bi{constructor(t,e,i){this.type=t,this.scope=e,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let i;Uh(e)&&(i=this.register(e));const s=this.items,o=t.id,a=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+t);return o in s||(s[o]=t,qh(t,a,i),this.override&&Ot.override(t.id,t.overrides)),a}get(t){return this.items[t]}unregister(t){const e=this.items,i=t.id,s=this.scope;i in e&&delete e[i],s&&i in Ot[s]&&(delete Ot[s][i],this.override&&delete Ze[i])}}function qh(n,t,e){const i=Un(Object.create(null),[e?Ot.get(e):{},Ot.get(t),n.defaults]);Ot.set(t,i),n.defaultRoutes&&$h(t,n.defaultRoutes),n.descriptors&&Ot.describe(t,n.descriptors)}function $h(n,t){Object.keys(t).forEach(e=>{const i=e.split("."),s=i.pop(),o=[n].concat(i).join("."),a=t[e].split("."),c=a.pop(),h=a.join(".");Ot.route(o,s,h,c)})}function Uh(n){return"id"in n&&"defaults"in n}class Yh{constructor(){this.controllers=new Bi(qn,"datasets",!0),this.elements=new Bi(be,"elements"),this.plugins=new Bi(Object,"plugins"),this.scales=new Bi(gn,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,i){[...e].forEach(s=>{const o=i||this._getRegistryForType(s);i||o.isForType(s)||o===this.plugins&&s.id?this._exec(t,o,s):gt(s,a=>{const c=i||this._getRegistryForType(a);this._exec(t,c,a)})})}_exec(t,e,i){const s=pr(t);_t(i["before"+s],[],i),e[t](i),_t(i["after"+s],[],i)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const i=this._typedRegistries[e];if(i.isForType(t))return i}return this.plugins}_get(t,e,i){const s=e.get(t);if(s===void 0)throw new Error('"'+t+'" is not a registered '+i+".");return s}}var ce=new Yh;class Xh{constructor(){this._init=void 0}notify(t,e,i,s){if(e==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install")),this._init===void 0)return;const o=s?this._descriptors(t).filter(s):this._descriptors(t),a=this._notify(o,t,e,i);return e==="afterDestroy"&&(this._notify(o,t,"stop"),this._notify(this._init,t,"uninstall"),this._init=void 0),a}_notify(t,e,i,s){s=s||{};for(const o of t){const a=o.plugin,c=a[i],h=[e,s,o.options];if(_t(c,h,a)===!1&&s.cancelable)return!1}return!0}invalidate(){bt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const i=t&&t.config,s=ht(i.options&&i.options.plugins,{}),o=Gh(i);return s===!1&&!e?[]:Zh(t,o,s,e)}_notifyStateChanges(t){const e=this._oldCache||[],i=this._cache,s=(o,a)=>o.filter(c=>!a.some(h=>c.plugin.id===h.plugin.id));this._notify(s(e,i),t,"stop"),this._notify(s(i,e),t,"start")}}function Gh(n){const t={},e=[],i=Object.keys(ce.plugins.items);for(let o=0;o<i.length;o++)e.push(ce.getPlugin(i[o]));const s=n.plugins||[];for(let o=0;o<s.length;o++){const a=s[o];e.indexOf(a)===-1&&(e.push(a),t[a.id]=!0)}return{plugins:e,localIds:t}}function Qh(n,t){return!t&&n===!1?null:n===!0?{}:n}function Zh(n,{plugins:t,localIds:e},i,s){const o=[],a=n.getContext();for(const c of t){const h=c.id,d=Qh(i[h],s);d!==null&&o.push({plugin:c,options:Jh(n.config,{plugin:c,local:e[h]},d,a)})}return o}function Jh(n,{plugin:t,local:e},i,s){const o=n.pluginScopeKeys(t),a=n.getOptionScopes(i,o);return e&&t.defaults&&a.push(t.defaults),n.createResolver(a,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function sr(n,t){const e=Ot.datasets[n]||{};return((t.datasets||{})[n]||{}).indexAxis||t.indexAxis||e.indexAxis||"x"}function tf(n,t){let e=n;return n==="_index_"?e=t:n==="_value_"&&(e=t==="x"?"y":"x"),e}function ef(n,t){return n===t?"_index_":"_value_"}function Go(n){if(n==="x"||n==="y"||n==="r")return n}function nf(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function rr(n,...t){if(Go(n))return n;for(const e of t){const i=e.axis||nf(e.position)||n.length>1&&Go(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function Qo(n,t,e){if(e[t+"AxisID"]===n)return{axis:t}}function sf(n,t){if(t.data&&t.data.datasets){const e=t.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(e.length)return Qo(n,"x",e[0])||Qo(n,"y",e[0])}return{}}function rf(n,t){const e=Ze[n.type]||{scales:{}},i=t.scales||{},s=sr(n.type,t),o=Object.create(null);return Object.keys(i).forEach(a=>{const c=i[a];if(!pt(c))return console.error(`Invalid scale configuration for scale: ${a}`);if(c._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${a}`);const h=rr(a,c,sf(a,n),Ot.scales[c.type]),d=ef(h,s),g=e.scales||{};o[a]=Nn(Object.create(null),[{axis:h},c,g[h],g[d]])}),n.data.datasets.forEach(a=>{const c=a.type||n.type,h=a.indexAxis||sr(c,t),g=(Ze[c]||{}).scales||{};Object.keys(g).forEach(b=>{const v=tf(b,h),w=a[v+"AxisID"]||v;o[w]=o[w]||Object.create(null),Nn(o[w],[{axis:v},i[w],g[b]])})}),Object.keys(o).forEach(a=>{const c=o[a];Nn(c,[Ot.scales[c.type],Ot.scale])}),o}function Za(n){const t=n.options||(n.options={});t.plugins=ht(t.plugins,{}),t.scales=rf(n,t)}function Ja(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function of(n){return n=n||{},n.data=Ja(n.data),Za(n),n}const Zo=new Map,tl=new Set;function Fi(n,t){let e=Zo.get(n);return e||(e=t(),Zo.set(n,e),tl.add(e)),e}const Rn=(n,t,e)=>{const i=Ui(t,e);i!==void 0&&n.add(i)};class af{constructor(t){this._config=of(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=Ja(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),Za(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Fi(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return Fi(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return Fi(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id,i=this.type;return Fi(`${i}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const i=this._scopeCache;let s=i.get(t);return(!s||e)&&(s=new Map,i.set(t,s)),s}getOptionScopes(t,e,i){const{options:s,type:o}=this,a=this._cachedScopes(t,i),c=a.get(e);if(c)return c;const h=new Set;e.forEach(g=>{t&&(h.add(t),g.forEach(b=>Rn(h,t,b))),g.forEach(b=>Rn(h,s,b)),g.forEach(b=>Rn(h,Ze[o]||{},b)),g.forEach(b=>Rn(h,Ot,b)),g.forEach(b=>Rn(h,er,b))});const d=Array.from(h);return d.length===0&&d.push(Object.create(null)),tl.has(e)&&a.set(e,d),d}chartOptionScopes(){const{options:t,type:e}=this;return[t,Ze[e]||{},Ot.datasets[e]||{},{type:e},Ot,er]}resolveNamedOptions(t,e,i,s=[""]){const o={$shared:!0},{resolver:a,subPrefixes:c}=Jo(this._resolverCache,t,s);let h=a;if(cf(a,e)){o.$shared=!1,i=Ee(i)?i():i;const d=this.createResolver(t,i,c);h=dn(a,i,d)}for(const d of e)o[d]=h[d];return o}createResolver(t,e,i=[""],s){const{resolver:o}=Jo(this._resolverCache,t,i);return pt(e)?dn(o,e,void 0,s):o}}function Jo(n,t,e){let i=n.get(t);i||(i=new Map,n.set(t,i));const s=e.join();let o=i.get(s);return o||(o={resolver:_r(t,e),subPrefixes:e.filter(c=>!c.toLowerCase().includes("hover"))},i.set(s,o)),o}const lf=n=>pt(n)&&Object.getOwnPropertyNames(n).some(t=>Ee(n[t]));function cf(n,t){const{isScriptable:e,isIndexable:i}=Fa(n);for(const s of t){const o=e(s),a=i(s),c=(a||o)&&n[s];if(o&&(Ee(c)||lf(c))||a&&Ct(c))return!0}return!1}var uf="4.5.1";const hf=["top","bottom","left","right","chartArea"];function ta(n,t){return n==="top"||n==="bottom"||hf.indexOf(n)===-1&&t==="x"}function ea(n,t){return function(e,i){return e[n]===i[n]?e[t]-i[t]:e[n]-i[n]}}function na(n){const t=n.chart,e=t.options.animation;t.notifyPlugins("afterRender"),_t(e&&e.onComplete,[n],t)}function ff(n){const t=n.chart,e=t.options.animation;_t(e&&e.onProgress,[n],t)}function el(n){return kr()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const Wi={},ia=n=>{const t=el(n);return Object.values(Wi).filter(e=>e.canvas===t).pop()};function df(n,t,e){const i=Object.keys(n);for(const s of i){const o=+s;if(o>=t){const a=n[s];delete n[s],(e>0||o>t)&&(n[o+e]=a)}}}function pf(n,t,e,i){return!e||n.type==="mouseout"?null:i?t:n}class ye{static register(...t){ce.add(...t),sa()}static unregister(...t){ce.remove(...t),sa()}constructor(t,e){const i=this.config=new af(e),s=el(t),o=ia(s);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const a=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||Th(s)),this.platform.updateConfig(i);const c=this.platform.acquireContext(s,a.aspectRatio),h=c&&c.canvas,d=h&&h.height,g=h&&h.width;if(this.id=mc(),this.ctx=c,this.canvas=h,this.width=g,this.height=d,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Xh,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Fc(b=>this.update(b),a.resizeDelay||0),this._dataChanges=[],Wi[this.id]=this,!c||!h){console.error("Failed to create chart: can't acquire context from the given item");return}pe.listen(this,"complete",na),pe.listen(this,"progress",ff),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:i,height:s,_aspectRatio:o}=this;return bt(t)?e&&o?o:s?i/s:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return ce}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Co(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Oo(this.canvas,this.ctx),this}stop(){return pe.stop(this),this}resize(t,e){pe.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const i=this.options,s=this.canvas,o=i.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(s,t,e,o),c=i.devicePixelRatio||this.platform.getDevicePixelRatio(),h=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,Co(this,c,!0)&&(this.notifyPlugins("resize",{size:a}),_t(i.onResize,[this,a],this),this.attached&&this._doResize(h)&&this.render())}ensureScalesHaveIDs(){const e=this.options.scales||{};gt(e,(i,s)=>{i.id=s})}buildOrUpdateScales(){const t=this.options,e=t.scales,i=this.scales,s=Object.keys(i).reduce((a,c)=>(a[c]=!1,a),{});let o=[];e&&(o=o.concat(Object.keys(e).map(a=>{const c=e[a],h=rr(a,c),d=h==="r",g=h==="x";return{options:c,dposition:d?"chartArea":g?"bottom":"left",dtype:d?"radialLinear":g?"category":"linear"}}))),gt(o,a=>{const c=a.options,h=c.id,d=rr(h,c),g=ht(c.type,a.dtype);(c.position===void 0||ta(c.position,d)!==ta(a.dposition))&&(c.position=a.dposition),s[h]=!0;let b=null;if(h in i&&i[h].type===g)b=i[h];else{const v=ce.getScale(g);b=new v({id:h,type:g,ctx:this.ctx,chart:this}),i[b.id]=b}b.init(c,t)}),gt(s,(a,c)=>{a||delete i[c]}),gt(i,a=>{Gt.configure(this,a,a.options),Gt.addBox(this,a)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,i=t.length;if(t.sort((s,o)=>s.index-o.index),i>e){for(let s=e;s<i;++s)this._destroyDatasetMeta(s);t.splice(e,i-e)}this._sortedMetasets=t.slice(0).sort(ea("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((i,s)=>{e.filter(o=>o===i._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let i,s;for(this._removeUnreferencedMetasets(),i=0,s=e.length;i<s;i++){const o=e[i];let a=this.getDatasetMeta(i);const c=o.type||this.config.type;if(a.type&&a.type!==c&&(this._destroyDatasetMeta(i),a=this.getDatasetMeta(i)),a.type=c,a.indexAxis=o.indexAxis||sr(c,this.options),a.order=o.order||0,a.index=i,a.label=""+o.label,a.visible=this.isDatasetVisible(i),a.controller)a.controller.updateIndex(i),a.controller.linkScales();else{const h=ce.getController(c),{datasetElementType:d,dataElementType:g}=Ot.datasets[c];Object.assign(h,{dataElementType:ce.getElement(g),datasetElementType:d&&ce.getElement(d)}),a.controller=new h(this,i),t.push(a.controller)}}return this._updateMetasets(),t}_resetElements(){gt(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const i=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let d=0,g=this.data.datasets.length;d<g;d++){const{controller:b}=this.getDatasetMeta(d),v=!s&&o.indexOf(b)===-1;b.buildOrUpdateElements(v),a=Math.max(+b.getMaxOverflow(),a)}a=this._minPadding=i.layout.autoPadding?a:0,this._updateLayout(a),s||gt(o,d=>{d.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(ea("z","_idx"));const{_active:c,_lastEvent:h}=this;h?this._eventHandler(h,!0):c.length&&this._updateHoverStyles(c,c,!0),this.render()}_updateScales(){gt(this.scales,t=>{Gt.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),i=new Set(t.events);(!mo(e,i)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:i,start:s,count:o}of e){const a=i==="_removeElements"?-o:o;df(t,s,a)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,i=o=>new Set(t.filter(a=>a[0]===o).map((a,c)=>c+","+a.splice(1).join(","))),s=i(0);for(let o=1;o<e;o++)if(!mo(s,i(o)))return;return Array.from(s).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Gt.update(this,this.width,this.height,t);const e=this.chartArea,i=e.width<=0||e.height<=0;this._layers=[],gt(this.boxes,s=>{i&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,o)=>{s._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let e=0,i=this.data.datasets.length;e<i;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,i=this.data.datasets.length;e<i;++e)this._updateDataset(e,Ee(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const i=this.getDatasetMeta(t),s={meta:i,index:t,mode:e,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(i.controller._update(e),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(pe.has(this)?this.attached&&!pe.running(this)&&pe.start(this):(this.draw(),na({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:i,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,i=[];let s,o;for(s=0,o=e.length;s<o;++s){const a=e[s];(!t||a.visible)&&i.push(a)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,i={meta:t,index:t.index,cancelable:!0},s=Vu(this,t);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(s&&br(e,s),t.controller.draw(),s&&vr(e),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(t){return Xn(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,i,s){const o=uh.modes[e];return typeof o=="function"?o(this,t,i,s):[]}getDatasetMeta(t){const e=this.data.datasets[t],i=this._metasets;let s=i.filter(o=>o&&o._dataset===e).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},i.push(s)),s}getContext(){return this.$context||(this.$context=Je(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const i=this.getDatasetMeta(t);return typeof i.hidden=="boolean"?!i.hidden:!e.hidden}setDatasetVisibility(t,e){const i=this.getDatasetMeta(t);i.hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,i){const s=i?"show":"hide",o=this.getDatasetMeta(t),a=o.controller._resolveAnimations(void 0,s);Yi(e)?(o.data[e].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),a.update(o,{visible:i}),this.update(c=>c.datasetIndex===t?s:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),pe.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),Oo(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete Wi[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,i=(o,a)=>{e.addEventListener(this,o,a),t[o]=a},s=(o,a,c)=>{o.offsetX=a,o.offsetY=c,this._eventHandler(o)};gt(this.options.events,o=>i(o,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,i=(h,d)=>{e.addEventListener(this,h,d),t[h]=d},s=(h,d)=>{t[h]&&(e.removeEventListener(this,h,d),delete t[h])},o=(h,d)=>{this.canvas&&this.resize(h,d)};let a;const c=()=>{s("attach",c),this.attached=!0,this.resize(),i("resize",o),i("detach",a)};a=()=>{this.attached=!1,s("resize",o),this._stop(),this._resize(0,0),i("attach",c)},e.isAttached(this.canvas)?c():a()}unbindEvents(){gt(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},gt(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,i){const s=i?"set":"remove";let o,a,c,h;for(e==="dataset"&&(o=this.getDatasetMeta(t[0].datasetIndex),o.controller["_"+s+"DatasetHoverStyle"]()),c=0,h=t.length;c<h;++c){a=t[c];const d=a&&this.getDatasetMeta(a.datasetIndex).controller;d&&d[s+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],i=t.map(({datasetIndex:o,index:a})=>{const c=this.getDatasetMeta(o);if(!c)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:c.data[a],index:a}});!qi(i,e)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,e))}notifyPlugins(t,e,i){return this._plugins.notify(this,t,e,i)}isPluginEnabled(t){return this._plugins._cache.filter(e=>e.plugin.id===t).length===1}_updateHoverStyles(t,e,i){const s=this.options.hover,o=(h,d)=>h.filter(g=>!d.some(b=>g.datasetIndex===b.datasetIndex&&g.index===b.index)),a=o(e,t),c=i?t:o(t,e);a.length&&this.updateHoverStyle(a,s.mode,!1),c.length&&s.mode&&this.updateHoverStyle(c,s.mode,!0)}_eventHandler(t,e){const i={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},s=a=>(a.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",i,s)===!1)return;const o=this._handleEvent(t,e,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,s),(o||i.changed)&&this.render(),this}_handleEvent(t,e,i){const{_active:s=[],options:o}=this,a=e,c=this._getActiveElements(t,s,i,a),h=wc(t),d=pf(t,this._lastEvent,i,h);i&&(this._lastEvent=null,_t(o.onHover,[t,c,this],this),h&&_t(o.onClick,[t,c,this],this));const g=!qi(c,s);return(g||e)&&(this._active=c,this._updateHoverStyles(c,s,e)),this._lastEvent=d,g}_getActiveElements(t,e,i,s){if(t.type==="mouseout")return[];if(!i)return e;const o=this.options.hover;return this.getElementsAtEventForMode(t,o.mode,o,s)}}ot(ye,"defaults",Ot),ot(ye,"instances",Wi),ot(ye,"overrides",Ze),ot(ye,"registry",ce),ot(ye,"version",uf),ot(ye,"getChart",ia);function sa(){return gt(ye.instances,n=>n._plugins.invalidate())}function nl(n,t,e=t){n.lineCap=ht(e.borderCapStyle,t.borderCapStyle),n.setLineDash(ht(e.borderDash,t.borderDash)),n.lineDashOffset=ht(e.borderDashOffset,t.borderDashOffset),n.lineJoin=ht(e.borderJoinStyle,t.borderJoinStyle),n.lineWidth=ht(e.borderWidth,t.borderWidth),n.strokeStyle=ht(e.borderColor,t.borderColor)}function gf(n,t,e){n.lineTo(e.x,e.y)}function mf(n){return n.stepped?Qc:n.tension||n.cubicInterpolationMode==="monotone"?Zc:gf}function il(n,t,e={}){const i=n.length,{start:s=0,end:o=i-1}=e,{start:a,end:c}=t,h=Math.max(s,a),d=Math.min(o,c),g=s<a&&o<a||s>c&&o>c;return{count:i,start:h,loop:t.loop,ilen:d<h&&!g?i+d-h:d-h}}function yf(n,t,e,i){const{points:s,options:o}=t,{count:a,start:c,loop:h,ilen:d}=il(s,e,i),g=mf(o);let{move:b=!0,reverse:v}=i||{},w,I,T;for(w=0;w<=d;++w)I=s[(c+(v?d-w:w))%a],!I.skip&&(b?(n.moveTo(I.x,I.y),b=!1):g(n,T,I,v,o.stepped),T=I);return h&&(I=s[(c+(v?d:0))%a],g(n,T,I,v,o.stepped)),!!h}function bf(n,t,e,i){const s=t.points,{count:o,start:a,ilen:c}=il(s,e,i),{move:h=!0,reverse:d}=i||{};let g=0,b=0,v,w,I,T,R,z;const U=G=>(a+(d?c-G:G))%o,J=()=>{T!==R&&(n.lineTo(g,R),n.lineTo(g,T),n.lineTo(g,z))};for(h&&(w=s[U(0)],n.moveTo(w.x,w.y)),v=0;v<=c;++v){if(w=s[U(v)],w.skip)continue;const G=w.x,K=w.y,Q=G|0;Q===I?(K<T?T=K:K>R&&(R=K),g=(b*g+G)/++b):(J(),n.lineTo(G,K),I=Q,b=0,T=R=K),z=K}J()}function or(n){const t=n.options,e=t.borderDash&&t.borderDash.length;return!n._decimated&&!n._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!e?bf:yf}function vf(n){return n.stepped?Tu:n.tension||n.cubicInterpolationMode==="monotone"?Eu:Ye}function _f(n,t,e,i){let s=t._path;s||(s=t._path=new Path2D,t.path(s,e,i)&&s.closePath()),nl(n,t.options),n.stroke(s)}function xf(n,t,e,i){const{segments:s,options:o}=t,a=or(t);for(const c of s)nl(n,o,c.style),n.beginPath(),a(n,t,c,{start:e,end:e+i-1})&&n.closePath(),n.stroke()}const wf=typeof Path2D=="function";function kf(n,t,e,i){wf&&!t.options.segment?_f(n,t,e,i):xf(n,t,e,i)}class zn extends be{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const s=i.spanGaps?this._loop:this._fullLoop;ku(this._points,i,t,s,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=Nu(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,i=t.length;return i&&e[t[i-1].end]}interpolate(t,e){const i=this.options,s=t[e],o=this.points,a=Fu(this,{property:e,start:s,end:s});if(!a.length)return;const c=[],h=vf(i);let d,g;for(d=0,g=a.length;d<g;++d){const{start:b,end:v}=a[d],w=o[b],I=o[v];if(w===I){c.push(w);continue}const T=Math.abs((s-w[e])/(I[e]-w[e])),R=h(w,I,T,i.stepped);R[e]=t[e],c.push(R)}return c.length===1?c[0]:c}pathSegment(t,e,i){return or(this)(t,this,e,i)}path(t,e,i){const s=this.segments,o=or(this);let a=this._loop;e=e||0,i=i||this.points.length-e;for(const c of s)a&=o(t,this,c,{start:e,end:e+i-1});return!!a}draw(t,e,i,s){const o=this.options||{};(this.points||[]).length&&o.borderWidth&&(t.save(),kf(t,this,i,s),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}ot(zn,"id","line"),ot(zn,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),ot(zn,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),ot(zn,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"});function ra(n,t,e,i){const s=n.options,{[e]:o}=n.getProps([e],i);return Math.abs(t-o)<s.radius+s.hitRadius}class Ki extends be{constructor(e){super();ot(this,"parsed");ot(this,"skip");ot(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,i,s){const o=this.options,{x:a,y:c}=this.getProps(["x","y"],s);return Math.pow(e-a,2)+Math.pow(i-c,2)<Math.pow(o.hitRadius+o.radius,2)}inXRange(e,i){return ra(this,e,"x",i)}inYRange(e,i){return ra(this,e,"y",i)}getCenterPoint(e){const{x:i,y:s}=this.getProps(["x","y"],e);return{x:i,y:s}}size(e){e=e||this.options||{};let i=e.radius||0;i=Math.max(i,i&&e.hoverRadius||0);const s=i&&e.borderWidth||0;return(i+s)*2}draw(e,i){const s=this.options;this.skip||s.radius<.1||!Xn(this,i,this.size(s)/2)||(e.strokeStyle=s.borderColor,e.lineWidth=s.borderWidth,e.fillStyle=s.backgroundColor,nr(e,s,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}ot(Ki,"id","point"),ot(Ki,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),ot(Ki,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const oa=(n,t)=>{let{boxHeight:e=t,boxWidth:i=t}=n;return n.usePointStyle&&(e=Math.min(e,t),i=n.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:e,itemHeight:Math.max(t,e)}},Sf=(n,t)=>n!==null&&t!==null&&n.datasetIndex===t.datasetIndex&&n.index===t.index;class aa extends be{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,i){this.maxWidth=t,this.maxHeight=e,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=_t(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(i=>t.filter(i,this.chart.data))),t.sort&&(e=e.sort((i,s)=>t.sort(i,s,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display){this.width=this.height=0;return}const i=t.labels,s=Bt(i.font),o=s.size,a=this._computeTitleHeight(),{boxWidth:c,itemHeight:h}=oa(i,o);let d,g;e.font=s.string,this.isHorizontal()?(d=this.maxWidth,g=this._fitRows(a,o,c,h)+10):(g=this.maxHeight,d=this._fitCols(a,s,c,h)+10),this.width=Math.min(d,t.maxWidth||this.maxWidth),this.height=Math.min(g,t.maxHeight||this.maxHeight)}_fitRows(t,e,i,s){const{ctx:o,maxWidth:a,options:{labels:{padding:c}}}=this,h=this.legendHitBoxes=[],d=this.lineWidths=[0],g=s+c;let b=t;o.textAlign="left",o.textBaseline="middle";let v=-1,w=-g;return this.legendItems.forEach((I,T)=>{const R=i+e/2+o.measureText(I.text).width;(T===0||d[d.length-1]+R+2*c>a)&&(b+=g,d[d.length-(T>0?0:1)]=0,w+=g,v++),h[T]={left:0,top:w,row:v,width:R,height:s},d[d.length-1]+=R+c}),b}_fitCols(t,e,i,s){const{ctx:o,maxHeight:a,options:{labels:{padding:c}}}=this,h=this.legendHitBoxes=[],d=this.columnSizes=[],g=a-t;let b=c,v=0,w=0,I=0,T=0;return this.legendItems.forEach((R,z)=>{const{itemWidth:U,itemHeight:J}=Pf(i,e,o,R,s);z>0&&w+J+2*c>g&&(b+=v+c,d.push({width:v,height:w}),I+=v+c,T++,v=w=0),h[z]={left:I,top:w,col:T,width:U,height:J},v=Math.max(v,U),w+=J+c}),b+=v,d.push({width:v,height:w}),b}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:i,labels:{padding:s},rtl:o}}=this,a=hn(o,this.left,this.width);if(this.isHorizontal()){let c=0,h=Lt(i,this.left+s,this.right-this.lineWidths[c]);for(const d of e)c!==d.row&&(c=d.row,h=Lt(i,this.left+s,this.right-this.lineWidths[c])),d.top+=this.top+t+s,d.left=a.leftForLtr(a.x(h),d.width),h+=d.width+s}else{let c=0,h=Lt(i,this.top+t+s,this.bottom-this.columnSizes[c].height);for(const d of e)d.col!==c&&(c=d.col,h=Lt(i,this.top+t+s,this.bottom-this.columnSizes[c].height)),d.top=h,d.left+=this.left+s,d.left=a.leftForLtr(a.x(d.left),d.width),h+=d.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;br(t,this),this._draw(),vr(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:i,ctx:s}=this,{align:o,labels:a}=t,c=Ot.color,h=hn(t.rtl,this.left,this.width),d=Bt(a.font),{padding:g}=a,b=d.size,v=b/2;let w;this.drawTitle(),s.textAlign=h.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=d.string;const{boxWidth:I,boxHeight:T,itemHeight:R}=oa(a,b),z=function(Q,Y,Z){if(isNaN(I)||I<=0||isNaN(T)||T<0)return;s.save();const it=ht(Z.lineWidth,1);if(s.fillStyle=ht(Z.fillStyle,c),s.lineCap=ht(Z.lineCap,"butt"),s.lineDashOffset=ht(Z.lineDashOffset,0),s.lineJoin=ht(Z.lineJoin,"miter"),s.lineWidth=it,s.strokeStyle=ht(Z.strokeStyle,c),s.setLineDash(ht(Z.lineDash,[])),a.usePointStyle){const ft={radius:T*Math.SQRT2/2,pointStyle:Z.pointStyle,rotation:Z.rotation,borderWidth:it},at=h.xPlus(Q,I/2),ct=Y+v;La(s,ft,at,ct,a.pointStyleWidth&&I)}else{const ft=Y+Math.max((b-T)/2,0),at=h.leftForLtr(Q,I),ct=Vn(Z.borderRadius);s.beginPath(),Object.values(ct).some(wt=>wt!==0)?ir(s,{x:at,y:ft,w:I,h:T,radius:ct}):s.rect(at,ft,I,T),s.fill(),it!==0&&s.stroke()}s.restore()},U=function(Q,Y,Z){Gn(s,Z.text,Q,Y+R/2,d,{strikethrough:Z.hidden,textAlign:h.textAlign(Z.textAlign)})},J=this.isHorizontal(),G=this._computeTitleHeight();J?w={x:Lt(o,this.left+g,this.right-i[0]),y:this.top+g+G,line:0}:w={x:this.left+g,y:Lt(o,this.top+G+g,this.bottom-e[0].height),line:0},Wa(this.ctx,t.textDirection);const K=R+g;this.legendItems.forEach((Q,Y)=>{s.strokeStyle=Q.fontColor,s.fillStyle=Q.fontColor;const Z=s.measureText(Q.text).width,it=h.textAlign(Q.textAlign||(Q.textAlign=a.textAlign)),ft=I+v+Z;let at=w.x,ct=w.y;h.setWidth(this.width),J?Y>0&&at+ft+g>this.right&&(ct=w.y+=K,w.line++,at=w.x=Lt(o,this.left+g,this.right-i[w.line])):Y>0&&ct+K>this.bottom&&(at=w.x=at+e[w.line].width+g,w.line++,ct=w.y=Lt(o,this.top+G+g,this.bottom-e[w.line].height));const wt=h.x(at);if(z(wt,ct,Q),at=zc(it,at+I+v,J?at+ft:this.right,t.rtl),U(h.x(at),ct,Q),J)w.x+=ft+g;else if(typeof Q.text!="string"){const Vt=d.lineHeight;w.y+=sl(Q,Vt)+g}else w.y+=K}),Ka(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,i=Bt(e.font),s=Zt(e.padding);if(!e.display)return;const o=hn(t.rtl,this.left,this.width),a=this.ctx,c=e.position,h=i.size/2,d=s.top+h;let g,b=this.left,v=this.width;if(this.isHorizontal())v=Math.max(...this.lineWidths),g=this.top+d,b=Lt(t.align,b,this.right-v);else{const I=this.columnSizes.reduce((T,R)=>Math.max(T,R.height),0);g=d+Lt(t.align,this.top,this.bottom-I-t.labels.padding-this._computeTitleHeight())}const w=Lt(c,b,b+v);a.textAlign=o.textAlign(mr(c)),a.textBaseline="middle",a.strokeStyle=e.color,a.fillStyle=e.color,a.font=i.string,Gn(a,e.text,w,g,i)}_computeTitleHeight(){const t=this.options.title,e=Bt(t.font),i=Zt(t.padding);return t.display?e.lineHeight+i.height:0}_getLegendItemAt(t,e){let i,s,o;if(Bn(t,this.left,this.right)&&Bn(e,this.top,this.bottom)){for(o=this.legendHitBoxes,i=0;i<o.length;++i)if(s=o[i],Bn(t,s.left,s.left+s.width)&&Bn(e,s.top,s.top+s.height))return this.legendItems[i]}return null}handleEvent(t){const e=this.options;if(!Df(t.type,e))return;const i=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const s=this._hoveredItem,o=Sf(s,i);s&&!o&&_t(e.onLeave,[t,s,this],this),this._hoveredItem=i,i&&!o&&_t(e.onHover,[t,i,this],this)}else i&&_t(e.onClick,[t,i,this],this)}}function Pf(n,t,e,i,s){const o=Of(i,n,t,e),a=Mf(s,i,t.lineHeight);return{itemWidth:o,itemHeight:a}}function Of(n,t,e,i){let s=n.text;return s&&typeof s!="string"&&(s=s.reduce((o,a)=>o.length>a.length?o:a)),t+e.size/2+i.measureText(s).width}function Mf(n,t,e){let i=n;return typeof t.text!="string"&&(i=sl(t,e)),i}function sl(n,t){const e=n.text?n.text.length:0;return t*e}function Df(n,t){return!!((n==="mousemove"||n==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(n==="click"||n==="mouseup"))}var Cf={id:"legend",_element:aa,start(n,t,e){const i=n.legend=new aa({ctx:n.ctx,options:e,chart:n});Gt.configure(n,i,e),Gt.addBox(n,i)},stop(n){Gt.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,t,e){const i=n.legend;Gt.configure(n,i,e),i.options=e},afterUpdate(n){const t=n.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(n,t){t.replay||n.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,t,e){const i=t.datasetIndex,s=e.chart;s.isDatasetVisible(i)?(s.hide(i),t.hidden=!0):(s.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const t=n.data.datasets,{labels:{usePointStyle:e,pointStyle:i,textAlign:s,color:o,useBorderRadius:a,borderRadius:c}}=n.legend.options;return n._getSortedDatasetMetas().map(h=>{const d=h.controller.getStyle(e?0:void 0),g=Zt(d.borderWidth);return{text:t[h.index].label,fillStyle:d.backgroundColor,fontColor:o,hidden:!h.visible,lineCap:d.borderCapStyle,lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:(g.width+g.height)/4,strokeStyle:d.borderColor,pointStyle:i||d.pointStyle,rotation:d.rotation,textAlign:s||d.textAlign,borderRadius:a&&(c||d.borderRadius),datasetIndex:h.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class rl extends be{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=e;const s=Ct(i.text)?i.text.length:1;this._padding=Zt(i.padding);const o=s*Bt(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=o:this.width=o}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:e,left:i,bottom:s,right:o,options:a}=this,c=a.align;let h=0,d,g,b;return this.isHorizontal()?(g=Lt(c,i,o),b=e+t,d=o-i):(a.position==="left"?(g=i+t,b=Lt(c,s,e),h=At*-.5):(g=o-t,b=Lt(c,e,s),h=At*.5),d=s-e),{titleX:g,titleY:b,maxWidth:d,rotation:h}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const i=Bt(e.font),o=i.lineHeight/2+this._padding.top,{titleX:a,titleY:c,maxWidth:h,rotation:d}=this._drawArgs(o);Gn(t,e.text,0,0,i,{color:e.color,maxWidth:h,rotation:d,textAlign:mr(e.align),textBaseline:"middle",translation:[a,c]})}}function Af(n,t){const e=new rl({ctx:n.ctx,options:t,chart:n});Gt.configure(n,e,t),Gt.addBox(n,e),n.titleBlock=e}var Tf={id:"title",_element:rl,start(n,t,e){Af(n,e)},stop(n){const t=n.titleBlock;Gt.removeBox(n,t),delete n.titleBlock},beforeUpdate(n,t,e){const i=n.titleBlock;Gt.configure(n,i,e),i.options=e},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const jn={average(n){if(!n.length)return!1;let t,e,i=new Set,s=0,o=0;for(t=0,e=n.length;t<e;++t){const c=n[t].element;if(c&&c.hasValue()){const h=c.tooltipPosition();i.add(h.x),s+=h.y,++o}}return o===0||i.size===0?!1:{x:[...i].reduce((c,h)=>c+h)/i.size,y:s/o}},nearest(n,t){if(!n.length)return!1;let e=t.x,i=t.y,s=Number.POSITIVE_INFINITY,o,a,c;for(o=0,a=n.length;o<a;++o){const h=n[o].element;if(h&&h.hasValue()){const d=h.getCenterPoint(),g=tr(t,d);g<s&&(s=g,c=h)}}if(c){const h=c.tooltipPosition();e=h.x,i=h.y}return{x:e,y:i}}};function le(n,t){return t&&(Ct(t)?Array.prototype.push.apply(n,t):n.push(t)),n}function ge(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function Ef(n,t){const{element:e,datasetIndex:i,index:s}=t,o=n.getDatasetMeta(i).controller,{label:a,value:c}=o.getLabelAndValue(s);return{chart:n,label:a,parsed:o.getParsed(s),raw:n.data.datasets[i].data[s],formattedValue:c,dataset:o.getDataset(),dataIndex:s,datasetIndex:i,element:e}}function la(n,t){const e=n.chart.ctx,{body:i,footer:s,title:o}=n,{boxWidth:a,boxHeight:c}=t,h=Bt(t.bodyFont),d=Bt(t.titleFont),g=Bt(t.footerFont),b=o.length,v=s.length,w=i.length,I=Zt(t.padding);let T=I.height,R=0,z=i.reduce((G,K)=>G+K.before.length+K.lines.length+K.after.length,0);if(z+=n.beforeBody.length+n.afterBody.length,b&&(T+=b*d.lineHeight+(b-1)*t.titleSpacing+t.titleMarginBottom),z){const G=t.displayColors?Math.max(c,h.lineHeight):h.lineHeight;T+=w*G+(z-w)*h.lineHeight+(z-1)*t.bodySpacing}v&&(T+=t.footerMarginTop+v*g.lineHeight+(v-1)*t.footerSpacing);let U=0;const J=function(G){R=Math.max(R,e.measureText(G).width+U)};return e.save(),e.font=d.string,gt(n.title,J),e.font=h.string,gt(n.beforeBody.concat(n.afterBody),J),U=t.displayColors?a+2+t.boxPadding:0,gt(i,G=>{gt(G.before,J),gt(G.lines,J),gt(G.after,J)}),U=0,e.font=g.string,gt(n.footer,J),e.restore(),R+=I.width,{width:R,height:T}}function If(n,t){const{y:e,height:i}=t;return e<i/2?"top":e>n.height-i/2?"bottom":"center"}function Rf(n,t,e,i){const{x:s,width:o}=i,a=e.caretSize+e.caretPadding;if(n==="left"&&s+o+a>t.width||n==="right"&&s-o-a<0)return!0}function Lf(n,t,e,i){const{x:s,width:o}=e,{width:a,chartArea:{left:c,right:h}}=n;let d="center";return i==="center"?d=s<=(c+h)/2?"left":"right":s<=o/2?d="left":s>=a-o/2&&(d="right"),Rf(d,n,t,e)&&(d="center"),d}function ca(n,t,e){const i=e.yAlign||t.yAlign||If(n,e);return{xAlign:e.xAlign||t.xAlign||Lf(n,t,e,i),yAlign:i}}function Bf(n,t){let{x:e,width:i}=n;return t==="right"?e-=i:t==="center"&&(e-=i/2),e}function Ff(n,t,e){let{y:i,height:s}=n;return t==="top"?i+=e:t==="bottom"?i-=s+e:i-=s/2,i}function ua(n,t,e,i){const{caretSize:s,caretPadding:o,cornerRadius:a}=n,{xAlign:c,yAlign:h}=e,d=s+o,{topLeft:g,topRight:b,bottomLeft:v,bottomRight:w}=Vn(a);let I=Bf(t,c);const T=Ff(t,h,d);return h==="center"?c==="left"?I+=d:c==="right"&&(I-=d):c==="left"?I-=Math.max(g,v)+s:c==="right"&&(I+=Math.max(b,w)+s),{x:Xt(I,0,i.width-t.width),y:Xt(T,0,i.height-t.height)}}function zi(n,t,e){const i=Zt(e.padding);return t==="center"?n.x+n.width/2:t==="right"?n.x+n.width-i.right:n.x+i.left}function ha(n){return le([],ge(n))}function zf(n,t,e){return Je(n,{tooltip:t,tooltipItems:e,type:"tooltip"})}function fa(n,t){const e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?n.override(e):n}const ol={beforeTitle:de,title(n){if(n.length>0){const t=n[0],e=t.chart.data.labels,i=e?e.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return e[t.dataIndex]}return""},afterTitle:de,beforeBody:de,beforeLabel:de,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let t=n.dataset.label||"";t&&(t+=": ");const e=n.formattedValue;return bt(e)||(t+=e),t},labelColor(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:de,afterBody:de,beforeFooter:de,footer:de,afterFooter:de};function Nt(n,t,e,i){const s=n[t].call(e,i);return typeof s>"u"?ol[t].call(e,i):s}class ar extends be{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,i=this.options.setContext(this.getContext()),s=i.enabled&&e.options.animation&&i.animations,o=new qa(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=zf(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,e){const{callbacks:i}=e,s=Nt(i,"beforeTitle",this,t),o=Nt(i,"title",this,t),a=Nt(i,"afterTitle",this,t);let c=[];return c=le(c,ge(s)),c=le(c,ge(o)),c=le(c,ge(a)),c}getBeforeBody(t,e){return ha(Nt(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:i}=e,s=[];return gt(t,o=>{const a={before:[],lines:[],after:[]},c=fa(i,o);le(a.before,ge(Nt(c,"beforeLabel",this,o))),le(a.lines,Nt(c,"label",this,o)),le(a.after,ge(Nt(c,"afterLabel",this,o))),s.push(a)}),s}getAfterBody(t,e){return ha(Nt(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:i}=e,s=Nt(i,"beforeFooter",this,t),o=Nt(i,"footer",this,t),a=Nt(i,"afterFooter",this,t);let c=[];return c=le(c,ge(s)),c=le(c,ge(o)),c=le(c,ge(a)),c}_createItems(t){const e=this._active,i=this.chart.data,s=[],o=[],a=[];let c=[],h,d;for(h=0,d=e.length;h<d;++h)c.push(Ef(this.chart,e[h]));return t.filter&&(c=c.filter((g,b,v)=>t.filter(g,b,v,i))),t.itemSort&&(c=c.sort((g,b)=>t.itemSort(g,b,i))),gt(c,g=>{const b=fa(t.callbacks,g);s.push(Nt(b,"labelColor",this,g)),o.push(Nt(b,"labelPointStyle",this,g)),a.push(Nt(b,"labelTextColor",this,g))}),this.labelColors=s,this.labelPointStyles=o,this.labelTextColors=a,this.dataPoints=c,c}update(t,e){const i=this.options.setContext(this.getContext()),s=this._active;let o,a=[];if(!s.length)this.opacity!==0&&(o={opacity:0});else{const c=jn[i.position].call(this,s,this._eventPosition);a=this._createItems(i),this.title=this.getTitle(a,i),this.beforeBody=this.getBeforeBody(a,i),this.body=this.getBody(a,i),this.afterBody=this.getAfterBody(a,i),this.footer=this.getFooter(a,i);const h=this._size=la(this,i),d=Object.assign({},c,h),g=ca(this.chart,i,d),b=ua(i,d,g,this.chart);this.xAlign=g.xAlign,this.yAlign=g.yAlign,o={opacity:1,x:b.x,y:b.y,width:h.width,height:h.height,caretX:c.x,caretY:c.y}}this._tooltipItems=a,this.$context=void 0,o&&this._resolveAnimations().update(this,o),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,i,s){const o=this.getCaretPosition(t,i,s);e.lineTo(o.x1,o.y1),e.lineTo(o.x2,o.y2),e.lineTo(o.x3,o.y3)}getCaretPosition(t,e,i){const{xAlign:s,yAlign:o}=this,{caretSize:a,cornerRadius:c}=i,{topLeft:h,topRight:d,bottomLeft:g,bottomRight:b}=Vn(c),{x:v,y:w}=t,{width:I,height:T}=e;let R,z,U,J,G,K;return o==="center"?(G=w+T/2,s==="left"?(R=v,z=R-a,J=G+a,K=G-a):(R=v+I,z=R+a,J=G-a,K=G+a),U=R):(s==="left"?z=v+Math.max(h,g)+a:s==="right"?z=v+I-Math.max(d,b)-a:z=this.caretX,o==="top"?(J=w,G=J-a,R=z-a,U=z+a):(J=w+T,G=J+a,R=z+a,U=z-a),K=J),{x1:R,x2:z,x3:U,y1:J,y2:G,y3:K}}drawTitle(t,e,i){const s=this.title,o=s.length;let a,c,h;if(o){const d=hn(i.rtl,this.x,this.width);for(t.x=zi(this,i.titleAlign,i),e.textAlign=d.textAlign(i.titleAlign),e.textBaseline="middle",a=Bt(i.titleFont),c=i.titleSpacing,e.fillStyle=i.titleColor,e.font=a.string,h=0;h<o;++h)e.fillText(s[h],d.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+c,h+1===o&&(t.y+=i.titleMarginBottom-c)}}_drawColorBox(t,e,i,s,o){const a=this.labelColors[i],c=this.labelPointStyles[i],{boxHeight:h,boxWidth:d}=o,g=Bt(o.bodyFont),b=zi(this,"left",o),v=s.x(b),w=h<g.lineHeight?(g.lineHeight-h)/2:0,I=e.y+w;if(o.usePointStyle){const T={radius:Math.min(d,h)/2,pointStyle:c.pointStyle,rotation:c.rotation,borderWidth:1},R=s.leftForLtr(v,d)+d/2,z=I+h/2;t.strokeStyle=o.multiKeyBackground,t.fillStyle=o.multiKeyBackground,nr(t,T,R,z),t.strokeStyle=a.borderColor,t.fillStyle=a.backgroundColor,nr(t,T,R,z)}else{t.lineWidth=pt(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,t.strokeStyle=a.borderColor,t.setLineDash(a.borderDash||[]),t.lineDashOffset=a.borderDashOffset||0;const T=s.leftForLtr(v,d),R=s.leftForLtr(s.xPlus(v,1),d-2),z=Vn(a.borderRadius);Object.values(z).some(U=>U!==0)?(t.beginPath(),t.fillStyle=o.multiKeyBackground,ir(t,{x:T,y:I,w:d,h,radius:z}),t.fill(),t.stroke(),t.fillStyle=a.backgroundColor,t.beginPath(),ir(t,{x:R,y:I+1,w:d-2,h:h-2,radius:z}),t.fill()):(t.fillStyle=o.multiKeyBackground,t.fillRect(T,I,d,h),t.strokeRect(T,I,d,h),t.fillStyle=a.backgroundColor,t.fillRect(R,I+1,d-2,h-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,e,i){const{body:s}=this,{bodySpacing:o,bodyAlign:a,displayColors:c,boxHeight:h,boxWidth:d,boxPadding:g}=i,b=Bt(i.bodyFont);let v=b.lineHeight,w=0;const I=hn(i.rtl,this.x,this.width),T=function(Z){e.fillText(Z,I.x(t.x+w),t.y+v/2),t.y+=v+o},R=I.textAlign(a);let z,U,J,G,K,Q,Y;for(e.textAlign=a,e.textBaseline="middle",e.font=b.string,t.x=zi(this,R,i),e.fillStyle=i.bodyColor,gt(this.beforeBody,T),w=c&&R!=="right"?a==="center"?d/2+g:d+2+g:0,G=0,Q=s.length;G<Q;++G){for(z=s[G],U=this.labelTextColors[G],e.fillStyle=U,gt(z.before,T),J=z.lines,c&&J.length&&(this._drawColorBox(e,t,G,I,i),v=Math.max(b.lineHeight,h)),K=0,Y=J.length;K<Y;++K)T(J[K]),v=b.lineHeight;gt(z.after,T)}w=0,v=b.lineHeight,gt(this.afterBody,T),t.y-=o}drawFooter(t,e,i){const s=this.footer,o=s.length;let a,c;if(o){const h=hn(i.rtl,this.x,this.width);for(t.x=zi(this,i.footerAlign,i),t.y+=i.footerMarginTop,e.textAlign=h.textAlign(i.footerAlign),e.textBaseline="middle",a=Bt(i.footerFont),e.fillStyle=i.footerColor,e.font=a.string,c=0;c<o;++c)e.fillText(s[c],h.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+i.footerSpacing}}drawBackground(t,e,i,s){const{xAlign:o,yAlign:a}=this,{x:c,y:h}=t,{width:d,height:g}=i,{topLeft:b,topRight:v,bottomLeft:w,bottomRight:I}=Vn(s.cornerRadius);e.fillStyle=s.backgroundColor,e.strokeStyle=s.borderColor,e.lineWidth=s.borderWidth,e.beginPath(),e.moveTo(c+b,h),a==="top"&&this.drawCaret(t,e,i,s),e.lineTo(c+d-v,h),e.quadraticCurveTo(c+d,h,c+d,h+v),a==="center"&&o==="right"&&this.drawCaret(t,e,i,s),e.lineTo(c+d,h+g-I),e.quadraticCurveTo(c+d,h+g,c+d-I,h+g),a==="bottom"&&this.drawCaret(t,e,i,s),e.lineTo(c+w,h+g),e.quadraticCurveTo(c,h+g,c,h+g-w),a==="center"&&o==="left"&&this.drawCaret(t,e,i,s),e.lineTo(c,h+b),e.quadraticCurveTo(c,h,c+b,h),e.closePath(),e.fill(),s.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,i=this.$animations,s=i&&i.x,o=i&&i.y;if(s||o){const a=jn[t.position].call(this,this._active,this._eventPosition);if(!a)return;const c=this._size=la(this,t),h=Object.assign({},a,this._size),d=ca(e,t,h),g=ua(t,h,d,e);(s._to!==g.x||o._to!==g.y)&&(this.xAlign=d.xAlign,this.yAlign=d.yAlign,this.width=c.width,this.height=c.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,g))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(e);const s={width:this.width,height:this.height},o={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const a=Zt(e.padding),c=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&c&&(t.save(),t.globalAlpha=i,this.drawBackground(o,t,s,e),Wa(t,e.textDirection),o.y+=a.top,this.drawTitle(o,t,e),this.drawBody(o,t,e),this.drawFooter(o,t,e),Ka(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const i=this._active,s=t.map(({datasetIndex:c,index:h})=>{const d=this.chart.getDatasetMeta(c);if(!d)throw new Error("Cannot find a dataset at index "+c);return{datasetIndex:c,element:d.data[h],index:h}}),o=!qi(i,s),a=this._positionChanged(s,e);(o||a)&&(this._active=s,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,i=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,o=this._active||[],a=this._getActiveElements(t,o,e,i),c=this._positionChanged(a,t),h=e||!qi(a,o)||c;return h&&(this._active=a,(s.enabled||s.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),h}_getActiveElements(t,e,i,s){const o=this.options;if(t.type==="mouseout")return[];if(!s)return e.filter(c=>this.chart.data.datasets[c.datasetIndex]&&this.chart.getDatasetMeta(c.datasetIndex).controller.getParsed(c.index)!==void 0);const a=this.chart.getElementsAtEventForMode(t,o.mode,o,i);return o.reverse&&a.reverse(),a}_positionChanged(t,e){const{caretX:i,caretY:s,options:o}=this,a=jn[o.position].call(this,t,e);return a!==!1&&(i!==a.x||s!==a.y)}}ot(ar,"positioners",jn);var jf={id:"tooltip",_element:ar,positioners:jn,afterInit(n,t,e){e&&(n.tooltip=new ar({chart:n,options:e}))},beforeUpdate(n,t,e){n.tooltip&&n.tooltip.initialize(e)},reset(n,t,e){n.tooltip&&n.tooltip.initialize(e)},afterDraw(n){const t=n.tooltip;if(t&&t._willRender()){const e={tooltip:t};if(n.notifyPlugins("beforeTooltipDraw",{...e,cancelable:!0})===!1)return;t.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",e)}},afterEvent(n,t){if(n.tooltip){const e=t.replay;n.tooltip.handleEvent(t.event,e,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,t)=>t.bodyFont.size,boxWidth:(n,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:ol},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const Nf=(n,t,e,i)=>(typeof t=="string"?(e=n.push(t)-1,i.unshift({index:e,label:t})):isNaN(t)&&(e=null),e);function Hf(n,t,e,i){const s=n.indexOf(t);if(s===-1)return Nf(n,t,e,i);const o=n.lastIndexOf(t);return s!==o?e:s}const Wf=(n,t)=>n===null?null:Xt(Math.round(n),0,t);function da(n){const t=this.getLabels();return n>=0&&n<t.length?t[n]:n}class lr extends gn{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const i=this.getLabels();for(const{index:s,label:o}of e)i[s]===o&&i.splice(s,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(bt(t))return null;const i=this.getLabels();return e=isFinite(e)&&i[e]===t?e:Hf(i,t,ht(e,t),this._addedLabels),Wf(e,i.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:i,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(i=0),e||(s=this.getLabels().length-1)),this.min=i,this.max=s}buildTicks(){const t=this.min,e=this.max,i=this.options.offset,s=[];let o=this.getLabels();o=t===0&&e===o.length-1?o:o.slice(t,e+1),this._valueRange=Math.max(o.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let a=t;a<=e;a++)s.push({value:a});return s}getLabelForValue(t){return da.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}ot(lr,"id","category"),ot(lr,"defaults",{ticks:{callback:da}});function Kf(n,t){const e=[],{bounds:s,step:o,min:a,max:c,precision:h,count:d,maxTicks:g,maxDigits:b,includeBounds:v}=n,w=o||1,I=g-1,{min:T,max:R}=t,z=!bt(a),U=!bt(c),J=!bt(d),G=(R-T)/(b+1);let K=bo((R-T)/I/w)*w,Q,Y,Z,it;if(K<1e-14&&!z&&!U)return[{value:T},{value:R}];it=Math.ceil(R/K)-Math.floor(T/K),it>I&&(K=bo(it*K/I/w)*w),bt(h)||(Q=Math.pow(10,h),K=Math.ceil(K*Q)/Q),s==="ticks"?(Y=Math.floor(T/K)*K,Z=Math.ceil(R/K)*K):(Y=T,Z=R),z&&U&&o&&Mc((c-a)/o,K/1e3)?(it=Math.round(Math.min((c-a)/K,g)),K=(c-a)/it,Y=a,Z=c):J?(Y=z?a:Y,Z=U?c:Z,it=d-1,K=(Z-Y)/it):(it=(Z-Y)/K,Hn(it,Math.round(it),K/1e3)?it=Math.round(it):it=Math.ceil(it));const ft=Math.max(vo(K),vo(Y));Q=Math.pow(10,bt(h)?ft:h),Y=Math.round(Y*Q)/Q,Z=Math.round(Z*Q)/Q;let at=0;for(z&&(v&&Y!==a?(e.push({value:a}),Y<a&&at++,Hn(Math.round((Y+at*K)*Q)/Q,a,pa(a,G,n))&&at++):Y<a&&at++);at<it;++at){const ct=Math.round((Y+at*K)*Q)/Q;if(U&&ct>c)break;e.push({value:ct})}return U&&v&&Z!==c?e.length&&Hn(e[e.length-1].value,c,pa(c,G,n))?e[e.length-1].value=c:e.push({value:c}):(!U||Z===c)&&e.push({value:Z}),e}function pa(n,t,{horizontal:e,minRotation:i}){const s=Xe(i),o=(e?Math.sin(s):Math.cos(s))||.001,a=.75*t*(""+n).length;return Math.min(t/o,a)}class Vf extends gn{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return bt(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:i}=this.getUserBounds();let{min:s,max:o}=this;const a=h=>s=e?s:h,c=h=>o=i?o:h;if(t){const h=fn(s),d=fn(o);h<0&&d<0?c(0):h>0&&d>0&&a(0)}if(s===o){let h=o===0?1:Math.abs(o*.05);c(o+h),t||a(s-h)}this.min=s,this.max=o}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:e,stepSize:i}=t,s;return i?(s=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),e=e||11),e&&(s=Math.min(e,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let i=this.getTickLimit();i=Math.max(2,i);const s={maxTicks:i,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:e.includeBounds!==!1},o=this._range||this,a=Kf(s,o);return t.bounds==="ticks"&&Dc(a,this,"value"),t.reverse?(a.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),a}configure(){const t=this.ticks;let e=this.min,i=this.max;if(super.configure(),this.options.offset&&t.length){const s=(i-e)/Math.max(t.length-1,1)/2;e-=s,i+=s}this._startValue=e,this._endValue=i,this._valueRange=i-e}getLabelForValue(t){return Ia(t,this.chart.options.locale,this.options.ticks.format)}}class cr extends Vf{determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=Qt(t)?t:0,this.max=Qt(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,i=Xe(this.options.ticks.minRotation),s=(t?Math.sin(i):Math.cos(i))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,o.lineHeight/s))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}ot(cr,"id","linear"),ot(cr,"defaults",{ticks:{callback:Ra.formatters.numeric}});const ns={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Ht=Object.keys(ns);function ga(n,t){return n-t}function ma(n,t){if(bt(t))return null;const e=n._adapter,{parser:i,round:s,isoWeekday:o}=n._parseOpts;let a=t;return typeof i=="function"&&(a=i(a)),Qt(a)||(a=typeof i=="string"?e.parse(a,i):e.parse(a)),a===null?null:(s&&(a=s==="week"&&(Yn(o)||o===!0)?e.startOf(a,"isoWeek",o):e.startOf(a,s)),+a)}function ya(n,t,e,i){const s=Ht.length;for(let o=Ht.indexOf(n);o<s-1;++o){const a=ns[Ht[o]],c=a.steps?a.steps:Number.MAX_SAFE_INTEGER;if(a.common&&Math.ceil((e-t)/(c*a.size))<=i)return Ht[o]}return Ht[s-1]}function qf(n,t,e,i,s){for(let o=Ht.length-1;o>=Ht.indexOf(e);o--){const a=Ht[o];if(ns[a].common&&n._adapter.diff(s,i,a)>=t-1)return a}return Ht[e?Ht.indexOf(e):0]}function $f(n){for(let t=Ht.indexOf(n)+1,e=Ht.length;t<e;++t)if(ns[Ht[t]].common)return Ht[t]}function ba(n,t,e){if(!e)n[t]=!0;else if(e.length){const{lo:i,hi:s}=gr(e,t),o=e[i]>=t?e[i]:e[s];n[o]=!0}}function Uf(n,t,e,i){const s=n._adapter,o=+s.startOf(t[0].value,i),a=t[t.length-1].value;let c,h;for(c=o;c<=a;c=+s.add(c,1,i))h=e[c],h>=0&&(t[h].major=!0);return t}function va(n,t,e){const i=[],s={},o=t.length;let a,c;for(a=0;a<o;++a)c=t[a],s[c]=a,i.push({value:c,major:!1});return o===0||!e?i:Uf(n,i,s,e)}class Zi extends gn{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const i=t.time||(t.time={}),s=this._adapter=new rh._date(t.adapters.date);s.init(e),Nn(i.displayFormats,s.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return t===void 0?null:ma(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,i=t.time.unit||"day";let{min:s,max:o,minDefined:a,maxDefined:c}=this.getUserBounds();function h(d){!a&&!isNaN(d.min)&&(s=Math.min(s,d.min)),!c&&!isNaN(d.max)&&(o=Math.max(o,d.max))}(!a||!c)&&(h(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&h(this.getMinMax(!1))),s=Qt(s)&&!isNaN(s)?s:+e.startOf(Date.now(),i),o=Qt(o)&&!isNaN(o)?o:+e.endOf(Date.now(),i)+1,this.min=Math.min(s,o-1),this.max=Math.max(s+1,o)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],i=t[t.length-1]),{min:e,max:i}}buildTicks(){const t=this.options,e=t.time,i=t.ticks,s=i.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const o=this.min,a=this.max,c=Rc(s,o,a);return this._unit=e.unit||(i.autoSkip?ya(e.minUnit,this.min,this.max,this._getLabelCapacity(o)):qf(this,c.length,e.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:$f(this._unit),this.initOffsets(s),t.reverse&&c.reverse(),va(this,c,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let e=0,i=0,s,o;this.options.offset&&t.length&&(s=this.getDecimalForValue(t[0]),t.length===1?e=1-s:e=(this.getDecimalForValue(t[1])-s)/2,o=this.getDecimalForValue(t[t.length-1]),t.length===1?i=o:i=(o-this.getDecimalForValue(t[t.length-2]))/2);const a=t.length<3?.5:.25;e=Xt(e,0,a),i=Xt(i,0,a),this._offsets={start:e,end:i,factor:1/(e+1+i)}}_generate(){const t=this._adapter,e=this.min,i=this.max,s=this.options,o=s.time,a=o.unit||ya(o.minUnit,e,i,this._getLabelCapacity(e)),c=ht(s.ticks.stepSize,1),h=a==="week"?o.isoWeekday:!1,d=Yn(h)||h===!0,g={};let b=e,v,w;if(d&&(b=+t.startOf(b,"isoWeek",h)),b=+t.startOf(b,d?"day":a),t.diff(i,e,a)>1e5*c)throw new Error(e+" and "+i+" are too far apart with stepSize of "+c+" "+a);const I=s.ticks.source==="data"&&this.getDataTimestamps();for(v=b,w=0;v<i;v=+t.add(v,c,a),w++)ba(g,v,I);return(v===i||s.bounds==="ticks"||w===1)&&ba(g,v,I),Object.keys(g).sort(ga).map(T=>+T)}getLabelForValue(t){const e=this._adapter,i=this.options.time;return i.tooltipFormat?e.format(t,i.tooltipFormat):e.format(t,i.displayFormats.datetime)}format(t,e){const s=this.options.time.displayFormats,o=this._unit,a=e||s[o];return this._adapter.format(t,a)}_tickFormatFunction(t,e,i,s){const o=this.options,a=o.ticks.callback;if(a)return _t(a,[t,e,i],this);const c=o.time.displayFormats,h=this._unit,d=this._majorUnit,g=h&&c[h],b=d&&c[d],v=i[e],w=d&&b&&v&&v.major;return this._adapter.format(t,s||(w?b:g))}generateTickLabels(t){let e,i,s;for(e=0,i=t.length;e<i;++e)s=t[e],s.label=this._tickFormatFunction(s.value,e,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+i)*e.factor)}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,i=this.ctx.measureText(t).width,s=Xe(this.isHorizontal()?e.maxRotation:e.minRotation),o=Math.cos(s),a=Math.sin(s),c=this._resolveTickFontOptions(0).size;return{w:i*o+c*a,h:i*a+c*o}}_getLabelCapacity(t){const e=this.options.time,i=e.displayFormats,s=i[e.unit]||i.millisecond,o=this._tickFormatFunction(t,0,va(this,[t],this._majorUnit),s),a=this._getLabelSize(o),c=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return c>0?c:1}getDataTimestamps(){let t=this._cache.data||[],e,i;if(t.length)return t;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(e=0,i=s.length;e<i;++e)t=t.concat(s[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let e,i;if(t.length)return t;const s=this.getLabels();for(e=0,i=s.length;e<i;++e)t.push(ma(this,s[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return Bc(t.sort(ga))}}ot(Zi,"id","time"),ot(Zi,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function ji(n,t,e){let i=0,s=n.length-1,o,a,c,h;e?(t>=n[i].pos&&t<=n[s].pos&&({lo:i,hi:s}=Ge(n,"pos",t)),{pos:o,time:c}=n[i],{pos:a,time:h}=n[s]):(t>=n[i].time&&t<=n[s].time&&({lo:i,hi:s}=Ge(n,"time",t)),{time:o,pos:c}=n[i],{time:a,pos:h}=n[s]);const d=a-o;return d?c+(h-c)*(t-o)/d:c}class _a extends Zi{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=ji(e,this.min),this._tableRange=ji(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:i}=this,s=[],o=[];let a,c,h,d,g;for(a=0,c=t.length;a<c;++a)d=t[a],d>=e&&d<=i&&s.push(d);if(s.length<2)return[{time:e,pos:0},{time:i,pos:1}];for(a=0,c=s.length;a<c;++a)g=s[a+1],h=s[a-1],d=s[a],Math.round((g+h)/2)!==d&&o.push({time:d,pos:a/(c-1)});return o}_generate(){const t=this.min,e=this.max;let i=super.getDataTimestamps();return(!i.includes(t)||!i.length)&&i.splice(0,0,t),(!i.includes(e)||i.length===1)&&i.push(e),i.sort((s,o)=>s-o)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),i=this.getLabelTimestamps();return e.length&&i.length?t=this.normalize(e.concat(i)):t=e.length?e:i,t=this._cache.all=t,t}getDecimalForValue(t){return(ji(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return ji(this._table,i*this._tableRange+this._minPos,!0)}}ot(_a,"id","timeseries"),ot(_a,"defaults",Zi.defaults);ye.register(lr,cr,Ki,zn,Ni,Tf,jf,Cf);let te=null;function Yf(){Xf();const n=document.getElementById("chart-canvas").getContext("2d");te=new ye(n,{type:"line",data:{labels:[],datasets:[{label:"Systolic",data:[],borderColor:"#dc3545",backgroundColor:"rgba(220, 53, 69, 0.1)",tension:.1,hidden:!1},{label:"Diastolic",data:[],borderColor:"#007bff",backgroundColor:"rgba(0, 123, 255, 0.1)",tension:.1,hidden:!1},{label:"Pulse",data:[],borderColor:"#28a745",backgroundColor:"rgba(40, 167, 69, 0.1)",tension:.1,hidden:!1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!1},legend:{display:!1}},scales:{y:{type:"linear",display:!0,position:"left",title:{display:!0,text:"mmHg"}},y1:{type:"linear",display:!0,position:"right",title:{display:!0,text:"bpm"},grid:{drawOnChartArea:!1}},x:{title:{display:!0,text:"Date"}}}}}),Gf()}function Xf(){const n=document.querySelector(".history");if(!document.getElementById("charts-section")){const t=document.createElement("div");t.id="charts-section",t.className="charts",t.innerHTML=`
      <div class="chart-filters">
        <span class="filter-label active" data-dataset="0">Systolic</span>
        <span class="filter-label active" data-dataset="1">Diastolic</span>
        <span class="filter-label active" data-dataset="2">Pulse</span>
      </div>
      <div id="insufficient-data" class="insufficient-data" style="display: none;">
        <p>Add at least 2 readings to see trend charts</p>
      </div>
      <div class="chart-container">
        <canvas id="chart-canvas"></canvas>
      </div>
    `,n.parentNode.insertBefore(t,n)}}function Gf(){document.querySelectorAll(".filter-label").forEach(t=>{t.addEventListener("click",e=>{const i=parseInt(e.target.dataset.dataset),s=e.target.classList.contains("active");e.target.classList.toggle("active"),te&&te.data.datasets[i]&&(te.data.datasets[i].hidden=s,te.update("active"),console.log(`Dataset ${i} visibility:`,!s))})})}function Gs(n){console.log("Updating charts with",n.length,"readings");const t=document.getElementById("insufficient-data"),e=document.querySelector(".chart-container"),i=document.querySelector(".chart-filters");if(n.length<2){console.log("Insufficient data for charts"),t.style.display="block",e&&(e.style.display="none"),i&&(i.style.display="none");return}t.style.display="none",e&&(e.style.display="block"),i&&(i.style.display="flex");const s=[...n].reverse(),o=s.map(d=>new Date(d.date).toLocaleDateString()),a=s.map(d=>d.systolic),c=s.map(d=>d.diastolic),h=s.map(d=>d.pulse);te&&(te.data.labels=o,te.data.datasets[0].data=a,te.data.datasets[1].data=c,te.data.datasets[2].data=h,te.update(),console.log("Combined chart updated"))}function Qf(n,t,e){const i=ka(n,t),s=Ul(e),o=document.getElementById("status");o.className="status "+i.class,o.innerHTML=`
    <strong>${i.text}</strong><br>
    ${n}/${t} mmHg<br>
    Pulse: ${e} bpm (${s})
  `}async function is(){try{const n=await wa(),t=document.getElementById("history");if(n.length===0){t.innerHTML="<p>No readings yet</p>",Gs([]);return}t.innerHTML=n.map((e,i)=>{const s=new Date(e.date),o=ka(e.systolic,e.diastolic);return`
          <div class="entry">
            <div>
              <strong>${e.systolic}/${e.diastolic}</strong> mmHg, ${e.pulse} bpm<br>
              <small>${s.toLocaleDateString()} ${s.toLocaleTimeString()}</small>
            </div>
            <button class="delete" onclick="window.deleteReadingHandler(${i})">Delete</button>
          </div>
        `}).join(""),Gs(n)}catch(n){console.error("Error loading history:",n),document.getElementById("history").innerHTML="<p>Error loading readings</p>",Gs([])}}async function Zf(n){try{await $l(n),await is()}catch(t){console.error("Error deleting reading:",t),alert("Error deleting reading. Please try again.")}}const Jf={systolic:{ranges:[{min:0,max:120,class:"normal"},{min:120,max:130,class:"elevated"},{min:130,max:140,class:"high1"},{min:140,max:180,class:"high2"},{min:180,max:250,class:"crisis"}],totalRange:{min:0,max:250}},diastolic:{ranges:[{min:0,max:80,class:"normal"},{min:80,max:90,class:"high1"},{min:90,max:120,class:"high2"},{min:120,max:150,class:"crisis"}],totalRange:{min:0,max:150}},pulse:{ranges:[{min:30,max:60,class:"low"},{min:60,max:100,class:"normal"},{min:100,max:200,class:"high"}],totalRange:{min:30,max:200}}};function td(n,t){const{min:e,max:i}=t.totalRange;return(Math.max(e,Math.min(i,n))-e)/(i-e)*100}function Qs(n,t){const e=document.getElementById(`${n}-indicator`),i=Jf[n];if(!e||!i||!t||isNaN(t)){e==null||e.classList.remove("active");return}const s=td(t,i);e.style.left=`${s}%`,e.classList.add("active")}function ed(){const n=document.getElementById("systolic"),t=document.getElementById("diastolic"),e=document.getElementById("pulse");n&&n.addEventListener("input",i=>{Qs("systolic",parseInt(i.target.value))}),t&&t.addEventListener("input",i=>{Qs("diastolic",parseInt(i.target.value))}),e&&e.addEventListener("input",i=>{Qs("pulse",parseInt(i.target.value))}),console.log("Visual scales initialized")}function nd(){["systolic-indicator","diastolic-indicator","pulse-indicator"].forEach(t=>{const e=document.getElementById(t);e&&e.classList.remove("active")})}let un,Zn=!1;function id(){window.matchMedia("(display-mode: standalone)").matches&&(Zn=!0,console.log("PWA: App is running in standalone mode")),window.navigator.standalone===!0&&(Zn=!0,console.log("PWA: App is running as PWA on iOS"))}async function sd(){if("serviceWorker"in navigator)try{console.log("PWA: Registering service worker...");const n=await navigator.serviceWorker.register("/blood-pressure-tracker/service-worker.js");return console.log("PWA: Service worker registered successfully",n),n.addEventListener("updatefound",()=>{const t=n.installing;console.log("PWA: New service worker found"),t.addEventListener("statechange",()=>{t.state==="installed"&&navigator.serviceWorker.controller&&(console.log("PWA: New service worker installed, update available"),rd(n))})}),n}catch(n){return console.error("PWA: Service worker registration failed",n),null}else return console.log("PWA: Service workers not supported"),null}function rd(n){console.log("PWA: Auto-updating to new version"),n.waiting&&(n.waiting.postMessage({type:"SKIP_WAITING"}),setTimeout(()=>{window.location.reload()},100))}function od(){id(),window.addEventListener("beforeinstallprompt",n=>{console.log("PWA: Install prompt available"),n.preventDefault(),un=n,ad()}),window.addEventListener("appinstalled",()=>{console.log("PWA: App was installed"),Zn=!0,al(),un=null})}function ad(){if(Zn)return;const n=document.getElementById("install-app-btn");if(n){n.style.display="inline-block";const t=n.cloneNode(!0);n.parentNode.replaceChild(t,n),t.addEventListener("click",async()=>{if(un){console.log("PWA: Showing install prompt"),un.prompt();const{outcome:e}=await un.userChoice;console.log("PWA: Install prompt result:",e),un=null,al()}})}}function al(){const n=document.getElementById("install-app-btn");n&&(n.style.display="none")}function ld(){console.log("PWA: Initializing PWA features"),sd(),od(),Zn&&document.body.classList.add("pwa-installed")}function cd(){return navigator.onLine}function ud(){window.addEventListener("online",()=>{console.log("PWA: App is online"),document.body.classList.remove("offline")}),window.addEventListener("offline",()=>{console.log("PWA: App is offline"),document.body.classList.add("offline")}),cd()||document.body.classList.add("offline")}async function hd(){{console.log("Dummy data generation skipped in production");return}}window.addReading=fd;window.deleteReadingHandler=Zf;window.generateDummyDataHandler=dd;async function fd(){console.log("Adding reading...");const n=parseInt(document.getElementById("systolic").value),t=parseInt(document.getElementById("diastolic").value),e=parseInt(document.getElementById("pulse").value);if(console.log("Input values:",{sys:n,dia:t,pulse:e}),!n||!t||!e){alert("Please enter all three values"),console.log("Validation failed: missing values");return}const i={systolic:n,diastolic:t,pulse:e,date:new Date().toISOString()};try{console.log("Saving reading:",i),await ql(i),document.getElementById("systolic").value="",document.getElementById("diastolic").value="",document.getElementById("pulse").value="",nd(),console.log("Updating UI..."),Qf(n,t,e),await is(),console.log("Reading added successfully")}catch(s){console.error("Error saving reading:",s),alert("Error saving reading. Please try again.")}}async function dd(){console.log("Generating dummy data...");try{const n=await hd();await is(),alert(`Successfully added ${n} dummy readings for development testing!`),console.log("Dummy data generation completed")}catch(n){console.error("Error generating dummy data:",n),alert("Error generating dummy data. Check console for details.")}}document.addEventListener("DOMContentLoaded",async()=>{console.log("Blood Pressure Tracker initialized"),ld(),ud(),ed(),Yf(),await is()});
