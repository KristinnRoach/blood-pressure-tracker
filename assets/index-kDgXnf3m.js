var sc=Object.defineProperty;var rc=(n,t,e)=>t in n?sc(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var ot=(n,t,e)=>rc(n,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function e(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=e(s);fetch(s.href,r)}})();const oc="modulepreload",ac=function(n){return"/blood-pressure-tracker/"+n},_o={},_e=function(t,e,i){let s=Promise.resolve();if(e&&e.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),c=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(e.map(u=>{if(u=ac(u),u in _o)return;_o[u]=!0;const d=u.endsWith(".css"),p=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${p}`))return;const y=document.createElement("link");if(y.rel=d?"stylesheet":oc,d||(y.as="script"),y.crossOrigin="",y.href=u,c&&y.setAttribute("nonce",c),document.head.appendChild(y),d)return new Promise((v,_)=>{y.addEventListener("load",v),y.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${u}`)))})}))}function r(a){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=a,window.dispatchEvent(c),!c.defaultPrevented)throw a}return s.then(a=>{for(const c of a||[])c.status==="rejected"&&r(c.reason);return t().catch(r)})};var xo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function lc(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Ra={exports:{}};(function(n,t){(function(e,i){n.exports=i()})(xo,function(){var e=function(o,l){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,f){h.__proto__=f}||function(h,f){for(var g in f)Object.prototype.hasOwnProperty.call(f,g)&&(h[g]=f[g])})(o,l)},i=function(){return(i=Object.assign||function(o){for(var l,h=1,f=arguments.length;h<f;h++)for(var g in l=arguments[h])Object.prototype.hasOwnProperty.call(l,g)&&(o[g]=l[g]);return o}).apply(this,arguments)};function s(o,l,h){for(var f,g=0,m=l.length;g<m;g++)!f&&g in l||((f=f||Array.prototype.slice.call(l,0,g))[g]=l[g]);return o.concat(f||Array.prototype.slice.call(l))}var r=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:xo,a=Object.keys,c=Array.isArray;function u(o,l){return typeof l!="object"||a(l).forEach(function(h){o[h]=l[h]}),o}typeof Promise>"u"||r.Promise||(r.Promise=Promise);var d=Object.getPrototypeOf,p={}.hasOwnProperty;function y(o,l){return p.call(o,l)}function v(o,l){typeof l=="function"&&(l=l(d(o))),(typeof Reflect>"u"?a:Reflect.ownKeys)(l).forEach(function(h){C(o,h,l[h])})}var _=Object.defineProperty;function C(o,l,h,f){_(o,l,u(h&&y(h,"get")&&typeof h.get=="function"?{get:h.get,set:h.set,configurable:!0}:{value:h,configurable:!0,writable:!0},f))}function E(o){return{from:function(l){return o.prototype=Object.create(l.prototype),C(o.prototype,"constructor",o),{extend:v.bind(null,o.prototype)}}}}var P=Object.getOwnPropertyDescriptor,B=[].slice;function H(o,l,h){return B.call(o,l,h)}function Y(o,l){return l(o)}function j(o){if(!o)throw new Error("Assertion Failed")}function N(o){r.setImmediate?setImmediate(o):setTimeout(o,0)}function Q(o,l){if(typeof l=="string"&&y(o,l))return o[l];if(!l)return o;if(typeof l!="string"){for(var h=[],f=0,g=l.length;f<g;++f){var m=Q(o,l[f]);h.push(m)}return h}var b=l.indexOf(".");if(b!==-1){var x=o[l.substr(0,b)];return x==null?void 0:Q(x,l.substr(b+1))}}function $(o,l,h){if(o&&l!==void 0&&!("isFrozen"in Object&&Object.isFrozen(o)))if(typeof l!="string"&&"length"in l){j(typeof h!="string"&&"length"in h);for(var f=0,g=l.length;f<g;++f)$(o,l[f],h[f])}else{var m,b,x=l.indexOf(".");x!==-1?(m=l.substr(0,x),(b=l.substr(x+1))===""?h===void 0?c(o)&&!isNaN(parseInt(m))?o.splice(m,1):delete o[m]:o[m]=h:$(x=!(x=o[m])||!y(o,m)?o[m]={}:x,b,h)):h===void 0?c(o)&&!isNaN(parseInt(l))?o.splice(l,1):delete o[l]:o[l]=h}}function U(o){var l,h={};for(l in o)y(o,l)&&(h[l]=o[l]);return h}var nt=[].concat;function ct(o){return nt.apply([],o)}var Fe="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(ct([8,16,32,64].map(function(o){return["Int","Uint","Float"].map(function(l){return l+o+"Array"})}))).filter(function(o){return r[o]}),at=new Set(Fe.map(function(o){return r[o]})),ut=null;function wt(o){return ut=new WeakMap,o=function l(h){if(!h||typeof h!="object")return h;var f=ut.get(h);if(f)return f;if(c(h)){f=[],ut.set(h,f);for(var g=0,m=h.length;g<m;++g)f.push(l(h[g]))}else if(at.has(h.constructor))f=h;else{var b,x=d(h);for(b in f=x===Object.prototype?{}:Object.create(x),ut.set(h,f),h)y(h,b)&&(f[b]=l(h[b]))}return f}(o),ut=null,o}var $t={}.toString;function vt(o){return $t.call(o).slice(8,-1)}var kt=typeof Symbol<"u"?Symbol.iterator:"@@iterator",zt=typeof kt=="symbol"?function(o){var l;return o!=null&&(l=o[kt])&&l.apply(o)}:function(){return null};function Vt(o,l){return l=o.indexOf(l),0<=l&&o.splice(l,1),0<=l}var te={};function At(o){var l,h,f,g;if(arguments.length===1){if(c(o))return o.slice();if(this===te&&typeof o=="string")return[o];if(g=zt(o)){for(h=[];!(f=g.next()).done;)h.push(f.value);return h}if(o==null)return[o];if(typeof(l=o.length)!="number")return[o];for(h=new Array(l);l--;)h[l]=o[l];return h}for(l=arguments.length,h=new Array(l);l--;)h[l]=arguments[l];return h}var we=typeof Symbol<"u"?function(o){return o[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},kn=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Ut=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(kn),ke={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function qt(o,l){this.name=o,this.message=l}function ie(o,l){return o+". Errors: "+Object.keys(l).map(function(h){return l[h].toString()}).filter(function(h,f,g){return g.indexOf(h)===f}).join(`
`)}function se(o,l,h,f){this.failures=l,this.failedKeys=f,this.successCount=h,this.message=ie(o,l)}function jt(o,l){this.name="BulkError",this.failures=Object.keys(l).map(function(h){return l[h]}),this.failuresByPos=l,this.message=ie(o,this.failures)}E(qt).from(Error).extend({toString:function(){return this.name+": "+this.message}}),E(se).from(qt),E(jt).from(qt);var ds=Ut.reduce(function(o,l){return o[l]=l+"Error",o},{}),Ol=qt,et=Ut.reduce(function(o,l){var h=l+"Error";function f(g,m){this.name=h,g?typeof g=="string"?(this.message="".concat(g).concat(m?`
 `+m:""),this.inner=m||null):typeof g=="object"&&(this.message="".concat(g.name," ").concat(g.message),this.inner=g):(this.message=ke[l]||h,this.inner=null)}return E(f).from(Ol),o[l]=f,o},{});et.Syntax=SyntaxError,et.Type=TypeError,et.Range=RangeError;var Fr=kn.reduce(function(o,l){return o[l+"Error"]=et[l],o},{}),ci=Ut.reduce(function(o,l){return["Syntax","Type","Range"].indexOf(l)===-1&&(o[l+"Error"]=et[l]),o},{});function mt(){}function xn(o){return o}function Dl(o,l){return o==null||o===xn?l:function(h){return l(o(h))}}function Be(o,l){return function(){o.apply(this,arguments),l.apply(this,arguments)}}function El(o,l){return o===mt?l:function(){var h=o.apply(this,arguments);h!==void 0&&(arguments[0]=h);var f=this.onsuccess,g=this.onerror;this.onsuccess=null,this.onerror=null;var m=l.apply(this,arguments);return f&&(this.onsuccess=this.onsuccess?Be(f,this.onsuccess):f),g&&(this.onerror=this.onerror?Be(g,this.onerror):g),m!==void 0?m:h}}function Cl(o,l){return o===mt?l:function(){o.apply(this,arguments);var h=this.onsuccess,f=this.onerror;this.onsuccess=this.onerror=null,l.apply(this,arguments),h&&(this.onsuccess=this.onsuccess?Be(h,this.onsuccess):h),f&&(this.onerror=this.onerror?Be(f,this.onerror):f)}}function Al(o,l){return o===mt?l:function(h){var f=o.apply(this,arguments);u(h,f);var g=this.onsuccess,m=this.onerror;return this.onsuccess=null,this.onerror=null,h=l.apply(this,arguments),g&&(this.onsuccess=this.onsuccess?Be(g,this.onsuccess):g),m&&(this.onerror=this.onerror?Be(m,this.onerror):m),f===void 0?h===void 0?void 0:h:u(f,h)}}function Tl(o,l){return o===mt?l:function(){return l.apply(this,arguments)!==!1&&o.apply(this,arguments)}}function fs(o,l){return o===mt?l:function(){var h=o.apply(this,arguments);if(h&&typeof h.then=="function"){for(var f=this,g=arguments.length,m=new Array(g);g--;)m[g]=arguments[g];return h.then(function(){return l.apply(f,m)})}return l.apply(this,arguments)}}ci.ModifyError=se,ci.DexieError=qt,ci.BulkError=jt;var re=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function zr(o){re=o}var wn={},jr=100,Fe=typeof Promise>"u"?[]:function(){var o=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[o,d(o),o];var l=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[l,d(l),o]}(),kn=Fe[0],Ut=Fe[1],Fe=Fe[2],Ut=Ut&&Ut.then,ze=kn&&kn.constructor,ps=!!Fe,Sn=function(o,l){Mn.push([o,l]),ui&&(queueMicrotask(Rl),ui=!1)},gs=!0,ui=!0,je=[],hi=[],ms=xn,Se={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:mt,pgp:!1,env:{},finalize:mt},tt=Se,Mn=[],Ne=0,di=[];function J(o){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var l=this._PSD=tt;if(typeof o!="function"){if(o!==wn)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&bs(this,this._value))}this._state=null,this._value=null,++l.ref,function h(f,g){try{g(function(m){if(f._state===null){if(m===f)throw new TypeError("A promise cannot be resolved with itself.");var b=f._lib&&rn();m&&typeof m.then=="function"?h(f,function(x,k){m instanceof J?m._then(x,k):m.then(x,k)}):(f._state=!0,f._value=m,Hr(f)),b&&on()}},bs.bind(null,f))}catch(m){bs(f,m)}}(this,o)}var ys={get:function(){var o=tt,l=mi;function h(f,g){var m=this,b=!o.global&&(o!==tt||l!==mi),x=b&&!Pe(),k=new J(function(S,A){vs(m,new Nr(Wr(f,o,b,x),Wr(g,o,b,x),S,A,o))});return this._consoleTask&&(k._consoleTask=this._consoleTask),k}return h.prototype=wn,h},set:function(o){C(this,"then",o&&o.prototype===wn?ys:{get:function(){return o},set:ys.set})}};function Nr(o,l,h,f,g){this.onFulfilled=typeof o=="function"?o:null,this.onRejected=typeof l=="function"?l:null,this.resolve=h,this.reject=f,this.psd=g}function bs(o,l){var h,f;hi.push(l),o._state===null&&(h=o._lib&&rn(),l=ms(l),o._state=!1,o._value=l,f=o,je.some(function(g){return g._value===f._value})||je.push(f),Hr(o),h&&on())}function Hr(o){var l=o._listeners;o._listeners=[];for(var h=0,f=l.length;h<f;++h)vs(o,l[h]);var g=o._PSD;--g.ref||g.finalize(),Ne===0&&(++Ne,Sn(function(){--Ne==0&&_s()},[]))}function vs(o,l){if(o._state!==null){var h=o._state?l.onFulfilled:l.onRejected;if(h===null)return(o._state?l.resolve:l.reject)(o._value);++l.psd.ref,++Ne,Sn(Il,[h,o,l])}else o._listeners.push(l)}function Il(o,l,h){try{var f,g=l._value;!l._state&&hi.length&&(hi=[]),f=re&&l._consoleTask?l._consoleTask.run(function(){return o(g)}):o(g),l._state||hi.indexOf(g)!==-1||function(m){for(var b=je.length;b;)if(je[--b]._value===m._value)return je.splice(b,1)}(l),h.resolve(f)}catch(m){h.reject(m)}finally{--Ne==0&&_s(),--h.psd.ref||h.psd.finalize()}}function Rl(){He(Se,function(){rn()&&on()})}function rn(){var o=gs;return ui=gs=!1,o}function on(){var o,l,h;do for(;0<Mn.length;)for(o=Mn,Mn=[],h=o.length,l=0;l<h;++l){var f=o[l];f[0].apply(null,f[1])}while(0<Mn.length);ui=gs=!0}function _s(){var o=je;je=[],o.forEach(function(f){f._PSD.onunhandled.call(null,f._value,f)});for(var l=di.slice(0),h=l.length;h;)l[--h]()}function fi(o){return new J(wn,!1,o)}function xt(o,l){var h=tt;return function(){var f=rn(),g=tt;try{return Oe(h,!0),o.apply(this,arguments)}catch(m){l&&l(m)}finally{Oe(g,!1),f&&on()}}}v(J.prototype,{then:ys,_then:function(o,l){vs(this,new Nr(null,null,o,l,tt))},catch:function(o){if(arguments.length===1)return this.then(null,o);var l=o,h=arguments[1];return typeof l=="function"?this.then(null,function(f){return(f instanceof l?h:fi)(f)}):this.then(null,function(f){return(f&&f.name===l?h:fi)(f)})},finally:function(o){return this.then(function(l){return J.resolve(o()).then(function(){return l})},function(l){return J.resolve(o()).then(function(){return fi(l)})})},timeout:function(o,l){var h=this;return o<1/0?new J(function(f,g){var m=setTimeout(function(){return g(new et.Timeout(l))},o);h.then(f,g).finally(clearTimeout.bind(null,m))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&C(J.prototype,Symbol.toStringTag,"Dexie.Promise"),Se.env=Kr(),v(J,{all:function(){var o=At.apply(null,arguments).map(yi);return new J(function(l,h){o.length===0&&l([]);var f=o.length;o.forEach(function(g,m){return J.resolve(g).then(function(b){o[m]=b,--f||l(o)},h)})})},resolve:function(o){return o instanceof J?o:o&&typeof o.then=="function"?new J(function(l,h){o.then(l,h)}):new J(wn,!0,o)},reject:fi,race:function(){var o=At.apply(null,arguments).map(yi);return new J(function(l,h){o.map(function(f){return J.resolve(f).then(l,h)})})},PSD:{get:function(){return tt},set:function(o){return tt=o}},totalEchoes:{get:function(){return mi}},newPSD:Me,usePSD:He,scheduler:{get:function(){return Sn},set:function(o){Sn=o}},rejectionMapper:{get:function(){return ms},set:function(o){ms=o}},follow:function(o,l){return new J(function(h,f){return Me(function(g,m){var b=tt;b.unhandleds=[],b.onunhandled=m,b.finalize=Be(function(){var x,k=this;x=function(){k.unhandleds.length===0?g():m(k.unhandleds[0])},di.push(function S(){x(),di.splice(di.indexOf(S),1)}),++Ne,Sn(function(){--Ne==0&&_s()},[])},b.finalize),o()},l,h,f)})}}),ze&&(ze.allSettled&&C(J,"allSettled",function(){var o=At.apply(null,arguments).map(yi);return new J(function(l){o.length===0&&l([]);var h=o.length,f=new Array(h);o.forEach(function(g,m){return J.resolve(g).then(function(b){return f[m]={status:"fulfilled",value:b}},function(b){return f[m]={status:"rejected",reason:b}}).then(function(){return--h||l(f)})})})}),ze.any&&typeof AggregateError<"u"&&C(J,"any",function(){var o=At.apply(null,arguments).map(yi);return new J(function(l,h){o.length===0&&h(new AggregateError([]));var f=o.length,g=new Array(f);o.forEach(function(m,b){return J.resolve(m).then(function(x){return l(x)},function(x){g[b]=x,--f||h(new AggregateError(g))})})})}),ze.withResolvers&&(J.withResolvers=ze.withResolvers));var Ot={awaits:0,echoes:0,id:0},Ll=0,pi=[],gi=0,mi=0,Bl=0;function Me(o,l,h,f){var g=tt,m=Object.create(g);return m.parent=g,m.ref=0,m.global=!1,m.id=++Bl,Se.env,m.env=ps?{Promise:J,PromiseProp:{value:J,configurable:!0,writable:!0},all:J.all,race:J.race,allSettled:J.allSettled,any:J.any,resolve:J.resolve,reject:J.reject}:{},l&&u(m,l),++g.ref,m.finalize=function(){--this.parent.ref||this.parent.finalize()},f=He(m,o,h,f),m.ref===0&&m.finalize(),f}function an(){return Ot.id||(Ot.id=++Ll),++Ot.awaits,Ot.echoes+=jr,Ot.id}function Pe(){return!!Ot.awaits&&(--Ot.awaits==0&&(Ot.id=0),Ot.echoes=Ot.awaits*jr,!0)}function yi(o){return Ot.echoes&&o&&o.constructor===ze?(an(),o.then(function(l){return Pe(),l},function(l){return Pe(),St(l)})):o}function Fl(){var o=pi[pi.length-1];pi.pop(),Oe(o,!1)}function Oe(o,l){var h,f=tt;(l?!Ot.echoes||gi++&&o===tt:!gi||--gi&&o===tt)||queueMicrotask(l?(function(g){++mi,Ot.echoes&&--Ot.echoes!=0||(Ot.echoes=Ot.awaits=Ot.id=0),pi.push(tt),Oe(g,!0)}).bind(null,o):Fl),o!==tt&&(tt=o,f===Se&&(Se.env=Kr()),ps&&(h=Se.env.Promise,l=o.env,(f.global||o.global)&&(Object.defineProperty(r,"Promise",l.PromiseProp),h.all=l.all,h.race=l.race,h.resolve=l.resolve,h.reject=l.reject,l.allSettled&&(h.allSettled=l.allSettled),l.any&&(h.any=l.any))))}function Kr(){var o=r.Promise;return ps?{Promise:o,PromiseProp:Object.getOwnPropertyDescriptor(r,"Promise"),all:o.all,race:o.race,allSettled:o.allSettled,any:o.any,resolve:o.resolve,reject:o.reject}:{}}function He(o,l,h,f,g){var m=tt;try{return Oe(o,!0),l(h,f,g)}finally{Oe(m,!1)}}function Wr(o,l,h,f){return typeof o!="function"?o:function(){var g=tt;h&&an(),Oe(l,!0);try{return o.apply(this,arguments)}finally{Oe(g,!1),f&&queueMicrotask(Pe)}}}function xs(o){Promise===ze&&Ot.echoes===0?gi===0?o():enqueueNativeMicroTask(o):setTimeout(o,0)}(""+Ut).indexOf("[native code]")===-1&&(an=Pe=mt);var St=J.reject,Ke="ï¿¿",fe="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",$r="String expected.",ln=[],bi="__dbnames",ws="readonly",ks="readwrite";function We(o,l){return o?l?function(){return o.apply(this,arguments)&&l.apply(this,arguments)}:o:l}var Vr={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function vi(o){return typeof o!="string"||/\./.test(o)?function(l){return l}:function(l){return l[o]===void 0&&o in l&&delete(l=wt(l))[o],l}}function qr(){throw et.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function ht(o,l){try{var h=Ur(o),f=Ur(l);if(h!==f)return h==="Array"?1:f==="Array"?-1:h==="binary"?1:f==="binary"?-1:h==="string"?1:f==="string"?-1:h==="Date"?1:f!=="Date"?NaN:-1;switch(h){case"number":case"Date":case"string":return l<o?1:o<l?-1:0;case"binary":return function(g,m){for(var b=g.length,x=m.length,k=b<x?b:x,S=0;S<k;++S)if(g[S]!==m[S])return g[S]<m[S]?-1:1;return b===x?0:b<x?-1:1}(Yr(o),Yr(l));case"Array":return function(g,m){for(var b=g.length,x=m.length,k=b<x?b:x,S=0;S<k;++S){var A=ht(g[S],m[S]);if(A!==0)return A}return b===x?0:b<x?-1:1}(o,l)}}catch{}return NaN}function Ur(o){var l=typeof o;return l!="object"?l:ArrayBuffer.isView(o)?"binary":(o=vt(o),o==="ArrayBuffer"?"binary":o)}function Yr(o){return o instanceof Uint8Array?o:ArrayBuffer.isView(o)?new Uint8Array(o.buffer,o.byteOffset,o.byteLength):new Uint8Array(o)}function _i(o,l,h){var f=o.schema.yProps;return f?(l&&0<h.numFailures&&(l=l.filter(function(g,m){return!h.failures[m]})),Promise.all(f.map(function(g){return g=g.updatesTable,l?o.db.table(g).where("k").anyOf(l).delete():o.db.table(g).clear()})).then(function(){return h})):h}var Pn=(Xr.prototype.execute=function(o){var l=this["@@propmod"];if(l.add!==void 0){var h=l.add;if(c(h))return s(s([],c(o)?o:[],!0),h).sort();if(typeof h=="number")return(Number(o)||0)+h;if(typeof h=="bigint")try{return BigInt(o)+h}catch{return BigInt(0)+h}throw new TypeError("Invalid term ".concat(h))}if(l.remove!==void 0){var f=l.remove;if(c(f))return c(o)?o.filter(function(g){return!f.includes(g)}).sort():[];if(typeof f=="number")return Number(o)-f;if(typeof f=="bigint")try{return BigInt(o)-f}catch{return BigInt(0)-f}throw new TypeError("Invalid subtrahend ".concat(f))}return h=(h=l.replacePrefix)===null||h===void 0?void 0:h[0],h&&typeof o=="string"&&o.startsWith(h)?l.replacePrefix[1]+o.substring(h.length):o},Xr);function Xr(o){this["@@propmod"]=o}function Gr(o,l){for(var h=a(l),f=h.length,g=!1,m=0;m<f;++m){var b=h[m],x=l[b],k=Q(o,b);x instanceof Pn?($(o,b,x.execute(k)),g=!0):k!==x&&($(o,b,x),g=!0)}return g}var Qr=(yt.prototype._trans=function(o,l,h){var f=this._tx||tt.trans,g=this.name,m=re&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(o==="readonly"?"read":"write"," ").concat(this.name));function b(S,A,w){if(!w.schema[g])throw new et.NotFound("Table "+g+" not part of transaction");return l(w.idbtrans,w)}var x=rn();try{var k=f&&f.db._novip===this.db._novip?f===tt.trans?f._promise(o,b,h):Me(function(){return f._promise(o,b,h)},{trans:f,transless:tt.transless||tt}):function S(A,w,I,M){if(A.idbdb&&(A._state.openComplete||tt.letThrough||A._vip)){var O=A._createTransaction(w,I,A._dbSchema);try{O.create(),A._state.PR1398_maxLoop=3}catch(D){return D.name===ds.InvalidState&&A.isOpen()&&0<--A._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),A.close({disableAutoOpen:!1}),A.open().then(function(){return S(A,w,I,M)})):St(D)}return O._promise(w,function(D,T){return Me(function(){return tt.trans=O,M(D,T,O)})}).then(function(D){if(w==="readwrite")try{O.idbtrans.commit()}catch{}return w==="readonly"?D:O._completion.then(function(){return D})})}if(A._state.openComplete)return St(new et.DatabaseClosed(A._state.dbOpenError));if(!A._state.isBeingOpened){if(!A._state.autoOpen)return St(new et.DatabaseClosed);A.open().catch(mt)}return A._state.dbReadyPromise.then(function(){return S(A,w,I,M)})}(this.db,o,[this.name],b);return m&&(k._consoleTask=m,k=k.catch(function(S){return console.trace(S),St(S)})),k}finally{x&&on()}},yt.prototype.get=function(o,l){var h=this;return o&&o.constructor===Object?this.where(o).first(l):o==null?St(new et.Type("Invalid argument to Table.get()")):this._trans("readonly",function(f){return h.core.get({trans:f,key:o}).then(function(g){return h.hook.reading.fire(g)})}).then(l)},yt.prototype.where=function(o){if(typeof o=="string")return new this.db.WhereClause(this,o);if(c(o))return new this.db.WhereClause(this,"[".concat(o.join("+"),"]"));var l=a(o);if(l.length===1)return this.where(l[0]).equals(o[l[0]]);var h=this.schema.indexes.concat(this.schema.primKey).filter(function(x){if(x.compound&&l.every(function(S){return 0<=x.keyPath.indexOf(S)})){for(var k=0;k<l.length;++k)if(l.indexOf(x.keyPath[k])===-1)return!1;return!0}return!1}).sort(function(x,k){return x.keyPath.length-k.keyPath.length})[0];if(h&&this.db._maxKey!==Ke){var m=h.keyPath.slice(0,l.length);return this.where(m).equals(m.map(function(k){return o[k]}))}!h&&re&&console.warn("The query ".concat(JSON.stringify(o)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(l.join("+"),"]"));var f=this.schema.idxByName;function g(x,k){return ht(x,k)===0}var b=l.reduce(function(w,k){var S=w[0],A=w[1],w=f[k],I=o[k];return[S||w,S||!w?We(A,w&&w.multi?function(M){return M=Q(M,k),c(M)&&M.some(function(O){return g(I,O)})}:function(M){return g(I,Q(M,k))}):A]},[null,null]),m=b[0],b=b[1];return m?this.where(m.name).equals(o[m.keyPath]).filter(b):h?this.filter(b):this.where(l).equals("")},yt.prototype.filter=function(o){return this.toCollection().and(o)},yt.prototype.count=function(o){return this.toCollection().count(o)},yt.prototype.offset=function(o){return this.toCollection().offset(o)},yt.prototype.limit=function(o){return this.toCollection().limit(o)},yt.prototype.each=function(o){return this.toCollection().each(o)},yt.prototype.toArray=function(o){return this.toCollection().toArray(o)},yt.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},yt.prototype.orderBy=function(o){return new this.db.Collection(new this.db.WhereClause(this,c(o)?"[".concat(o.join("+"),"]"):o))},yt.prototype.reverse=function(){return this.toCollection().reverse()},yt.prototype.mapToClass=function(o){var l,h=this.db,f=this.name;function g(){return l!==null&&l.apply(this,arguments)||this}(this.schema.mappedClass=o).prototype instanceof qr&&(function(k,S){if(typeof S!="function"&&S!==null)throw new TypeError("Class extends value "+String(S)+" is not a constructor or null");function A(){this.constructor=k}e(k,S),k.prototype=S===null?Object.create(S):(A.prototype=S.prototype,new A)}(g,l=o),Object.defineProperty(g.prototype,"db",{get:function(){return h},enumerable:!1,configurable:!0}),g.prototype.table=function(){return f},o=g);for(var m=new Set,b=o.prototype;b;b=d(b))Object.getOwnPropertyNames(b).forEach(function(k){return m.add(k)});function x(k){if(!k)return k;var S,A=Object.create(o.prototype);for(S in k)if(!m.has(S))try{A[S]=k[S]}catch{}return A}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=x,this.hook("reading",x),o},yt.prototype.defineClass=function(){return this.mapToClass(function(o){u(this,o)})},yt.prototype.add=function(o,l){var h=this,f=this.schema.primKey,g=f.auto,m=f.keyPath,b=o;return m&&g&&(b=vi(m)(o)),this._trans("readwrite",function(x){return h.core.mutate({trans:x,type:"add",keys:l!=null?[l]:null,values:[b]})}).then(function(x){return x.numFailures?J.reject(x.failures[0]):x.lastResult}).then(function(x){if(m)try{$(o,m,x)}catch{}return x})},yt.prototype.upsert=function(o,l){var h=this,f=this.schema.primKey.keyPath;return this._trans("readwrite",function(g){return h.core.get({trans:g,key:o}).then(function(m){var b=m??{};return Gr(b,l),f&&$(b,f,o),h.core.mutate({trans:g,type:"put",values:[b],keys:[o],upsert:!0,updates:{keys:[o],changeSpecs:[l]}}).then(function(x){return x.numFailures?J.reject(x.failures[0]):!!m})})})},yt.prototype.update=function(o,l){return typeof o!="object"||c(o)?this.where(":id").equals(o).modify(l):(o=Q(o,this.schema.primKey.keyPath),o===void 0?St(new et.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(o).modify(l))},yt.prototype.put=function(o,l){var h=this,f=this.schema.primKey,g=f.auto,m=f.keyPath,b=o;return m&&g&&(b=vi(m)(o)),this._trans("readwrite",function(x){return h.core.mutate({trans:x,type:"put",values:[b],keys:l!=null?[l]:null})}).then(function(x){return x.numFailures?J.reject(x.failures[0]):x.lastResult}).then(function(x){if(m)try{$(o,m,x)}catch{}return x})},yt.prototype.delete=function(o){var l=this;return this._trans("readwrite",function(h){return l.core.mutate({trans:h,type:"delete",keys:[o]}).then(function(f){return _i(l,[o],f)}).then(function(f){return f.numFailures?J.reject(f.failures[0]):void 0})})},yt.prototype.clear=function(){var o=this;return this._trans("readwrite",function(l){return o.core.mutate({trans:l,type:"deleteRange",range:Vr}).then(function(h){return _i(o,null,h)})}).then(function(l){return l.numFailures?J.reject(l.failures[0]):void 0})},yt.prototype.bulkGet=function(o){var l=this;return this._trans("readonly",function(h){return l.core.getMany({keys:o,trans:h}).then(function(f){return f.map(function(g){return l.hook.reading.fire(g)})})})},yt.prototype.bulkAdd=function(o,l,h){var f=this,g=Array.isArray(l)?l:void 0,m=(h=h||(g?void 0:l))?h.allKeys:void 0;return this._trans("readwrite",function(b){var S=f.schema.primKey,x=S.auto,S=S.keyPath;if(S&&g)throw new et.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(g&&g.length!==o.length)throw new et.InvalidArgument("Arguments objects and keys must have the same length");var k=o.length,S=S&&x?o.map(vi(S)):o;return f.core.mutate({trans:b,type:"add",keys:g,values:S,wantResults:m}).then(function(O){var w=O.numFailures,I=O.results,M=O.lastResult,O=O.failures;if(w===0)return m?I:M;throw new jt("".concat(f.name,".bulkAdd(): ").concat(w," of ").concat(k," operations failed"),O)})})},yt.prototype.bulkPut=function(o,l,h){var f=this,g=Array.isArray(l)?l:void 0,m=(h=h||(g?void 0:l))?h.allKeys:void 0;return this._trans("readwrite",function(b){var S=f.schema.primKey,x=S.auto,S=S.keyPath;if(S&&g)throw new et.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(g&&g.length!==o.length)throw new et.InvalidArgument("Arguments objects and keys must have the same length");var k=o.length,S=S&&x?o.map(vi(S)):o;return f.core.mutate({trans:b,type:"put",keys:g,values:S,wantResults:m}).then(function(O){var w=O.numFailures,I=O.results,M=O.lastResult,O=O.failures;if(w===0)return m?I:M;throw new jt("".concat(f.name,".bulkPut(): ").concat(w," of ").concat(k," operations failed"),O)})})},yt.prototype.bulkUpdate=function(o){var l=this,h=this.core,f=o.map(function(b){return b.key}),g=o.map(function(b){return b.changes}),m=[];return this._trans("readwrite",function(b){return h.getMany({trans:b,keys:f,cache:"clone"}).then(function(x){var k=[],S=[];o.forEach(function(w,I){var M=w.key,O=w.changes,D=x[I];if(D){for(var T=0,R=Object.keys(O);T<R.length;T++){var L=R[T],F=O[L];if(L===l.schema.primKey.keyPath){if(ht(F,M)!==0)throw new et.Constraint("Cannot update primary key in bulkUpdate()")}else $(D,L,F)}m.push(I),k.push(M),S.push(D)}});var A=k.length;return h.mutate({trans:b,type:"put",keys:k,values:S,updates:{keys:f,changeSpecs:g}}).then(function(w){var I=w.numFailures,M=w.failures;if(I===0)return A;for(var O=0,D=Object.keys(M);O<D.length;O++){var T,R=D[O],L=m[Number(R)];L!=null&&(T=M[R],delete M[R],M[L]=T)}throw new jt("".concat(l.name,".bulkUpdate(): ").concat(I," of ").concat(A," operations failed"),M)})})})},yt.prototype.bulkDelete=function(o){var l=this,h=o.length;return this._trans("readwrite",function(f){return l.core.mutate({trans:f,type:"delete",keys:o}).then(function(g){return _i(l,o,g)})}).then(function(b){var g=b.numFailures,m=b.lastResult,b=b.failures;if(g===0)return m;throw new jt("".concat(l.name,".bulkDelete(): ").concat(g," of ").concat(h," operations failed"),b)})},yt);function yt(){}function On(o){function l(b,x){if(x){for(var k=arguments.length,S=new Array(k-1);--k;)S[k-1]=arguments[k];return h[b].subscribe.apply(null,S),o}if(typeof b=="string")return h[b]}var h={};l.addEventType=m;for(var f=1,g=arguments.length;f<g;++f)m(arguments[f]);return l;function m(b,x,k){if(typeof b!="object"){var S;x=x||Tl;var A={subscribers:[],fire:k=k||mt,subscribe:function(w){A.subscribers.indexOf(w)===-1&&(A.subscribers.push(w),A.fire=x(A.fire,w))},unsubscribe:function(w){A.subscribers=A.subscribers.filter(function(I){return I!==w}),A.fire=A.subscribers.reduce(x,k)}};return h[b]=l[b]=A}a(S=b).forEach(function(w){var I=S[w];if(c(I))m(w,S[w][0],S[w][1]);else{if(I!=="asap")throw new et.InvalidArgument("Invalid event config");var M=m(w,xn,function(){for(var O=arguments.length,D=new Array(O);O--;)D[O]=arguments[O];M.subscribers.forEach(function(T){N(function(){T.apply(null,D)})})})}})}}function Dn(o,l){return E(l).from({prototype:o}),l}function cn(o,l){return!(o.filter||o.algorithm||o.or)&&(l?o.justLimit:!o.replayFilter)}function Ss(o,l){o.filter=We(o.filter,l)}function Ms(o,l,h){var f=o.replayFilter;o.replayFilter=f?function(){return We(f(),l())}:l,o.justLimit=h&&!f}function xi(o,l){if(o.isPrimKey)return l.primaryKey;var h=l.getIndexByKeyPath(o.index);if(!h)throw new et.Schema("KeyPath "+o.index+" on object store "+l.name+" is not indexed");return h}function Jr(o,l,h){var f=xi(o,l.schema);return l.openCursor({trans:h,values:!o.keysOnly,reverse:o.dir==="prev",unique:!!o.unique,query:{index:f,range:o.range}})}function wi(o,l,h,f){var g=o.replayFilter?We(o.filter,o.replayFilter()):o.filter;if(o.or){var m={},b=function(x,k,S){var A,w;g&&!g(k,S,function(I){return k.stop(I)},function(I){return k.fail(I)})||((w=""+(A=k.primaryKey))=="[object ArrayBuffer]"&&(w=""+new Uint8Array(A)),y(m,w)||(m[w]=!0,l(x,k,S)))};return Promise.all([o.or._iterate(b,h),Zr(Jr(o,f,h),o.algorithm,b,!o.keysOnly&&o.valueMapper)])}return Zr(Jr(o,f,h),We(o.algorithm,g),l,!o.keysOnly&&o.valueMapper)}function Zr(o,l,h,f){var g=xt(f?function(m,b,x){return h(f(m),b,x)}:h);return o.then(function(m){if(m)return m.start(function(){var b=function(){return m.continue()};l&&!l(m,function(x){return b=x},function(x){m.stop(x),b=mt},function(x){m.fail(x),b=mt})||g(m.value,m,function(x){return b=x}),b()})})}var zl=(ft.prototype._read=function(o,l){var h=this._ctx;return h.error?h.table._trans(null,St.bind(null,h.error)):h.table._trans("readonly",o).then(l)},ft.prototype._write=function(o){var l=this._ctx;return l.error?l.table._trans(null,St.bind(null,l.error)):l.table._trans("readwrite",o,"locked")},ft.prototype._addAlgorithm=function(o){var l=this._ctx;l.algorithm=We(l.algorithm,o)},ft.prototype._iterate=function(o,l){return wi(this._ctx,o,l,this._ctx.table.core)},ft.prototype.clone=function(o){var l=Object.create(this.constructor.prototype),h=Object.create(this._ctx);return o&&u(h,o),l._ctx=h,l},ft.prototype.raw=function(){return this._ctx.valueMapper=null,this},ft.prototype.each=function(o){var l=this._ctx;return this._read(function(h){return wi(l,o,h,l.table.core)})},ft.prototype.count=function(o){var l=this;return this._read(function(h){var f=l._ctx,g=f.table.core;if(cn(f,!0))return g.count({trans:h,query:{index:xi(f,g.schema),range:f.range}}).then(function(b){return Math.min(b,f.limit)});var m=0;return wi(f,function(){return++m,!1},h,g).then(function(){return m})}).then(o)},ft.prototype.sortBy=function(o,l){var h=o.split(".").reverse(),f=h[0],g=h.length-1;function m(k,S){return S?m(k[h[S]],S-1):k[f]}var b=this._ctx.dir==="next"?1:-1;function x(k,S){return ht(m(k,g),m(S,g))*b}return this.toArray(function(k){return k.sort(x)}).then(l)},ft.prototype.toArray=function(o){var l=this;return this._read(function(h){var f=l._ctx;if(f.dir==="next"&&cn(f,!0)&&0<f.limit){var g=f.valueMapper,m=xi(f,f.table.core.schema);return f.table.core.query({trans:h,limit:f.limit,values:!0,query:{index:m,range:f.range}}).then(function(x){return x=x.result,g?x.map(g):x})}var b=[];return wi(f,function(x){return b.push(x)},h,f.table.core).then(function(){return b})},o)},ft.prototype.offset=function(o){var l=this._ctx;return o<=0||(l.offset+=o,cn(l)?Ms(l,function(){var h=o;return function(f,g){return h===0||(h===1?--h:g(function(){f.advance(h),h=0}),!1)}}):Ms(l,function(){var h=o;return function(){return--h<0}})),this},ft.prototype.limit=function(o){return this._ctx.limit=Math.min(this._ctx.limit,o),Ms(this._ctx,function(){var l=o;return function(h,f,g){return--l<=0&&f(g),0<=l}},!0),this},ft.prototype.until=function(o,l){return Ss(this._ctx,function(h,f,g){return!o(h.value)||(f(g),l)}),this},ft.prototype.first=function(o){return this.limit(1).toArray(function(l){return l[0]}).then(o)},ft.prototype.last=function(o){return this.reverse().first(o)},ft.prototype.filter=function(o){var l;return Ss(this._ctx,function(h){return o(h.value)}),(l=this._ctx).isMatch=We(l.isMatch,o),this},ft.prototype.and=function(o){return this.filter(o)},ft.prototype.or=function(o){return new this.db.WhereClause(this._ctx.table,o,this)},ft.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},ft.prototype.desc=function(){return this.reverse()},ft.prototype.eachKey=function(o){var l=this._ctx;return l.keysOnly=!l.isMatch,this.each(function(h,f){o(f.key,f)})},ft.prototype.eachUniqueKey=function(o){return this._ctx.unique="unique",this.eachKey(o)},ft.prototype.eachPrimaryKey=function(o){var l=this._ctx;return l.keysOnly=!l.isMatch,this.each(function(h,f){o(f.primaryKey,f)})},ft.prototype.keys=function(o){var l=this._ctx;l.keysOnly=!l.isMatch;var h=[];return this.each(function(f,g){h.push(g.key)}).then(function(){return h}).then(o)},ft.prototype.primaryKeys=function(o){var l=this._ctx;if(l.dir==="next"&&cn(l,!0)&&0<l.limit)return this._read(function(f){var g=xi(l,l.table.core.schema);return l.table.core.query({trans:f,values:!1,limit:l.limit,query:{index:g,range:l.range}})}).then(function(f){return f.result}).then(o);l.keysOnly=!l.isMatch;var h=[];return this.each(function(f,g){h.push(g.primaryKey)}).then(function(){return h}).then(o)},ft.prototype.uniqueKeys=function(o){return this._ctx.unique="unique",this.keys(o)},ft.prototype.firstKey=function(o){return this.limit(1).keys(function(l){return l[0]}).then(o)},ft.prototype.lastKey=function(o){return this.reverse().firstKey(o)},ft.prototype.distinct=function(){var o=this._ctx,o=o.index&&o.table.schema.idxByName[o.index];if(!o||!o.multi)return this;var l={};return Ss(this._ctx,function(g){var f=g.primaryKey.toString(),g=y(l,f);return l[f]=!0,!g}),this},ft.prototype.modify=function(o){var l=this,h=this._ctx;return this._write(function(f){var g=typeof o=="function"?o:function(D){return Gr(D,o)},m=h.table.core,S=m.schema.primaryKey,b=S.outbound,x=S.extractKey,k=200,S=l.db._options.modifyChunkSize;S&&(k=typeof S=="object"?S[m.name]||S["*"]||200:S);function A(D,L){var R=L.failures,L=L.numFailures;I+=D-L;for(var F=0,z=a(R);F<z.length;F++){var W=z[F];w.push(R[W])}}var w=[],I=0,M=[],O=o===to;return l.clone().primaryKeys().then(function(D){function T(L){var F=Math.min(k,D.length-L),z=D.slice(L,L+F);return(O?Promise.resolve([]):m.getMany({trans:f,keys:z,cache:"immutable"})).then(function(W){var X=[],K=[],V=b?[]:null,G=O?z:[];if(!O)for(var q=0;q<F;++q){var Z=W[q],st={value:wt(Z),primKey:D[L+q]};g.call(st,st.value,st)!==!1&&(st.value==null?G.push(D[L+q]):b||ht(x(Z),x(st.value))===0?(K.push(st.value),b&&V.push(D[L+q])):(G.push(D[L+q]),X.push(st.value)))}return Promise.resolve(0<X.length&&m.mutate({trans:f,type:"add",values:X}).then(function(rt){for(var lt in rt.failures)G.splice(parseInt(lt),1);A(X.length,rt)})).then(function(){return(0<K.length||R&&typeof o=="object")&&m.mutate({trans:f,type:"put",keys:V,values:K,criteria:R,changeSpec:typeof o!="function"&&o,isAdditionalChunk:0<L}).then(function(rt){return A(K.length,rt)})}).then(function(){return(0<G.length||R&&O)&&m.mutate({trans:f,type:"delete",keys:G,criteria:R,isAdditionalChunk:0<L}).then(function(rt){return _i(h.table,G,rt)}).then(function(rt){return A(G.length,rt)})}).then(function(){return D.length>L+F&&T(L+k)})})}var R=cn(h)&&h.limit===1/0&&(typeof o!="function"||O)&&{index:h.index,range:h.range};return T(0).then(function(){if(0<w.length)throw new se("Error modifying one or more objects",w,I,M);return D.length})})})},ft.prototype.delete=function(){var o=this._ctx,l=o.range;return!cn(o)||o.table.schema.yProps||!o.isPrimKey&&l.type!==3?this.modify(to):this._write(function(h){var f=o.table.core.schema.primaryKey,g=l;return o.table.core.count({trans:h,query:{index:f,range:g}}).then(function(m){return o.table.core.mutate({trans:h,type:"deleteRange",range:g}).then(function(k){var x=k.failures,k=k.numFailures;if(k)throw new se("Could not delete some values",Object.keys(x).map(function(S){return x[S]}),m-k);return m-k})})})},ft);function ft(){}var to=function(o,l){return l.value=null};function jl(o,l){return o<l?-1:o===l?0:1}function Nl(o,l){return l<o?-1:o===l?0:1}function Kt(o,l,h){return o=o instanceof no?new o.Collection(o):o,o._ctx.error=new(h||TypeError)(l),o}function un(o){return new o.Collection(o,function(){return eo("")}).limit(0)}function ki(o,l,h,f){var g,m,b,x,k,S,A,w=h.length;if(!h.every(function(O){return typeof O=="string"}))return Kt(o,$r);function I(O){g=O==="next"?function(T){return T.toUpperCase()}:function(T){return T.toLowerCase()},m=O==="next"?function(T){return T.toLowerCase()}:function(T){return T.toUpperCase()},b=O==="next"?jl:Nl;var D=h.map(function(T){return{lower:m(T),upper:g(T)}}).sort(function(T,R){return b(T.lower,R.lower)});x=D.map(function(T){return T.upper}),k=D.map(function(T){return T.lower}),A=(S=O)==="next"?"":f}I("next"),o=new o.Collection(o,function(){return De(x[0],k[w-1]+f)}),o._ondirectionchange=function(O){I(O)};var M=0;return o._addAlgorithm(function(O,D,T){var R=O.key;if(typeof R!="string")return!1;var L=m(R);if(l(L,k,M))return!0;for(var F=null,z=M;z<w;++z){var W=function(X,K,V,G,q,Z){for(var st=Math.min(X.length,G.length),rt=-1,lt=0;lt<st;++lt){var Wt=K[lt];if(Wt!==G[lt])return q(X[lt],V[lt])<0?X.substr(0,lt)+V[lt]+V.substr(lt+1):q(X[lt],G[lt])<0?X.substr(0,lt)+G[lt]+V.substr(lt+1):0<=rt?X.substr(0,rt)+K[rt]+V.substr(rt+1):null;q(X[lt],Wt)<0&&(rt=lt)}return st<G.length&&Z==="next"?X+V.substr(X.length):st<X.length&&Z==="prev"?X.substr(0,V.length):rt<0?null:X.substr(0,rt)+G[rt]+V.substr(rt+1)}(R,L,x[z],k[z],b,S);W===null&&F===null?M=z+1:(F===null||0<b(F,W))&&(F=W)}return D(F!==null?function(){O.continue(F+A)}:T),!1}),o}function De(o,l,h,f){return{type:2,lower:o,upper:l,lowerOpen:h,upperOpen:f}}function eo(o){return{type:1,lower:o,upper:o}}var no=(Object.defineProperty(Dt.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Dt.prototype.between=function(o,l,h,f){h=h!==!1,f=f===!0;try{return 0<this._cmp(o,l)||this._cmp(o,l)===0&&(h||f)&&(!h||!f)?un(this):new this.Collection(this,function(){return De(o,l,!h,!f)})}catch{return Kt(this,fe)}},Dt.prototype.equals=function(o){return o==null?Kt(this,fe):new this.Collection(this,function(){return eo(o)})},Dt.prototype.above=function(o){return o==null?Kt(this,fe):new this.Collection(this,function(){return De(o,void 0,!0)})},Dt.prototype.aboveOrEqual=function(o){return o==null?Kt(this,fe):new this.Collection(this,function(){return De(o,void 0,!1)})},Dt.prototype.below=function(o){return o==null?Kt(this,fe):new this.Collection(this,function(){return De(void 0,o,!1,!0)})},Dt.prototype.belowOrEqual=function(o){return o==null?Kt(this,fe):new this.Collection(this,function(){return De(void 0,o)})},Dt.prototype.startsWith=function(o){return typeof o!="string"?Kt(this,$r):this.between(o,o+Ke,!0,!0)},Dt.prototype.startsWithIgnoreCase=function(o){return o===""?this.startsWith(o):ki(this,function(l,h){return l.indexOf(h[0])===0},[o],Ke)},Dt.prototype.equalsIgnoreCase=function(o){return ki(this,function(l,h){return l===h[0]},[o],"")},Dt.prototype.anyOfIgnoreCase=function(){var o=At.apply(te,arguments);return o.length===0?un(this):ki(this,function(l,h){return h.indexOf(l)!==-1},o,"")},Dt.prototype.startsWithAnyOfIgnoreCase=function(){var o=At.apply(te,arguments);return o.length===0?un(this):ki(this,function(l,h){return h.some(function(f){return l.indexOf(f)===0})},o,Ke)},Dt.prototype.anyOf=function(){var o=this,l=At.apply(te,arguments),h=this._cmp;try{l.sort(h)}catch{return Kt(this,fe)}if(l.length===0)return un(this);var f=new this.Collection(this,function(){return De(l[0],l[l.length-1])});f._ondirectionchange=function(m){h=m==="next"?o._ascending:o._descending,l.sort(h)};var g=0;return f._addAlgorithm(function(m,b,x){for(var k=m.key;0<h(k,l[g]);)if(++g===l.length)return b(x),!1;return h(k,l[g])===0||(b(function(){m.continue(l[g])}),!1)}),f},Dt.prototype.notEqual=function(o){return this.inAnyRange([[-1/0,o],[o,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Dt.prototype.noneOf=function(){var o=At.apply(te,arguments);if(o.length===0)return new this.Collection(this);try{o.sort(this._ascending)}catch{return Kt(this,fe)}var l=o.reduce(function(h,f){return h?h.concat([[h[h.length-1][1],f]]):[[-1/0,f]]},null);return l.push([o[o.length-1],this.db._maxKey]),this.inAnyRange(l,{includeLowers:!1,includeUppers:!1})},Dt.prototype.inAnyRange=function(R,l){var h=this,f=this._cmp,g=this._ascending,m=this._descending,b=this._min,x=this._max;if(R.length===0)return un(this);if(!R.every(function(L){return L[0]!==void 0&&L[1]!==void 0&&g(L[0],L[1])<=0}))return Kt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",et.InvalidArgument);var k=!l||l.includeLowers!==!1,S=l&&l.includeUppers===!0,A,w=g;function I(L,F){return w(L[0],F[0])}try{(A=R.reduce(function(L,F){for(var z=0,W=L.length;z<W;++z){var X=L[z];if(f(F[0],X[1])<0&&0<f(F[1],X[0])){X[0]=b(X[0],F[0]),X[1]=x(X[1],F[1]);break}}return z===W&&L.push(F),L},[])).sort(I)}catch{return Kt(this,fe)}var M=0,O=S?function(L){return 0<g(L,A[M][1])}:function(L){return 0<=g(L,A[M][1])},D=k?function(L){return 0<m(L,A[M][0])}:function(L){return 0<=m(L,A[M][0])},T=O,R=new this.Collection(this,function(){return De(A[0][0],A[A.length-1][1],!k,!S)});return R._ondirectionchange=function(L){w=L==="next"?(T=O,g):(T=D,m),A.sort(I)},R._addAlgorithm(function(L,F,z){for(var W,X=L.key;T(X);)if(++M===A.length)return F(z),!1;return!O(W=X)&&!D(W)||(h._cmp(X,A[M][1])===0||h._cmp(X,A[M][0])===0||F(function(){w===g?L.continue(A[M][0]):L.continue(A[M][1])}),!1)}),R},Dt.prototype.startsWithAnyOf=function(){var o=At.apply(te,arguments);return o.every(function(l){return typeof l=="string"})?o.length===0?un(this):this.inAnyRange(o.map(function(l){return[l,l+Ke]})):Kt(this,"startsWithAnyOf() only works with strings")},Dt);function Dt(){}function oe(o){return xt(function(l){return En(l),o(l.target.error),!1})}function En(o){o.stopPropagation&&o.stopPropagation(),o.preventDefault&&o.preventDefault()}var Cn="storagemutated",Ps="x-storagemutated-1",Ee=On(null,Cn),Hl=(ae.prototype._lock=function(){return j(!tt.global),++this._reculock,this._reculock!==1||tt.global||(tt.lockOwnerFor=this),this},ae.prototype._unlock=function(){if(j(!tt.global),--this._reculock==0)for(tt.global||(tt.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var o=this._blockedFuncs.shift();try{He(o[1],o[0])}catch{}}return this},ae.prototype._locked=function(){return this._reculock&&tt.lockOwnerFor!==this},ae.prototype.create=function(o){var l=this;if(!this.mode)return this;var h=this.db.idbdb,f=this.db._state.dbOpenError;if(j(!this.idbtrans),!o&&!h)switch(f&&f.name){case"DatabaseClosedError":throw new et.DatabaseClosed(f);case"MissingAPIError":throw new et.MissingAPI(f.message,f);default:throw new et.OpenFailed(f)}if(!this.active)throw new et.TransactionInactive;return j(this._completion._state===null),(o=this.idbtrans=o||(this.db.core||h).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=xt(function(g){En(g),l._reject(o.error)}),o.onabort=xt(function(g){En(g),l.active&&l._reject(new et.Abort(o.error)),l.active=!1,l.on("abort").fire(g)}),o.oncomplete=xt(function(){l.active=!1,l._resolve(),"mutatedParts"in o&&Ee.storagemutated.fire(o.mutatedParts)}),this},ae.prototype._promise=function(o,l,h){var f=this;if(o==="readwrite"&&this.mode!=="readwrite")return St(new et.ReadOnly("Transaction is readonly"));if(!this.active)return St(new et.TransactionInactive);if(this._locked())return new J(function(m,b){f._blockedFuncs.push([function(){f._promise(o,l,h).then(m,b)},tt])});if(h)return Me(function(){var m=new J(function(b,x){f._lock();var k=l(b,x,f);k&&k.then&&k.then(b,x)});return m.finally(function(){return f._unlock()}),m._lib=!0,m});var g=new J(function(m,b){var x=l(m,b,f);x&&x.then&&x.then(m,b)});return g._lib=!0,g},ae.prototype._root=function(){return this.parent?this.parent._root():this},ae.prototype.waitFor=function(o){var l,h=this._root(),f=J.resolve(o);h._waitingFor?h._waitingFor=h._waitingFor.then(function(){return f}):(h._waitingFor=f,h._waitingQueue=[],l=h.idbtrans.objectStore(h.storeNames[0]),function m(){for(++h._spinCount;h._waitingQueue.length;)h._waitingQueue.shift()();h._waitingFor&&(l.get(-1/0).onsuccess=m)}());var g=h._waitingFor;return new J(function(m,b){f.then(function(x){return h._waitingQueue.push(xt(m.bind(null,x)))},function(x){return h._waitingQueue.push(xt(b.bind(null,x)))}).finally(function(){h._waitingFor===g&&(h._waitingFor=null)})})},ae.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new et.Abort))},ae.prototype.table=function(o){var l=this._memoizedTables||(this._memoizedTables={});if(y(l,o))return l[o];var h=this.schema[o];if(!h)throw new et.NotFound("Table "+o+" not part of transaction");return h=new this.db.Table(o,h,this),h.core=this.db.core.table(o),l[o]=h},ae);function ae(){}function Os(o,l,h,f,g,m,b,x){return{name:o,keyPath:l,unique:h,multi:f,auto:g,compound:m,src:(h&&!b?"&":"")+(f?"*":"")+(g?"++":"")+io(l),type:x}}function io(o){return typeof o=="string"?o:o?"["+[].join.call(o,"+")+"]":""}function Ds(o,l,h){return{name:o,primKey:l,indexes:h,mappedClass:null,idxByName:(f=function(g){return[g.name,g]},h.reduce(function(g,m,b){return b=f(m,b),b&&(g[b[0]]=b[1]),g},{}))};var f}var An=function(o){try{return o.only([[]]),An=function(){return[[]]},[[]]}catch{return An=function(){return Ke},Ke}};function Es(o){return o==null?function(){}:typeof o=="string"?(l=o).split(".").length===1?function(h){return h[l]}:function(h){return Q(h,l)}:function(h){return Q(h,o)};var l}function so(o){return[].slice.call(o)}var Kl=0;function Tn(o){return o==null?":id":typeof o=="string"?o:"[".concat(o.join("+"),"]")}function Wl(o,l,k){function f(T){if(T.type===3)return null;if(T.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var M=T.lower,O=T.upper,D=T.lowerOpen,T=T.upperOpen;return M===void 0?O===void 0?null:l.upperBound(O,!!T):O===void 0?l.lowerBound(M,!!D):l.bound(M,O,!!D,!!T)}function g(I){var M,O=I.name;return{name:O,schema:I,mutate:function(D){var T=D.trans,R=D.type,L=D.keys,F=D.values,z=D.range;return new Promise(function(W,X){W=xt(W);var K=T.objectStore(O),V=K.keyPath==null,G=R==="put"||R==="add";if(!G&&R!=="delete"&&R!=="deleteRange")throw new Error("Invalid operation type: "+R);var q,Z=(L||F||{length:1}).length;if(L&&F&&L.length!==F.length)throw new Error("Given keys array must have same length as given values array.");if(Z===0)return W({numFailures:0,failures:{},results:[],lastResult:void 0});function st(Ft){++Wt,En(Ft)}var rt=[],lt=[],Wt=0;if(R==="deleteRange"){if(z.type===4)return W({numFailures:Wt,failures:lt,results:[],lastResult:void 0});z.type===3?rt.push(q=K.clear()):rt.push(q=K.delete(f(z)))}else{var V=G?V?[F,L]:[F,null]:[L,null],it=V[0],It=V[1];if(G)for(var Rt=0;Rt<Z;++Rt)rt.push(q=It&&It[Rt]!==void 0?K[R](it[Rt],It[Rt]):K[R](it[Rt])),q.onerror=st;else for(Rt=0;Rt<Z;++Rt)rt.push(q=K[R](it[Rt])),q.onerror=st}function Li(Ft){Ft=Ft.target.result,rt.forEach(function(qe,Us){return qe.error!=null&&(lt[Us]=qe.error)}),W({numFailures:Wt,failures:lt,results:R==="delete"?L:rt.map(function(qe){return qe.result}),lastResult:Ft})}q.onerror=function(Ft){st(Ft),Li(Ft)},q.onsuccess=Li})},getMany:function(D){var T=D.trans,R=D.keys;return new Promise(function(L,F){L=xt(L);for(var z,W=T.objectStore(O),X=R.length,K=new Array(X),V=0,G=0,q=function(rt){rt=rt.target,K[rt._pos]=rt.result,++G===V&&L(K)},Z=oe(F),st=0;st<X;++st)R[st]!=null&&((z=W.get(R[st]))._pos=st,z.onsuccess=q,z.onerror=Z,++V);V===0&&L(K)})},get:function(D){var T=D.trans,R=D.key;return new Promise(function(L,F){L=xt(L);var z=T.objectStore(O).get(R);z.onsuccess=function(W){return L(W.target.result)},z.onerror=oe(F)})},query:(M=S,function(D){return new Promise(function(T,R){T=xt(T);var L,F,z,V=D.trans,W=D.values,X=D.limit,q=D.query,K=X===1/0?void 0:X,G=q.index,q=q.range,V=V.objectStore(O),G=G.isPrimaryKey?V:V.index(G.name),q=f(q);if(X===0)return T({result:[]});M?((K=W?G.getAll(q,K):G.getAllKeys(q,K)).onsuccess=function(Z){return T({result:Z.target.result})},K.onerror=oe(R)):(L=0,F=!W&&"openKeyCursor"in G?G.openKeyCursor(q):G.openCursor(q),z=[],F.onsuccess=function(Z){var st=F.result;return st?(z.push(W?st.value:st.primaryKey),++L===X?T({result:z}):void st.continue()):T({result:z})},F.onerror=oe(R))})}),openCursor:function(D){var T=D.trans,R=D.values,L=D.query,F=D.reverse,z=D.unique;return new Promise(function(W,X){W=xt(W);var G=L.index,K=L.range,V=T.objectStore(O),V=G.isPrimaryKey?V:V.index(G.name),G=F?z?"prevunique":"prev":z?"nextunique":"next",q=!R&&"openKeyCursor"in V?V.openKeyCursor(f(K),G):V.openCursor(f(K),G);q.onerror=oe(X),q.onsuccess=xt(function(Z){var st,rt,lt,Wt,it=q.result;it?(it.___id=++Kl,it.done=!1,st=it.continue.bind(it),rt=(rt=it.continuePrimaryKey)&&rt.bind(it),lt=it.advance.bind(it),Wt=function(){throw new Error("Cursor not stopped")},it.trans=T,it.stop=it.continue=it.continuePrimaryKey=it.advance=function(){throw new Error("Cursor not started")},it.fail=xt(X),it.next=function(){var It=this,Rt=1;return this.start(function(){return Rt--?It.continue():It.stop()}).then(function(){return It})},it.start=function(It){function Rt(){if(q.result)try{It()}catch(Ft){it.fail(Ft)}else it.done=!0,it.start=function(){throw new Error("Cursor behind last entry")},it.stop()}var Li=new Promise(function(Ft,qe){Ft=xt(Ft),q.onerror=oe(qe),it.fail=qe,it.stop=function(Us){it.stop=it.continue=it.continuePrimaryKey=it.advance=Wt,Ft(Us)}});return q.onsuccess=xt(function(Ft){q.onsuccess=Rt,Rt()}),it.continue=st,it.continuePrimaryKey=rt,it.advance=lt,Rt(),Li},W(it)):W(null)},X)})},count:function(D){var T=D.query,R=D.trans,L=T.index,F=T.range;return new Promise(function(z,W){var X=R.objectStore(O),K=L.isPrimaryKey?X:X.index(L.name),X=f(F),K=X?K.count(X):K.count();K.onsuccess=xt(function(V){return z(V.target.result)}),K.onerror=oe(W)})}}}var m,b,x,A=(b=k,x=so((m=o).objectStoreNames),{schema:{name:m.name,tables:x.map(function(I){return b.objectStore(I)}).map(function(I){var M=I.keyPath,T=I.autoIncrement,O=c(M),D={},T={name:I.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:M==null,compound:O,keyPath:M,autoIncrement:T,unique:!0,extractKey:Es(M)},indexes:so(I.indexNames).map(function(R){return I.index(R)}).map(function(z){var L=z.name,F=z.unique,W=z.multiEntry,z=z.keyPath,W={name:L,compound:c(z),keyPath:z,unique:F,multiEntry:W,extractKey:Es(z)};return D[Tn(z)]=W}),getIndexByKeyPath:function(R){return D[Tn(R)]}};return D[":id"]=T.primaryKey,M!=null&&(D[Tn(M)]=T.primaryKey),T})},hasGetAll:0<x.length&&"getAll"in b.objectStore(x[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),k=A.schema,S=A.hasGetAll,A=k.tables.map(g),w={};return A.forEach(function(I){return w[I.name]=I}),{stack:"dbcore",transaction:o.transaction.bind(o),table:function(I){if(!w[I])throw new Error("Table '".concat(I,"' not found"));return w[I]},MIN_KEY:-1/0,MAX_KEY:An(l),schema:k}}function $l(o,l,h,f){var g=h.IDBKeyRange;return h.indexedDB,{dbcore:(f=Wl(l,g,f),o.dbcore.reduce(function(m,b){return b=b.create,i(i({},m),b(m))},f))}}function Si(o,f){var h=f.db,f=$l(o._middlewares,h,o._deps,f);o.core=f.dbcore,o.tables.forEach(function(g){var m=g.name;o.core.schema.tables.some(function(b){return b.name===m})&&(g.core=o.core.table(m),o[m]instanceof o.Table&&(o[m].core=g.core))})}function Mi(o,l,h,f){h.forEach(function(g){var m=f[g];l.forEach(function(b){var x=function k(S,A){return P(S,A)||(S=d(S))&&k(S,A)}(b,g);(!x||"value"in x&&x.value===void 0)&&(b===o.Transaction.prototype||b instanceof o.Transaction?C(b,g,{get:function(){return this.table(g)},set:function(k){_(this,g,{value:k,writable:!0,configurable:!0,enumerable:!0})}}):b[g]=new o.Table(g,m))})})}function Cs(o,l){l.forEach(function(h){for(var f in h)h[f]instanceof o.Table&&delete h[f]})}function Vl(o,l){return o._cfg.version-l._cfg.version}function ql(o,l,h,f){var g=o._dbSchema;h.objectStoreNames.contains("$meta")&&!g.$meta&&(g.$meta=Ds("$meta",oo("")[0],[]),o._storeNames.push("$meta"));var m=o._createTransaction("readwrite",o._storeNames,g);m.create(h),m._completion.catch(f);var b=m._reject.bind(m),x=tt.transless||tt;Me(function(){return tt.trans=m,tt.transless=x,l!==0?(Si(o,h),S=l,((k=m).storeNames.includes("$meta")?k.table("$meta").get("version").then(function(A){return A??S}):J.resolve(S)).then(function(A){return I=A,M=m,O=h,D=[],A=(w=o)._versions,T=w._dbSchema=Oi(0,w.idbdb,O),(A=A.filter(function(R){return R._cfg.version>=I})).length!==0?(A.forEach(function(R){D.push(function(){var L=T,F=R._cfg.dbschema;Di(w,L,O),Di(w,F,O),T=w._dbSchema=F;var z=As(L,F);z.add.forEach(function(G){Ts(O,G[0],G[1].primKey,G[1].indexes)}),z.change.forEach(function(G){if(G.recreate)throw new et.Upgrade("Not yet support for changing primary key");var q=O.objectStore(G.name);G.add.forEach(function(Z){return Pi(q,Z)}),G.change.forEach(function(Z){q.deleteIndex(Z.name),Pi(q,Z)}),G.del.forEach(function(Z){return q.deleteIndex(Z)})});var W=R._cfg.contentUpgrade;if(W&&R._cfg.version>I){Si(w,O),M._memoizedTables={};var X=U(F);z.del.forEach(function(G){X[G]=L[G]}),Cs(w,[w.Transaction.prototype]),Mi(w,[w.Transaction.prototype],a(X),X),M.schema=X;var K,V=we(W);return V&&an(),z=J.follow(function(){var G;(K=W(M))&&V&&(G=Pe.bind(null,null),K.then(G,G))}),K&&typeof K.then=="function"?J.resolve(K):z.then(function(){return K})}}),D.push(function(L){var F,z,W=R._cfg.dbschema;F=W,z=L,[].slice.call(z.db.objectStoreNames).forEach(function(X){return F[X]==null&&z.db.deleteObjectStore(X)}),Cs(w,[w.Transaction.prototype]),Mi(w,[w.Transaction.prototype],w._storeNames,w._dbSchema),M.schema=w._dbSchema}),D.push(function(L){w.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(w.idbdb.version/10)===R._cfg.version?(w.idbdb.deleteObjectStore("$meta"),delete w._dbSchema.$meta,w._storeNames=w._storeNames.filter(function(F){return F!=="$meta"})):L.objectStore("$meta").put(R._cfg.version,"version"))})}),function R(){return D.length?J.resolve(D.shift()(M.idbtrans)).then(R):J.resolve()}().then(function(){ro(T,O)})):J.resolve();var w,I,M,O,D,T}).catch(b)):(a(g).forEach(function(A){Ts(h,A,g[A].primKey,g[A].indexes)}),Si(o,h),void J.follow(function(){return o.on.populate.fire(m)}).catch(b));var k,S})}function Ul(o,l){ro(o._dbSchema,l),l.db.version%10!=0||l.objectStoreNames.contains("$meta")||l.db.createObjectStore("$meta").add(Math.ceil(l.db.version/10-1),"version");var h=Oi(0,o.idbdb,l);Di(o,o._dbSchema,l);for(var f=0,g=As(h,o._dbSchema).change;f<g.length;f++){var m=function(b){if(b.change.length||b.recreate)return console.warn("Unable to patch indexes of table ".concat(b.name," because it has changes on the type of index or primary key.")),{value:void 0};var x=l.objectStore(b.name);b.add.forEach(function(k){re&&console.debug("Dexie upgrade patch: Creating missing index ".concat(b.name,".").concat(k.src)),Pi(x,k)})}(g[f]);if(typeof m=="object")return m.value}}function As(o,l){var h,f={del:[],add:[],change:[]};for(h in o)l[h]||f.del.push(h);for(h in l){var g=o[h],m=l[h];if(g){var b={name:h,def:m,recreate:!1,del:[],add:[],change:[]};if(""+(g.primKey.keyPath||"")!=""+(m.primKey.keyPath||"")||g.primKey.auto!==m.primKey.auto)b.recreate=!0,f.change.push(b);else{var x=g.idxByName,k=m.idxByName,S=void 0;for(S in x)k[S]||b.del.push(S);for(S in k){var A=x[S],w=k[S];A?A.src!==w.src&&b.change.push(w):b.add.push(w)}(0<b.del.length||0<b.add.length||0<b.change.length)&&f.change.push(b)}}else f.add.push([h,m])}return f}function Ts(o,l,h,f){var g=o.db.createObjectStore(l,h.keyPath?{keyPath:h.keyPath,autoIncrement:h.auto}:{autoIncrement:h.auto});return f.forEach(function(m){return Pi(g,m)}),g}function ro(o,l){a(o).forEach(function(h){l.db.objectStoreNames.contains(h)||(re&&console.debug("Dexie: Creating missing table",h),Ts(l,h,o[h].primKey,o[h].indexes))})}function Pi(o,l){o.createIndex(l.name,l.keyPath,{unique:l.unique,multiEntry:l.multi})}function Oi(o,l,h){var f={};return H(l.objectStoreNames,0).forEach(function(g){for(var m=h.objectStore(g),b=Os(io(S=m.keyPath),S||"",!0,!1,!!m.autoIncrement,S&&typeof S!="string",!0),x=[],k=0;k<m.indexNames.length;++k){var A=m.index(m.indexNames[k]),S=A.keyPath,A=Os(A.name,S,!!A.unique,!!A.multiEntry,!1,S&&typeof S!="string",!1);x.push(A)}f[g]=Ds(g,b,x)}),f}function Di(o,l,h){for(var f=h.db.objectStoreNames,g=0;g<f.length;++g){var m=f[g],b=h.objectStore(m);o._hasGetAll="getAll"in b;for(var x=0;x<b.indexNames.length;++x){var k=b.indexNames[x],S=b.index(k).keyPath,A=typeof S=="string"?S:"["+H(S).join("+")+"]";!l[m]||(S=l[m].idxByName[A])&&(S.name=k,delete l[m].idxByName[A],l[m].idxByName[k]=S)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&r.WorkerGlobalScope&&r instanceof r.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(o._hasGetAll=!1)}function oo(o){return o.split(",").map(function(l,h){var m=l.split(":"),f=(g=m[1])===null||g===void 0?void 0:g.trim(),g=(l=m[0].trim()).replace(/([&*]|\+\+)/g,""),m=/^\[/.test(g)?g.match(/^\[(.*)\]$/)[1].split("+"):g;return Os(g,m||null,/\&/.test(l),/\*/.test(l),/\+\+/.test(l),c(m),h===0,f)})}var Yl=(hn.prototype._createTableSchema=Ds,hn.prototype._parseIndexSyntax=oo,hn.prototype._parseStoresSpec=function(o,l){var h=this;a(o).forEach(function(f){if(o[f]!==null){var g=h._parseIndexSyntax(o[f]),m=g.shift();if(!m)throw new et.Schema("Invalid schema for table "+f+": "+o[f]);if(m.unique=!0,m.multi)throw new et.Schema("Primary key cannot be multiEntry*");g.forEach(function(b){if(b.auto)throw new et.Schema("Only primary key can be marked as autoIncrement (++)");if(!b.keyPath)throw new et.Schema("Index must have a name and cannot be an empty string")}),g=h._createTableSchema(f,m,g),l[f]=g}})},hn.prototype.stores=function(h){var l=this.db;this._cfg.storesSource=this._cfg.storesSource?u(this._cfg.storesSource,h):h;var h=l._versions,f={},g={};return h.forEach(function(m){u(f,m._cfg.storesSource),g=m._cfg.dbschema={},m._parseStoresSpec(f,g)}),l._dbSchema=g,Cs(l,[l._allTables,l,l.Transaction.prototype]),Mi(l,[l._allTables,l,l.Transaction.prototype,this._cfg.tables],a(g),g),l._storeNames=a(g),this},hn.prototype.upgrade=function(o){return this._cfg.contentUpgrade=fs(this._cfg.contentUpgrade||mt,o),this},hn);function hn(){}function Is(o,l){var h=o._dbNamesDB;return h||(h=o._dbNamesDB=new pe(bi,{addons:[],indexedDB:o,IDBKeyRange:l})).version(1).stores({dbnames:"name"}),h.table("dbnames")}function Rs(o){return o&&typeof o.databases=="function"}function Ls(o){return Me(function(){return tt.letThrough=!0,o()})}function Bs(o){return!("from"in o)}var Tt=function(o,l){if(!this){var h=new Tt;return o&&"d"in o&&u(h,o),h}u(this,arguments.length?{d:1,from:o,to:1<arguments.length?l:o}:{d:0})};function In(o,l,h){var f=ht(l,h);if(!isNaN(f)){if(0<f)throw RangeError();if(Bs(o))return u(o,{from:l,to:h,d:1});var g=o.l,f=o.r;if(ht(h,o.from)<0)return g?In(g,l,h):o.l={from:l,to:h,d:1,l:null,r:null},lo(o);if(0<ht(l,o.to))return f?In(f,l,h):o.r={from:l,to:h,d:1,l:null,r:null},lo(o);ht(l,o.from)<0&&(o.from=l,o.l=null,o.d=f?f.d+1:1),0<ht(h,o.to)&&(o.to=h,o.r=null,o.d=o.l?o.l.d+1:1),h=!o.r,g&&!o.l&&Rn(o,g),f&&h&&Rn(o,f)}}function Rn(o,l){Bs(l)||function h(f,k){var m=k.from,b=k.to,x=k.l,k=k.r;In(f,m,b),x&&h(f,x),k&&h(f,k)}(o,l)}function ao(o,l){var h=Ei(l),f=h.next();if(f.done)return!1;for(var g=f.value,m=Ei(o),b=m.next(g.from),x=b.value;!f.done&&!b.done;){if(ht(x.from,g.to)<=0&&0<=ht(x.to,g.from))return!0;ht(g.from,x.from)<0?g=(f=h.next(x.from)).value:x=(b=m.next(g.from)).value}return!1}function Ei(o){var l=Bs(o)?null:{s:0,n:o};return{next:function(h){for(var f=0<arguments.length;l;)switch(l.s){case 0:if(l.s=1,f)for(;l.n.l&&ht(h,l.n.from)<0;)l={up:l,n:l.n.l,s:1};else for(;l.n.l;)l={up:l,n:l.n.l,s:1};case 1:if(l.s=2,!f||ht(h,l.n.to)<=0)return{value:l.n,done:!1};case 2:if(l.n.r){l.s=3,l={up:l,n:l.n.r,s:0};continue}case 3:l=l.up}return{done:!0}}}}function lo(o){var l,h,f=(((l=o.r)===null||l===void 0?void 0:l.d)||0)-(((h=o.l)===null||h===void 0?void 0:h.d)||0),g=1<f?"r":f<-1?"l":"";g&&(l=g=="r"?"l":"r",h=i({},o),f=o[g],o.from=f.from,o.to=f.to,o[g]=f[g],h[g]=f[l],(o[l]=h).d=co(h)),o.d=co(o)}function co(h){var l=h.r,h=h.l;return(l?h?Math.max(l.d,h.d):l.d:h?h.d:0)+1}function Ci(o,l){return a(l).forEach(function(h){o[h]?Rn(o[h],l[h]):o[h]=function f(g){var m,b,x={};for(m in g)y(g,m)&&(b=g[m],x[m]=!b||typeof b!="object"||at.has(b.constructor)?b:f(b));return x}(l[h])}),o}function Fs(o,l){return o.all||l.all||Object.keys(o).some(function(h){return l[h]&&ao(l[h],o[h])})}v(Tt.prototype,((Ut={add:function(o){return Rn(this,o),this},addKey:function(o){return In(this,o,o),this},addKeys:function(o){var l=this;return o.forEach(function(h){return In(l,h,h)}),this},hasKey:function(o){var l=Ei(this).next(o).value;return l&&ht(l.from,o)<=0&&0<=ht(l.to,o)}})[kt]=function(){return Ei(this)},Ut));var $e={},zs={},js=!1;function Ai(o){Ci(zs,o),js||(js=!0,setTimeout(function(){js=!1,Ns(zs,!(zs={}))},0))}function Ns(o,l){l===void 0&&(l=!1);var h=new Set;if(o.all)for(var f=0,g=Object.values($e);f<g.length;f++)uo(b=g[f],o,h,l);else for(var m in o){var b,x=/^idb\:\/\/(.*)\/(.*)\//.exec(m);x&&(m=x[1],x=x[2],(b=$e["idb://".concat(m,"/").concat(x)])&&uo(b,o,h,l))}h.forEach(function(k){return k()})}function uo(o,l,h,f){for(var g=[],m=0,b=Object.entries(o.queries.query);m<b.length;m++){for(var x=b[m],k=x[0],S=[],A=0,w=x[1];A<w.length;A++){var I=w[A];Fs(l,I.obsSet)?I.subscribers.forEach(function(T){return h.add(T)}):f&&S.push(I)}f&&g.push([k,S])}if(f)for(var M=0,O=g;M<O.length;M++){var D=O[M],k=D[0],S=D[1];o.queries.query[k]=S}}function Xl(o){var l=o._state,h=o._deps.indexedDB;if(l.isBeingOpened||o.idbdb)return l.dbReadyPromise.then(function(){return l.dbOpenError?St(l.dbOpenError):o});l.isBeingOpened=!0,l.dbOpenError=null,l.openComplete=!1;var f=l.openCanceller,g=Math.round(10*o.verno),m=!1;function b(){if(l.openCanceller!==f)throw new et.DatabaseClosed("db.open() was cancelled")}function x(){return new J(function(I,M){if(b(),!h)throw new et.MissingAPI;var O=o.name,D=l.autoSchema||!g?h.open(O):h.open(O,g);if(!D)throw new et.MissingAPI;D.onerror=oe(M),D.onblocked=xt(o._fireOnBlocked),D.onupgradeneeded=xt(function(T){var R;A=D.transaction,l.autoSchema&&!o._options.allowEmptyDB?(D.onerror=En,A.abort(),D.result.close(),(R=h.deleteDatabase(O)).onsuccess=R.onerror=xt(function(){M(new et.NoSuchDatabase("Database ".concat(O," doesnt exist")))})):(A.onerror=oe(M),T=T.oldVersion>Math.pow(2,62)?0:T.oldVersion,w=T<1,o.idbdb=D.result,m&&Ul(o,A),ql(o,T/10,A,M))},M),D.onsuccess=xt(function(){A=null;var T,R,L,F,z,W=o.idbdb=D.result,X=H(W.objectStoreNames);if(0<X.length)try{var K=W.transaction((F=X).length===1?F[0]:F,"readonly");if(l.autoSchema)R=W,L=K,(T=o).verno=R.version/10,L=T._dbSchema=Oi(0,R,L),T._storeNames=H(R.objectStoreNames,0),Mi(T,[T._allTables],a(L),L);else if(Di(o,o._dbSchema,K),((z=As(Oi(0,(z=o).idbdb,K),z._dbSchema)).add.length||z.change.some(function(V){return V.add.length||V.change.length}))&&!m)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),W.close(),g=W.version+1,m=!0,I(x());Si(o,K)}catch{}ln.push(o),W.onversionchange=xt(function(V){l.vcFired=!0,o.on("versionchange").fire(V)}),W.onclose=xt(function(){o.close({disableAutoOpen:!1})}),w&&(z=o._deps,K=O,W=z.indexedDB,z=z.IDBKeyRange,Rs(W)||K===bi||Is(W,z).put({name:K}).catch(mt)),I()},M)}).catch(function(I){switch(I==null?void 0:I.name){case"UnknownError":if(0<l.PR1398_maxLoop)return l.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),x();break;case"VersionError":if(0<g)return g=0,x()}return J.reject(I)})}var k,S=l.dbReadyResolve,A=null,w=!1;return J.race([f,(typeof navigator>"u"?J.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(I){function M(){return indexedDB.databases().finally(I)}k=setInterval(M,100),M()}).finally(function(){return clearInterval(k)}):Promise.resolve()).then(x)]).then(function(){return b(),l.onReadyBeingFired=[],J.resolve(Ls(function(){return o.on.ready.fire(o.vip)})).then(function I(){if(0<l.onReadyBeingFired.length){var M=l.onReadyBeingFired.reduce(fs,mt);return l.onReadyBeingFired=[],J.resolve(Ls(function(){return M(o.vip)})).then(I)}})}).finally(function(){l.openCanceller===f&&(l.onReadyBeingFired=null,l.isBeingOpened=!1)}).catch(function(I){l.dbOpenError=I;try{A&&A.abort()}catch{}return f===l.openCanceller&&o._close(),St(I)}).finally(function(){l.openComplete=!0,S()}).then(function(){var I;return w&&(I={},o.tables.forEach(function(M){M.schema.indexes.forEach(function(O){O.name&&(I["idb://".concat(o.name,"/").concat(M.name,"/").concat(O.name)]=new Tt(-1/0,[[[]]]))}),I["idb://".concat(o.name,"/").concat(M.name,"/")]=I["idb://".concat(o.name,"/").concat(M.name,"/:dels")]=new Tt(-1/0,[[[]]])}),Ee(Cn).fire(I),Ns(I,!0)),o})}function Hs(o){function l(m){return o.next(m)}var h=g(l),f=g(function(m){return o.throw(m)});function g(m){return function(k){var x=m(k),k=x.value;return x.done?k:k&&typeof k.then=="function"?k.then(h,f):c(k)?Promise.all(k).then(h,f):h(k)}}return g(l)()}function Ti(o,l,h){for(var f=c(o)?o.slice():[o],g=0;g<h;++g)f.push(l);return f}var Gl={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(o){return i(i({},o),{table:function(l){var h=o.table(l),f=h.schema,g={},m=[];function b(w,I,M){var O=Tn(w),D=g[O]=g[O]||[],T=w==null?0:typeof w=="string"?1:w.length,R=0<I,R=i(i({},M),{name:R?"".concat(O,"(virtual-from:").concat(M.name,")"):M.name,lowLevelIndex:M,isVirtual:R,keyTail:I,keyLength:T,extractKey:Es(w),unique:!R&&M.unique});return D.push(R),R.isPrimaryKey||m.push(R),1<T&&b(T===2?w[0]:w.slice(0,T-1),I+1,M),D.sort(function(L,F){return L.keyTail-F.keyTail}),R}l=b(f.primaryKey.keyPath,0,f.primaryKey),g[":id"]=[l];for(var x=0,k=f.indexes;x<k.length;x++){var S=k[x];b(S.keyPath,0,S)}function A(w){var I,M=w.query.index;return M.isVirtual?i(i({},w),{query:{index:M.lowLevelIndex,range:(I=w.query.range,M=M.keyTail,{type:I.type===1?2:I.type,lower:Ti(I.lower,I.lowerOpen?o.MAX_KEY:o.MIN_KEY,M),lowerOpen:!0,upper:Ti(I.upper,I.upperOpen?o.MIN_KEY:o.MAX_KEY,M),upperOpen:!0})}}):w}return i(i({},h),{schema:i(i({},f),{primaryKey:l,indexes:m,getIndexByKeyPath:function(w){return(w=g[Tn(w)])&&w[0]}}),count:function(w){return h.count(A(w))},query:function(w){return h.query(A(w))},openCursor:function(w){var I=w.query.index,M=I.keyTail,O=I.isVirtual,D=I.keyLength;return O?h.openCursor(A(w)).then(function(R){return R&&T(R)}):h.openCursor(w);function T(R){return Object.create(R,{continue:{value:function(L){L!=null?R.continue(Ti(L,w.reverse?o.MAX_KEY:o.MIN_KEY,M)):w.unique?R.continue(R.key.slice(0,D).concat(w.reverse?o.MIN_KEY:o.MAX_KEY,M)):R.continue()}},continuePrimaryKey:{value:function(L,F){R.continuePrimaryKey(Ti(L,o.MAX_KEY,M),F)}},primaryKey:{get:function(){return R.primaryKey}},key:{get:function(){var L=R.key;return D===1?L[0]:L.slice(0,D)}},value:{get:function(){return R.value}}})}}})}})}};function Ks(o,l,h,f){return h=h||{},f=f||"",a(o).forEach(function(g){var m,b,x;y(l,g)?(m=o[g],b=l[g],typeof m=="object"&&typeof b=="object"&&m&&b?(x=vt(m))!==vt(b)?h[f+g]=l[g]:x==="Object"?Ks(m,b,h,f+g+"."):m!==b&&(h[f+g]=l[g]):m!==b&&(h[f+g]=l[g])):h[f+g]=void 0}),a(l).forEach(function(g){y(o,g)||(h[f+g]=l[g])}),h}function Ws(o,l){return l.type==="delete"?l.keys:l.keys||l.values.map(o.extractKey)}var Ql={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(o){return i(i({},o),{table:function(l){var h=o.table(l),f=h.schema.primaryKey;return i(i({},h),{mutate:function(g){var m=tt.trans,b=m.table(l).hook,x=b.deleting,k=b.creating,S=b.updating;switch(g.type){case"add":if(k.fire===mt)break;return m._promise("readwrite",function(){return A(g)},!0);case"put":if(k.fire===mt&&S.fire===mt)break;return m._promise("readwrite",function(){return A(g)},!0);case"delete":if(x.fire===mt)break;return m._promise("readwrite",function(){return A(g)},!0);case"deleteRange":if(x.fire===mt)break;return m._promise("readwrite",function(){return function w(I,M,O){return h.query({trans:I,values:!1,query:{index:f,range:M},limit:O}).then(function(D){var T=D.result;return A({type:"delete",keys:T,trans:I}).then(function(R){return 0<R.numFailures?Promise.reject(R.failures[0]):T.length<O?{failures:[],numFailures:0,lastResult:void 0}:w(I,i(i({},M),{lower:T[T.length-1],lowerOpen:!0}),O)})})}(g.trans,g.range,1e4)},!0)}return h.mutate(g);function A(w){var I,M,O,D=tt.trans,T=w.keys||Ws(f,w);if(!T)throw new Error("Keys missing");return(w=w.type==="add"||w.type==="put"?i(i({},w),{keys:T}):i({},w)).type!=="delete"&&(w.values=s([],w.values)),w.keys&&(w.keys=s([],w.keys)),I=h,O=T,((M=w).type==="add"?Promise.resolve([]):I.getMany({trans:M.trans,keys:O,cache:"immutable"})).then(function(R){var L=T.map(function(F,z){var W,X,K,V=R[z],G={onerror:null,onsuccess:null};return w.type==="delete"?x.fire.call(G,F,V,D):w.type==="add"||V===void 0?(W=k.fire.call(G,F,w.values[z],D),F==null&&W!=null&&(w.keys[z]=F=W,f.outbound||$(w.values[z],f.keyPath,F))):(W=Ks(V,w.values[z]),(X=S.fire.call(G,W,F,V,D))&&(K=w.values[z],Object.keys(X).forEach(function(q){y(K,q)?K[q]=X[q]:$(K,q,X[q])}))),G});return h.mutate(w).then(function(F){for(var z=F.failures,W=F.results,X=F.numFailures,F=F.lastResult,K=0;K<T.length;++K){var V=(W||T)[K],G=L[K];V==null?G.onerror&&G.onerror(z[K]):G.onsuccess&&G.onsuccess(w.type==="put"&&R[K]?w.values[K]:V)}return{failures:z,results:W,numFailures:X,lastResult:F}}).catch(function(F){return L.forEach(function(z){return z.onerror&&z.onerror(F)}),Promise.reject(F)})})}}})}})}};function ho(o,l,h){try{if(!l||l.keys.length<o.length)return null;for(var f=[],g=0,m=0;g<l.keys.length&&m<o.length;++g)ht(l.keys[g],o[m])===0&&(f.push(h?wt(l.values[g]):l.values[g]),++m);return f.length===o.length?f:null}catch{return null}}var Jl={stack:"dbcore",level:-1,create:function(o){return{table:function(l){var h=o.table(l);return i(i({},h),{getMany:function(f){if(!f.cache)return h.getMany(f);var g=ho(f.keys,f.trans._cache,f.cache==="clone");return g?J.resolve(g):h.getMany(f).then(function(m){return f.trans._cache={keys:f.keys,values:f.cache==="clone"?wt(m):m},m})},mutate:function(f){return f.type!=="add"&&(f.trans._cache=null),h.mutate(f)}})}}}};function fo(o,l){return o.trans.mode==="readonly"&&!!o.subscr&&!o.trans.explicit&&o.trans.db._options.cache!=="disabled"&&!l.schema.primaryKey.outbound}function po(o,l){switch(o){case"query":return l.values&&!l.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Zl={stack:"dbcore",level:0,name:"Observability",create:function(o){var l=o.schema.name,h=new Tt(o.MIN_KEY,o.MAX_KEY);return i(i({},o),{transaction:function(f,g,m){if(tt.subscr&&g!=="readonly")throw new et.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(tt.querier));return o.transaction(f,g,m)},table:function(f){var g=o.table(f),m=g.schema,b=m.primaryKey,w=m.indexes,x=b.extractKey,k=b.outbound,S=b.autoIncrement&&w.filter(function(M){return M.compound&&M.keyPath.includes(b.keyPath)}),A=i(i({},g),{mutate:function(M){function O(q){return q="idb://".concat(l,"/").concat(f,"/").concat(q),F[q]||(F[q]=new Tt)}var D,T,R,L=M.trans,F=M.mutatedParts||(M.mutatedParts={}),z=O(""),W=O(":dels"),X=M.type,G=M.type==="deleteRange"?[M.range]:M.type==="delete"?[M.keys]:M.values.length<50?[Ws(b,M).filter(function(q){return q}),M.values]:[],K=G[0],V=G[1],G=M.trans._cache;return c(K)?(z.addKeys(K),(G=X==="delete"||K.length===V.length?ho(K,G):null)||W.addKeys(K),(G||V)&&(D=O,T=G,R=V,m.indexes.forEach(function(q){var Z=D(q.name||"");function st(lt){return lt!=null?q.extractKey(lt):null}function rt(lt){return q.multiEntry&&c(lt)?lt.forEach(function(Wt){return Z.addKey(Wt)}):Z.addKey(lt)}(T||R).forEach(function(lt,It){var it=T&&st(T[It]),It=R&&st(R[It]);ht(it,It)!==0&&(it!=null&&rt(it),It!=null&&rt(It))})}))):K?(V={from:(V=K.lower)!==null&&V!==void 0?V:o.MIN_KEY,to:(V=K.upper)!==null&&V!==void 0?V:o.MAX_KEY},W.add(V),z.add(V)):(z.add(h),W.add(h),m.indexes.forEach(function(q){return O(q.name).add(h)})),g.mutate(M).then(function(q){return!K||M.type!=="add"&&M.type!=="put"||(z.addKeys(q.results),S&&S.forEach(function(Z){for(var st=M.values.map(function(it){return Z.extractKey(it)}),rt=Z.keyPath.findIndex(function(it){return it===b.keyPath}),lt=0,Wt=q.results.length;lt<Wt;++lt)st[lt][rt]=q.results[lt];O(Z.name).addKeys(st)})),L.mutatedParts=Ci(L.mutatedParts||{},F),q})}}),w=function(O){var D=O.query,O=D.index,D=D.range;return[O,new Tt((O=D.lower)!==null&&O!==void 0?O:o.MIN_KEY,(D=D.upper)!==null&&D!==void 0?D:o.MAX_KEY)]},I={get:function(M){return[b,new Tt(M.key)]},getMany:function(M){return[b,new Tt().addKeys(M.keys)]},count:w,query:w,openCursor:w};return a(I).forEach(function(M){A[M]=function(O){var D=tt.subscr,T=!!D,R=fo(tt,g)&&po(M,O)?O.obsSet={}:D;if(T){var L=function(V){return V="idb://".concat(l,"/").concat(f,"/").concat(V),R[V]||(R[V]=new Tt)},F=L(""),z=L(":dels"),D=I[M](O),T=D[0],D=D[1];if((M==="query"&&T.isPrimaryKey&&!O.values?z:L(T.name||"")).add(D),!T.isPrimaryKey){if(M!=="count"){var W=M==="query"&&k&&O.values&&g.query(i(i({},O),{values:!1}));return g[M].apply(this,arguments).then(function(V){if(M==="query"){if(k&&O.values)return W.then(function(st){return st=st.result,F.addKeys(st),V});var G=O.values?V.result.map(x):V.result;(O.values?F:z).addKeys(G)}else if(M==="openCursor"){var q=V,Z=O.values;return q&&Object.create(q,{key:{get:function(){return z.addKey(q.primaryKey),q.key}},primaryKey:{get:function(){var st=q.primaryKey;return z.addKey(st),st}},value:{get:function(){return Z&&F.addKey(q.primaryKey),q.value}}})}return V})}z.add(h)}}return g[M].apply(this,arguments)}}),A}})}};function go(o,l,h){if(h.numFailures===0)return l;if(l.type==="deleteRange")return null;var f=l.keys?l.keys.length:"values"in l&&l.values?l.values.length:1;return h.numFailures===f?null:(l=i({},l),c(l.keys)&&(l.keys=l.keys.filter(function(g,m){return!(m in h.failures)})),"values"in l&&c(l.values)&&(l.values=l.values.filter(function(g,m){return!(m in h.failures)})),l)}function $s(o,l){return h=o,((f=l).lower===void 0||(f.lowerOpen?0<ht(h,f.lower):0<=ht(h,f.lower)))&&(o=o,(l=l).upper===void 0||(l.upperOpen?ht(o,l.upper)<0:ht(o,l.upper)<=0));var h,f}function mo(o,l,I,f,g,m){if(!I||I.length===0)return o;var b=l.query.index,x=b.multiEntry,k=l.query.range,S=f.schema.primaryKey.extractKey,A=b.extractKey,w=(b.lowLevelIndex||b).extractKey,I=I.reduce(function(M,O){var D=M,T=[];if(O.type==="add"||O.type==="put")for(var R=new Tt,L=O.values.length-1;0<=L;--L){var F,z=O.values[L],W=S(z);R.hasKey(W)||(F=A(z),(x&&c(F)?F.some(function(q){return $s(q,k)}):$s(F,k))&&(R.addKey(W),T.push(z)))}switch(O.type){case"add":var X=new Tt().addKeys(l.values?M.map(function(Z){return S(Z)}):M),D=M.concat(l.values?T.filter(function(Z){return Z=S(Z),!X.hasKey(Z)&&(X.addKey(Z),!0)}):T.map(function(Z){return S(Z)}).filter(function(Z){return!X.hasKey(Z)&&(X.addKey(Z),!0)}));break;case"put":var K=new Tt().addKeys(O.values.map(function(Z){return S(Z)}));D=M.filter(function(Z){return!K.hasKey(l.values?S(Z):Z)}).concat(l.values?T:T.map(function(Z){return S(Z)}));break;case"delete":var V=new Tt().addKeys(O.keys);D=M.filter(function(Z){return!V.hasKey(l.values?S(Z):Z)});break;case"deleteRange":var G=O.range;D=M.filter(function(Z){return!$s(S(Z),G)})}return D},o);return I===o?o:(I.sort(function(M,O){return ht(w(M),w(O))||ht(S(M),S(O))}),l.limit&&l.limit<1/0&&(I.length>l.limit?I.length=l.limit:o.length===l.limit&&I.length<l.limit&&(g.dirty=!0)),m?Object.freeze(I):I)}function yo(o,l){return ht(o.lower,l.lower)===0&&ht(o.upper,l.upper)===0&&!!o.lowerOpen==!!l.lowerOpen&&!!o.upperOpen==!!l.upperOpen}function tc(o,l){return function(h,f,g,m){if(h===void 0)return f!==void 0?-1:0;if(f===void 0)return 1;if((f=ht(h,f))===0){if(g&&m)return 0;if(g)return 1;if(m)return-1}return f}(o.lower,l.lower,o.lowerOpen,l.lowerOpen)<=0&&0<=function(h,f,g,m){if(h===void 0)return f!==void 0?1:0;if(f===void 0)return-1;if((f=ht(h,f))===0){if(g&&m)return 0;if(g)return-1;if(m)return 1}return f}(o.upper,l.upper,o.upperOpen,l.upperOpen)}function ec(o,l,h,f){o.subscribers.add(h),f.addEventListener("abort",function(){var g,m;o.subscribers.delete(h),o.subscribers.size===0&&(g=o,m=l,setTimeout(function(){g.subscribers.size===0&&Vt(m,g)},3e3))})}var nc={stack:"dbcore",level:0,name:"Cache",create:function(o){var l=o.schema.name;return i(i({},o),{transaction:function(h,f,g){var m,b,x=o.transaction(h,f,g);return f==="readwrite"&&(b=(m=new AbortController).signal,g=function(k){return function(){if(m.abort(),f==="readwrite"){for(var S=new Set,A=0,w=h;A<w.length;A++){var I=w[A],M=$e["idb://".concat(l,"/").concat(I)];if(M){var O=o.table(I),D=M.optimisticOps.filter(function(Z){return Z.trans===x});if(x._explicit&&k&&x.mutatedParts)for(var T=0,R=Object.values(M.queries.query);T<R.length;T++)for(var L=0,F=(X=R[T]).slice();L<F.length;L++)Fs((K=F[L]).obsSet,x.mutatedParts)&&(Vt(X,K),K.subscribers.forEach(function(Z){return S.add(Z)}));else if(0<D.length){M.optimisticOps=M.optimisticOps.filter(function(Z){return Z.trans!==x});for(var z=0,W=Object.values(M.queries.query);z<W.length;z++)for(var X,K,V,G=0,q=(X=W[z]).slice();G<q.length;G++)(K=q[G]).res!=null&&x.mutatedParts&&(k&&!K.dirty?(V=Object.isFrozen(K.res),V=mo(K.res,K.req,D,O,K,V),K.dirty?(Vt(X,K),K.subscribers.forEach(function(Z){return S.add(Z)})):V!==K.res&&(K.res=V,K.promise=J.resolve({result:V}))):(K.dirty&&Vt(X,K),K.subscribers.forEach(function(Z){return S.add(Z)})))}}}S.forEach(function(Z){return Z()})}}},x.addEventListener("abort",g(!1),{signal:b}),x.addEventListener("error",g(!1),{signal:b}),x.addEventListener("complete",g(!0),{signal:b})),x},table:function(h){var f=o.table(h),g=f.schema.primaryKey;return i(i({},f),{mutate:function(m){var b=tt.trans;if(g.outbound||b.db._options.cache==="disabled"||b.explicit||b.idbtrans.mode!=="readwrite")return f.mutate(m);var x=$e["idb://".concat(l,"/").concat(h)];return x?(b=f.mutate(m),m.type!=="add"&&m.type!=="put"||!(50<=m.values.length||Ws(g,m).some(function(k){return k==null}))?(x.optimisticOps.push(m),m.mutatedParts&&Ai(m.mutatedParts),b.then(function(k){0<k.numFailures&&(Vt(x.optimisticOps,m),(k=go(0,m,k))&&x.optimisticOps.push(k),m.mutatedParts&&Ai(m.mutatedParts))}),b.catch(function(){Vt(x.optimisticOps,m),m.mutatedParts&&Ai(m.mutatedParts)})):b.then(function(k){var S=go(0,i(i({},m),{values:m.values.map(function(A,w){var I;return k.failures[w]?A:(A=(I=g.keyPath)!==null&&I!==void 0&&I.includes(".")?wt(A):i({},A),$(A,g.keyPath,k.results[w]),A)})}),k);x.optimisticOps.push(S),queueMicrotask(function(){return m.mutatedParts&&Ai(m.mutatedParts)})}),b):f.mutate(m)},query:function(m){if(!fo(tt,f)||!po("query",m))return f.query(m);var b=((S=tt.trans)===null||S===void 0?void 0:S.db._options.cache)==="immutable",w=tt,x=w.requery,k=w.signal,S=function(O,D,T,R){var L=$e["idb://".concat(O,"/").concat(D)];if(!L)return[];if(!(D=L.queries[T]))return[null,!1,L,null];var F=D[(R.query?R.query.index.name:null)||""];if(!F)return[null,!1,L,null];switch(T){case"query":var z=F.find(function(W){return W.req.limit===R.limit&&W.req.values===R.values&&yo(W.req.query.range,R.query.range)});return z?[z,!0,L,F]:[F.find(function(W){return("limit"in W.req?W.req.limit:1/0)>=R.limit&&(!R.values||W.req.values)&&tc(W.req.query.range,R.query.range)}),!1,L,F];case"count":return z=F.find(function(W){return yo(W.req.query.range,R.query.range)}),[z,!!z,L,F]}}(l,h,"query",m),A=S[0],w=S[1],I=S[2],M=S[3];return A&&w?A.obsSet=m.obsSet:(w=f.query(m).then(function(O){var D=O.result;if(A&&(A.res=D),b){for(var T=0,R=D.length;T<R;++T)Object.freeze(D[T]);Object.freeze(D)}else O.result=wt(D);return O}).catch(function(O){return M&&A&&Vt(M,A),Promise.reject(O)}),A={obsSet:m.obsSet,promise:w,subscribers:new Set,type:"query",req:m,dirty:!1},M?M.push(A):(M=[A],(I=I||($e["idb://".concat(l,"/").concat(h)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[m.query.index.name||""]=M)),ec(A,M,x,k),A.promise.then(function(O){return{result:mo(O.result,m,I==null?void 0:I.optimisticOps,f,A,b)}})}})}})}};function Ii(o,l){return new Proxy(o,{get:function(h,f,g){return f==="db"?l:Reflect.get(h,f,g)}})}var pe=(Mt.prototype.version=function(o){if(isNaN(o)||o<.1)throw new et.Type("Given version is not a positive number");if(o=Math.round(10*o)/10,this.idbdb||this._state.isBeingOpened)throw new et.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,o);var l=this._versions,h=l.filter(function(f){return f._cfg.version===o})[0];return h||(h=new this.Version(o),l.push(h),l.sort(Vl),h.stores({}),this._state.autoSchema=!1,h)},Mt.prototype._whenReady=function(o){var l=this;return this.idbdb&&(this._state.openComplete||tt.letThrough||this._vip)?o():new J(function(h,f){if(l._state.openComplete)return f(new et.DatabaseClosed(l._state.dbOpenError));if(!l._state.isBeingOpened){if(!l._state.autoOpen)return void f(new et.DatabaseClosed);l.open().catch(mt)}l._state.dbReadyPromise.then(h,f)}).then(o)},Mt.prototype.use=function(o){var l=o.stack,h=o.create,f=o.level,g=o.name;return g&&this.unuse({stack:l,name:g}),o=this._middlewares[l]||(this._middlewares[l]=[]),o.push({stack:l,create:h,level:f??10,name:g}),o.sort(function(m,b){return m.level-b.level}),this},Mt.prototype.unuse=function(o){var l=o.stack,h=o.name,f=o.create;return l&&this._middlewares[l]&&(this._middlewares[l]=this._middlewares[l].filter(function(g){return f?g.create!==f:!!h&&g.name!==h})),this},Mt.prototype.open=function(){var o=this;return He(Se,function(){return Xl(o)})},Mt.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var o=this._state,l=ln.indexOf(this);if(0<=l&&ln.splice(l,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}o.isBeingOpened||(o.dbReadyPromise=new J(function(h){o.dbReadyResolve=h}),o.openCanceller=new J(function(h,f){o.cancelOpen=f}))},Mt.prototype.close=function(h){var l=(h===void 0?{disableAutoOpen:!0}:h).disableAutoOpen,h=this._state;l?(h.isBeingOpened&&h.cancelOpen(new et.DatabaseClosed),this._close(),h.autoOpen=!1,h.dbOpenError=new et.DatabaseClosed):(this._close(),h.autoOpen=this._options.autoOpen||h.isBeingOpened,h.openComplete=!1,h.dbOpenError=null)},Mt.prototype.delete=function(o){var l=this;o===void 0&&(o={disableAutoOpen:!0});var h=0<arguments.length&&typeof arguments[0]!="object",f=this._state;return new J(function(g,m){function b(){l.close(o);var x=l._deps.indexedDB.deleteDatabase(l.name);x.onsuccess=xt(function(){var k,S,A;k=l._deps,S=l.name,A=k.indexedDB,k=k.IDBKeyRange,Rs(A)||S===bi||Is(A,k).delete(S).catch(mt),g()}),x.onerror=oe(m),x.onblocked=l._fireOnBlocked}if(h)throw new et.InvalidArgument("Invalid closeOptions argument to db.delete()");f.isBeingOpened?f.dbReadyPromise.then(b):b()})},Mt.prototype.backendDB=function(){return this.idbdb},Mt.prototype.isOpen=function(){return this.idbdb!==null},Mt.prototype.hasBeenClosed=function(){var o=this._state.dbOpenError;return o&&o.name==="DatabaseClosed"},Mt.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Mt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Mt.prototype,"tables",{get:function(){var o=this;return a(this._allTables).map(function(l){return o._allTables[l]})},enumerable:!1,configurable:!0}),Mt.prototype.transaction=function(){var o=(function(l,h,f){var g=arguments.length;if(g<2)throw new et.InvalidArgument("Too few arguments");for(var m=new Array(g-1);--g;)m[g-1]=arguments[g];return f=m.pop(),[l,ct(m),f]}).apply(this,arguments);return this._transaction.apply(this,o)},Mt.prototype._transaction=function(o,l,h){var f=this,g=tt.trans;g&&g.db===this&&o.indexOf("!")===-1||(g=null);var m,b,x=o.indexOf("?")!==-1;o=o.replace("!","").replace("?","");try{if(b=l.map(function(S){if(S=S instanceof f.Table?S.name:S,typeof S!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return S}),o=="r"||o===ws)m=ws;else{if(o!="rw"&&o!=ks)throw new et.InvalidArgument("Invalid transaction mode: "+o);m=ks}if(g){if(g.mode===ws&&m===ks){if(!x)throw new et.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");g=null}g&&b.forEach(function(S){if(g&&g.storeNames.indexOf(S)===-1){if(!x)throw new et.SubTransaction("Table "+S+" not included in parent transaction.");g=null}}),x&&g&&!g.active&&(g=null)}}catch(S){return g?g._promise(null,function(A,w){w(S)}):St(S)}var k=(function S(A,w,I,M,O){return J.resolve().then(function(){var D=tt.transless||tt,T=A._createTransaction(w,I,A._dbSchema,M);if(T.explicit=!0,D={trans:T,transless:D},M)T.idbtrans=M.idbtrans;else try{T.create(),T.idbtrans._explicit=!0,A._state.PR1398_maxLoop=3}catch(F){return F.name===ds.InvalidState&&A.isOpen()&&0<--A._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),A.close({disableAutoOpen:!1}),A.open().then(function(){return S(A,w,I,null,O)})):St(F)}var R,L=we(O);return L&&an(),D=J.follow(function(){var F;(R=O.call(T,T))&&(L?(F=Pe.bind(null,null),R.then(F,F)):typeof R.next=="function"&&typeof R.throw=="function"&&(R=Hs(R)))},D),(R&&typeof R.then=="function"?J.resolve(R).then(function(F){return T.active?F:St(new et.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):D.then(function(){return R})).then(function(F){return M&&T._resolve(),T._completion.then(function(){return F})}).catch(function(F){return T._reject(F),St(F)})})}).bind(null,this,m,b,g,h);return g?g._promise(m,k,"lock"):tt.trans?He(tt.transless,function(){return f._whenReady(k)}):this._whenReady(k)},Mt.prototype.table=function(o){if(!y(this._allTables,o))throw new et.InvalidTable("Table ".concat(o," does not exist"));return this._allTables[o]},Mt);function Mt(o,l){var h=this;this._middlewares={},this.verno=0;var f=Mt.dependencies;this._options=l=i({addons:Mt.addons,autoOpen:!0,indexedDB:f.indexedDB,IDBKeyRange:f.IDBKeyRange,cache:"cloned"},l),this._deps={indexedDB:l.indexedDB,IDBKeyRange:l.IDBKeyRange},f=l.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var g,m,b,x,k,S={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:mt,dbReadyPromise:null,cancelOpen:mt,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:l.autoOpen};S.dbReadyPromise=new J(function(w){S.dbReadyResolve=w}),S.openCanceller=new J(function(w,I){S.cancelOpen=I}),this._state=S,this.name=o,this.on=On(this,"populate","blocked","versionchange","close",{ready:[fs,mt]}),this.once=function(w,I){var M=function(){for(var O=[],D=0;D<arguments.length;D++)O[D]=arguments[D];h.on(w).unsubscribe(M),I.apply(h,O)};return h.on(w,M)},this.on.ready.subscribe=Y(this.on.ready.subscribe,function(w){return function(I,M){Mt.vip(function(){var O,D=h._state;D.openComplete?(D.dbOpenError||J.resolve().then(I),M&&w(I)):D.onReadyBeingFired?(D.onReadyBeingFired.push(I),M&&w(I)):(w(I),O=h,M||w(function T(){O.on.ready.unsubscribe(I),O.on.ready.unsubscribe(T)}))})}}),this.Collection=(g=this,Dn(zl.prototype,function(R,T){this.db=g;var M=Vr,O=null;if(T)try{M=T()}catch(L){O=L}var D=R._ctx,T=D.table,R=T.hook.reading.fire;this._ctx={table:T,index:D.index,isPrimKey:!D.index||T.schema.primKey.keyPath&&D.index===T.schema.primKey.name,range:M,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:O,or:D.or,valueMapper:R!==xn?R:null}})),this.Table=(m=this,Dn(Qr.prototype,function(w,I,M){this.db=m,this._tx=M,this.name=w,this.schema=I,this.hook=m._allTables[w]?m._allTables[w].hook:On(null,{creating:[El,mt],reading:[Dl,xn],updating:[Al,mt],deleting:[Cl,mt]})})),this.Transaction=(b=this,Dn(Hl.prototype,function(w,I,M,O,D){var T=this;w!=="readonly"&&I.forEach(function(R){R=(R=M[R])===null||R===void 0?void 0:R.yProps,R&&(I=I.concat(R.map(function(L){return L.updatesTable})))}),this.db=b,this.mode=w,this.storeNames=I,this.schema=M,this.chromeTransactionDurability=O,this.idbtrans=null,this.on=On(this,"complete","error","abort"),this.parent=D||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new J(function(R,L){T._resolve=R,T._reject=L}),this._completion.then(function(){T.active=!1,T.on.complete.fire()},function(R){var L=T.active;return T.active=!1,T.on.error.fire(R),T.parent?T.parent._reject(R):L&&T.idbtrans&&T.idbtrans.abort(),St(R)})})),this.Version=(x=this,Dn(Yl.prototype,function(w){this.db=x,this._cfg={version:w,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(k=this,Dn(no.prototype,function(w,I,M){if(this.db=k,this._ctx={table:w,index:I===":id"?null:I,or:M},this._cmp=this._ascending=ht,this._descending=function(O,D){return ht(D,O)},this._max=function(O,D){return 0<ht(O,D)?O:D},this._min=function(O,D){return ht(O,D)<0?O:D},this._IDBKeyRange=k._deps.IDBKeyRange,!this._IDBKeyRange)throw new et.MissingAPI})),this.on("versionchange",function(w){0<w.newVersion?console.warn("Another connection wants to upgrade database '".concat(h.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(h.name,"'. Closing db now to resume the delete request.")),h.close({disableAutoOpen:!1})}),this.on("blocked",function(w){!w.newVersion||w.newVersion<w.oldVersion?console.warn("Dexie.delete('".concat(h.name,"') was blocked")):console.warn("Upgrade '".concat(h.name,"' blocked by other connection holding version ").concat(w.oldVersion/10))}),this._maxKey=An(l.IDBKeyRange),this._createTransaction=function(w,I,M,O){return new h.Transaction(w,I,M,h._options.chromeTransactionDurability,O)},this._fireOnBlocked=function(w){h.on("blocked").fire(w),ln.filter(function(I){return I.name===h.name&&I!==h&&!I._state.vcFired}).map(function(I){return I.on("versionchange").fire(w)})},this.use(Jl),this.use(nc),this.use(Zl),this.use(Gl),this.use(Ql);var A=new Proxy(this,{get:function(w,I,M){if(I==="_vip")return!0;if(I==="table")return function(D){return Ii(h.table(D),A)};var O=Reflect.get(w,I,M);return O instanceof Qr?Ii(O,A):I==="tables"?O.map(function(D){return Ii(D,A)}):I==="_createTransaction"?function(){return Ii(O.apply(this,arguments),A)}:O}});this.vip=A,f.forEach(function(w){return w(h)})}var Ri,Ut=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",ic=(Vs.prototype.subscribe=function(o,l,h){return this._subscribe(o&&typeof o!="function"?o:{next:o,error:l,complete:h})},Vs.prototype[Ut]=function(){return this},Vs);function Vs(o){this._subscribe=o}try{Ri={indexedDB:r.indexedDB||r.mozIndexedDB||r.webkitIndexedDB||r.msIndexedDB,IDBKeyRange:r.IDBKeyRange||r.webkitIDBKeyRange}}catch{Ri={indexedDB:null,IDBKeyRange:null}}function bo(o){var l,h=!1,f=new ic(function(g){var m=we(o),b,x=!1,k={},S={},A={get closed(){return x},unsubscribe:function(){x||(x=!0,b&&b.abort(),w&&Ee.storagemutated.unsubscribe(M))}};g.start&&g.start(A);var w=!1,I=function(){return xs(O)},M=function(D){Ci(k,D),Fs(S,k)&&I()},O=function(){var D,T,R;!x&&Ri.indexedDB&&(k={},D={},b&&b.abort(),b=new AbortController,R=function(L){var F=rn();try{m&&an();var z=Me(o,L);return z=m?z.finally(Pe):z}finally{F&&on()}}(T={subscr:D,signal:b.signal,requery:I,querier:o,trans:null}),Promise.resolve(R).then(function(L){h=!0,l=L,x||T.signal.aborted||(k={},function(F){for(var z in F)if(y(F,z))return;return 1}(S=D)||w||(Ee(Cn,M),w=!0),xs(function(){return!x&&g.next&&g.next(L)}))},function(L){h=!1,["DatabaseClosedError","AbortError"].includes(L==null?void 0:L.name)||x||xs(function(){x||g.error&&g.error(L)})}))};return setTimeout(I,0),A});return f.hasValue=function(){return h},f.getValue=function(){return l},f}var Ve=pe;function qs(o){var l=Ce;try{Ce=!0,Ee.storagemutated.fire(o),Ns(o,!0)}finally{Ce=l}}v(Ve,i(i({},ci),{delete:function(o){return new Ve(o,{addons:[]}).delete()},exists:function(o){return new Ve(o,{addons:[]}).open().then(function(l){return l.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(o){try{return l=Ve.dependencies,h=l.indexedDB,l=l.IDBKeyRange,(Rs(h)?Promise.resolve(h.databases()).then(function(f){return f.map(function(g){return g.name}).filter(function(g){return g!==bi})}):Is(h,l).toCollection().primaryKeys()).then(o)}catch{return St(new et.MissingAPI)}var l,h},defineClass:function(){return function(o){u(this,o)}},ignoreTransaction:function(o){return tt.trans?He(tt.transless,o):o()},vip:Ls,async:function(o){return function(){try{var l=Hs(o.apply(this,arguments));return l&&typeof l.then=="function"?l:J.resolve(l)}catch(h){return St(h)}}},spawn:function(o,l,h){try{var f=Hs(o.apply(h,l||[]));return f&&typeof f.then=="function"?f:J.resolve(f)}catch(g){return St(g)}},currentTransaction:{get:function(){return tt.trans||null}},waitFor:function(o,l){return l=J.resolve(typeof o=="function"?Ve.ignoreTransaction(o):o).timeout(l||6e4),tt.trans?tt.trans.waitFor(l):l},Promise:J,debug:{get:function(){return re},set:function(o){zr(o)}},derive:E,extend:u,props:v,override:Y,Events:On,on:Ee,liveQuery:bo,extendObservabilitySet:Ci,getByKeyPath:Q,setByKeyPath:$,delByKeyPath:function(o,l){typeof l=="string"?$(o,l,void 0):"length"in l&&[].map.call(l,function(h){$(o,h,void 0)})},shallowClone:U,deepClone:wt,getObjectDiff:Ks,cmp:ht,asap:N,minKey:-1/0,addons:[],connections:ln,errnames:ds,dependencies:Ri,cache:$e,semVer:"4.2.1",version:"4.2.1".split(".").map(function(o){return parseInt(o)}).reduce(function(o,l,h){return o+l/Math.pow(10,2*h)})})),Ve.maxKey=An(Ve.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Ee(Cn,function(o){Ce||(o=new CustomEvent(Ps,{detail:o}),Ce=!0,dispatchEvent(o),Ce=!1)}),addEventListener(Ps,function(o){o=o.detail,Ce||qs(o)}));var dn,Ce=!1,vo=function(){};return typeof BroadcastChannel<"u"&&((vo=function(){(dn=new BroadcastChannel(Ps)).onmessage=function(o){return o.data&&qs(o.data)}})(),typeof dn.unref=="function"&&dn.unref(),Ee(Cn,function(o){Ce||dn.postMessage(o)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(o){if(!pe.disableBfCache&&o.persisted){re&&console.debug("Dexie: handling persisted pagehide"),dn!=null&&dn.close();for(var l=0,h=ln;l<h.length;l++)h[l].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(o){!pe.disableBfCache&&o.persisted&&(re&&console.debug("Dexie: handling persisted pageshow"),vo(),qs({all:new Tt(-1/0,[[]])}))})),J.rejectionMapper=function(o,l){return!o||o instanceof qt||o instanceof TypeError||o instanceof SyntaxError||!o.name||!Fr[o.name]?o:(l=new Fr[o.name](l||o.message,o),"stack"in o&&C(l,"stack",{get:function(){return this.inner.stack}}),l)},zr(re),i(pe,Object.freeze({__proto__:null,Dexie:pe,liveQuery:bo,Entity:qr,cmp:ht,PropModification:Pn,replacePrefix:function(o,l){return new Pn({replacePrefix:[o,l]})},add:function(o){return new Pn({add:o})},remove:function(o){return new Pn({remove:o})},default:pe,RangeSet:Tt,mergeRanges:Rn,rangesOverlap:ao}),{default:pe}),pe})})(Ra);var cc=Ra.exports;const or=lc(cc),wo=Symbol.for("Dexie"),Zi=globalThis[wo]||(globalThis[wo]=or);if(or.semVer!==Zi.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${or.semVer} and ${Zi.semVer}`);const{liveQuery:sp,mergeRanges:rp,rangesOverlap:op,RangeSet:ap,cmp:lp,Entity:cp,PropModification:up,replacePrefix:hp,add:dp,remove:fp,DexieYProvider:pp}=Zi;function La(n){if(typeof n!="object"||n===null)throw new Error("Invalid reading: expected an object");const t=["systolic","diastolic","pulse","timestamp"];for(const s of t)if(!(s in n))throw new Error(`Invalid reading: missing '${s}'`);const e={...n};for(const s of["systolic","diastolic","pulse"]){const r=e[s],a=typeof r=="string"?Number(r):r;if(typeof a!="number"||Number.isNaN(a))throw new Error(`Invalid reading: '${s}' must be a number`);e[s]=a}const i=e.timestamp;if(i instanceof Date){if(Number.isNaN(i.getTime()))throw new Error("Invalid reading: timestamp is an invalid Date")}else if(typeof i=="string"||typeof i=="number"){const s=new Date(i);if(Number.isNaN(s.getTime()))throw new Error("Invalid reading: timestamp must be a valid ISO string, number, or Date");e.timestamp=s}else throw new Error("Invalid reading: timestamp must be a Date, ISO string, or number");return e}class uc extends Zi{constructor(){super("BloodPressureDB"),this.version(1).stores({readings:"++id, systolic, diastolic, pulse, timestamp, category, userId",users:"++id, username, created"})}}const de=new uc,_r="bpCurrentUser";async function hc(n){const t=await de.users.where("username").equals(n).first();return t||{id:await de.users.add({username:n,created:new Date}),username:n,created:new Date}}function Zn(){try{const n=localStorage.getItem(_r);return n?JSON.parse(n):null}catch{return null}}async function ar(n){if(!n||typeof n!="string")throw new Error("Username required");const t=await hc(n.trim());return localStorage.setItem(_r,JSON.stringify({id:t.id,username:t.username})),t}function Ba(){localStorage.removeItem(_r)}async function dc(){return await de.users.toArray()}async function fc(){try{const n=localStorage.getItem("bpHistory");if(n){const t=JSON.parse(n);console.log("Migrating",t.length,"readings from localStorage to IndexedDB");for(const e of t)await de.readings.add({systolic:e.systolic,diastolic:e.diastolic,pulse:e.pulse,timestamp:new Date(e.date),category:null,userId:null});localStorage.removeItem("bpHistory"),console.log("Migration completed successfully")}}catch(n){console.error("Error migrating from localStorage:",n)}}let Ys=null;async function ai(){Ys||(Ys=fc()),await Ys}async function Fa(n){await ai();const e={...La({systolic:n.systolic,diastolic:n.diastolic,pulse:n.pulse,timestamp:n.timestamp??n.date}),category:null,userId:Zn()&&Zn().id||null};try{await de.readings.add(e),console.log("Reading saved to IndexedDB:",e)}catch(i){throw console.error("Error saving reading:",i),i.name==="QuotaExceededError"||i.name==="AbortError"||i.inner&&i.inner.name==="QuotaExceededError"?alert("Unable to save: Storage quota exceeded. Try clearing browser data or use a different browser mode."):alert("Failed to save reading. Please try again."),i}}async function pc(){await ai();const n=Zn();let t;return n&&n.id!=null?t=await de.readings.where("userId").equals(n.id).toArray():t=await de.readings.filter(e=>e.userId==null).toArray(),t.sort((e,i)=>new Date(i.timestamp)-new Date(e.timestamp)),t.map(e=>({systolic:e.systolic,diastolic:e.diastolic,pulse:e.pulse,date:e.timestamp.toISOString(),id:e.id}))}async function gc(n){return await ai(),await de.readings.get(n)}async function za(n){if(await ai(),n==null){console.warn("deleteReadingById called with null/undefined id");return}try{await de.readings.delete(n),console.log("Reading deleted from IndexedDB by id:",n)}catch(t){throw console.error("Error deleting reading by id:",t),t}}async function mc(n){await ai();const t=La(n);try{await de.readings.add(t),console.log("Reading restored to IndexedDB:",t)}catch(e){throw console.error("Error restoring reading:",e),e}}const gn=Object.freeze(Object.defineProperty({__proto__:null,clearCurrentUser:Ba,deleteReadingById:za,getAllUsers:dc,getCurrentUserSync:Zn,getReadingById:gc,getReadings:pc,restoreReading:mc,saveReading:Fa,setCurrentUser:ar},Symbol.toStringTag,{value:"Module"})),yc={systolic:{ranges:[{min:0,max:120,class:"normal"},{min:120,max:130,class:"elevated"},{min:130,max:140,class:"high1"},{min:140,max:180,class:"high2"},{min:180,max:250,class:"critical"}],totalRange:{min:0,max:250}},diastolic:{ranges:[{min:0,max:80,class:"normal"},{min:80,max:90,class:"high1"},{min:90,max:120,class:"high2"},{min:120,max:150,class:"critical"}],totalRange:{min:0,max:150}},pulse:{ranges:[{min:30,max:60,class:"low"},{min:60,max:100,class:"normal"},{min:100,max:200,class:"high"}],totalRange:{min:30,max:200}}};function bc(n,t){const{min:e,max:i}=t.totalRange;return(Math.max(e,Math.min(i,n))-e)/(i-e)*100}function Xs(n,t){const e=document.getElementById(`${n}-indicator`),i=yc[n];if(!e||!i||!t||isNaN(t)){e==null||e.classList.remove("active");return}const s=bc(t,i);e.style.left=`${s}%`,e.classList.add("active")}function vc(){const n=document.getElementById("systolic"),t=document.getElementById("diastolic"),e=document.getElementById("pulse");n&&n.addEventListener("input",i=>{Xs("systolic",parseInt(i.target.value))}),t&&t.addEventListener("input",i=>{Xs("diastolic",parseInt(i.target.value))}),e&&e.addEventListener("input",i=>{Xs("pulse",parseInt(i.target.value))}),console.log("Visual scales initialized")}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function li(n){return n+.5|0}const Te=(n,t,e)=>Math.max(Math.min(n,e),t);function Nn(n){return Te(li(n*2.55),0,255)}function Re(n){return Te(li(n*255),0,255)}function be(n){return Te(li(n/2.55)/100,0,1)}function ko(n){return Te(li(n*100),0,100)}const Yt={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},lr=[..."0123456789ABCDEF"],_c=n=>lr[n&15],xc=n=>lr[(n&240)>>4]+lr[n&15],Bi=n=>(n&240)>>4===(n&15),wc=n=>Bi(n.r)&&Bi(n.g)&&Bi(n.b)&&Bi(n.a);function kc(n){var t=n.length,e;return n[0]==="#"&&(t===4||t===5?e={r:255&Yt[n[1]]*17,g:255&Yt[n[2]]*17,b:255&Yt[n[3]]*17,a:t===5?Yt[n[4]]*17:255}:(t===7||t===9)&&(e={r:Yt[n[1]]<<4|Yt[n[2]],g:Yt[n[3]]<<4|Yt[n[4]],b:Yt[n[5]]<<4|Yt[n[6]],a:t===9?Yt[n[7]]<<4|Yt[n[8]]:255})),e}const Sc=(n,t)=>n<255?t(n):"";function Mc(n){var t=wc(n)?_c:xc;return n?"#"+t(n.r)+t(n.g)+t(n.b)+Sc(n.a,t):void 0}const Pc=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function ja(n,t,e){const i=t*Math.min(e,1-e),s=(r,a=(r+n/30)%12)=>e-i*Math.max(Math.min(a-3,9-a,1),-1);return[s(0),s(8),s(4)]}function Oc(n,t,e){const i=(s,r=(s+n/60)%6)=>e-e*t*Math.max(Math.min(r,4-r,1),0);return[i(5),i(3),i(1)]}function Dc(n,t,e){const i=ja(n,1,.5);let s;for(t+e>1&&(s=1/(t+e),t*=s,e*=s),s=0;s<3;s++)i[s]*=1-t-e,i[s]+=t;return i}function Ec(n,t,e,i,s){return n===s?(t-e)/i+(t<e?6:0):t===s?(e-n)/i+2:(n-t)/i+4}function xr(n){const e=n.r/255,i=n.g/255,s=n.b/255,r=Math.max(e,i,s),a=Math.min(e,i,s),c=(r+a)/2;let u,d,p;return r!==a&&(p=r-a,d=c>.5?p/(2-r-a):p/(r+a),u=Ec(e,i,s,p,r),u=u*60+.5),[u|0,d||0,c]}function wr(n,t,e,i){return(Array.isArray(t)?n(t[0],t[1],t[2]):n(t,e,i)).map(Re)}function kr(n,t,e){return wr(ja,n,t,e)}function Cc(n,t,e){return wr(Dc,n,t,e)}function Ac(n,t,e){return wr(Oc,n,t,e)}function Na(n){return(n%360+360)%360}function Tc(n){const t=Pc.exec(n);let e=255,i;if(!t)return;t[5]!==i&&(e=t[6]?Nn(+t[5]):Re(+t[5]));const s=Na(+t[2]),r=+t[3]/100,a=+t[4]/100;return t[1]==="hwb"?i=Cc(s,r,a):t[1]==="hsv"?i=Ac(s,r,a):i=kr(s,r,a),{r:i[0],g:i[1],b:i[2],a:e}}function Ic(n,t){var e=xr(n);e[0]=Na(e[0]+t),e=kr(e),n.r=e[0],n.g=e[1],n.b=e[2]}function Rc(n){if(!n)return;const t=xr(n),e=t[0],i=ko(t[1]),s=ko(t[2]);return n.a<255?`hsla(${e}, ${i}%, ${s}%, ${be(n.a)})`:`hsl(${e}, ${i}%, ${s}%)`}const So={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Mo={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Lc(){const n={},t=Object.keys(Mo),e=Object.keys(So);let i,s,r,a,c;for(i=0;i<t.length;i++){for(a=c=t[i],s=0;s<e.length;s++)r=e[s],c=c.replace(r,So[r]);r=parseInt(Mo[a],16),n[c]=[r>>16&255,r>>8&255,r&255]}return n}let Fi;function Bc(n){Fi||(Fi=Lc(),Fi.transparent=[0,0,0,0]);const t=Fi[n.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const Fc=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function zc(n){const t=Fc.exec(n);let e=255,i,s,r;if(t){if(t[7]!==i){const a=+t[7];e=t[8]?Nn(a):Te(a*255,0,255)}return i=+t[1],s=+t[3],r=+t[5],i=255&(t[2]?Nn(i):Te(i,0,255)),s=255&(t[4]?Nn(s):Te(s,0,255)),r=255&(t[6]?Nn(r):Te(r,0,255)),{r:i,g:s,b:r,a:e}}}function jc(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${be(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const Gs=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,fn=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function Nc(n,t,e){const i=fn(be(n.r)),s=fn(be(n.g)),r=fn(be(n.b));return{r:Re(Gs(i+e*(fn(be(t.r))-i))),g:Re(Gs(s+e*(fn(be(t.g))-s))),b:Re(Gs(r+e*(fn(be(t.b))-r))),a:n.a+e*(t.a-n.a)}}function zi(n,t,e){if(n){let i=xr(n);i[t]=Math.max(0,Math.min(i[t]+i[t]*e,t===0?360:1)),i=kr(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function Ha(n,t){return n&&Object.assign(t||{},n)}function Po(n){var t={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(t={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(t.a=Re(n[3]))):(t=Ha(n,{r:0,g:0,b:0,a:1}),t.a=Re(t.a)),t}function Hc(n){return n.charAt(0)==="r"?zc(n):Tc(n)}class ti{constructor(t){if(t instanceof ti)return t;const e=typeof t;let i;e==="object"?i=Po(t):e==="string"&&(i=kc(t)||Bc(t)||Hc(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=Ha(this._rgb);return t&&(t.a=be(t.a)),t}set rgb(t){this._rgb=Po(t)}rgbString(){return this._valid?jc(this._rgb):void 0}hexString(){return this._valid?Mc(this._rgb):void 0}hslString(){return this._valid?Rc(this._rgb):void 0}mix(t,e){if(t){const i=this.rgb,s=t.rgb;let r;const a=e===r?.5:e,c=2*a-1,u=i.a-s.a,d=((c*u===-1?c:(c+u)/(1+c*u))+1)/2;r=1-d,i.r=255&d*i.r+r*s.r+.5,i.g=255&d*i.g+r*s.g+.5,i.b=255&d*i.b+r*s.b+.5,i.a=a*i.a+(1-a)*s.a,this.rgb=i}return this}interpolate(t,e){return t&&(this._rgb=Nc(this._rgb,t._rgb,e)),this}clone(){return new ti(this.rgb)}alpha(t){return this._rgb.a=Re(t),this}clearer(t){const e=this._rgb;return e.a*=1-t,this}greyscale(){const t=this._rgb,e=li(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=e,this}opaquer(t){const e=this._rgb;return e.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return zi(this._rgb,2,t),this}darken(t){return zi(this._rgb,2,-t),this}saturate(t){return zi(this._rgb,1,t),this}desaturate(t){return zi(this._rgb,1,-t),this}rotate(t){return Ic(this._rgb,t),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function ge(){}const Kc=(()=>{let n=0;return()=>n++})();function bt(n){return n==null}function Et(n){if(Array.isArray&&Array.isArray(n))return!0;const t=Object.prototype.toString.call(n);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function pt(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function Jt(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function le(n,t){return Jt(n)?n:t}function dt(n,t){return typeof n>"u"?t:n}const Wc=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*t:+n;function _t(n,t,e){if(n&&typeof n.call=="function")return n.apply(e,t)}function gt(n,t,e,i){let s,r,a;if(Et(n))for(r=n.length,s=0;s<r;s++)t.call(e,n[s],s);else if(pt(n))for(a=Object.keys(n),r=a.length,s=0;s<r;s++)t.call(e,n[a[s]],a[s])}function ts(n,t){let e,i,s,r;if(!n||!t||n.length!==t.length)return!1;for(e=0,i=n.length;e<i;++e)if(s=n[e],r=t[e],s.datasetIndex!==r.datasetIndex||s.index!==r.index)return!1;return!0}function es(n){if(Et(n))return n.map(es);if(pt(n)){const t=Object.create(null),e=Object.keys(n),i=e.length;let s=0;for(;s<i;++s)t[e[s]]=es(n[e[s]]);return t}return n}function Ka(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function $c(n,t,e,i){if(!Ka(n))return;const s=t[n],r=e[n];pt(s)&&pt(r)?ei(s,r,i):t[n]=es(r)}function ei(n,t,e){const i=Et(t)?t:[t],s=i.length;if(!pt(n))return n;e=e||{};const r=e.merger||$c;let a;for(let c=0;c<s;++c){if(a=i[c],!pt(a))continue;const u=Object.keys(a);for(let d=0,p=u.length;d<p;++d)r(u[d],n,a,e)}return n}function Vn(n,t){return ei(n,t,{merger:Vc})}function Vc(n,t,e){if(!Ka(n))return;const i=t[n],s=e[n];pt(i)&&pt(s)?Vn(i,s):Object.prototype.hasOwnProperty.call(t,n)||(t[n]=es(s))}const Oo={"":n=>n,x:n=>n.x,y:n=>n.y};function qc(n){const t=n.split("."),e=[];let i="";for(const s of t)i+=s,i.endsWith("\\")?i=i.slice(0,-1)+".":(e.push(i),i="");return e}function Uc(n){const t=qc(n);return e=>{for(const i of t){if(i==="")break;e=e&&e[i]}return e}}function ns(n,t){return(Oo[t]||(Oo[t]=Uc(t)))(n)}function Sr(n){return n.charAt(0).toUpperCase()+n.slice(1)}const is=n=>typeof n<"u",Le=n=>typeof n=="function",Do=(n,t)=>{if(n.size!==t.size)return!1;for(const e of n)if(!t.has(e))return!1;return!0};function Yc(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const Ct=Math.PI,he=2*Ct,Xc=he+Ct,ss=Number.POSITIVE_INFINITY,Gc=Ct/180,ne=Ct/2,Ue=Ct/4,Eo=Ct*2/3,Wa=Math.log10,yn=Math.sign;function qn(n,t,e){return Math.abs(n-t)<e}function Co(n){const t=Math.round(n);n=qn(n,t,n/1e3)?t:n;const e=Math.pow(10,Math.floor(Wa(n))),i=n/e;return(i<=1?1:i<=2?2:i<=5?5:10)*e}function Qc(n){const t=[],e=Math.sqrt(n);let i;for(i=1;i<e;i++)n%i===0&&(t.push(i),t.push(n/i));return e===(e|0)&&t.push(e),t.sort((s,r)=>s-r).pop(),t}function Jc(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function ni(n){return!Jc(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function Zc(n,t){const e=Math.round(n);return e-t<=n&&e+t>=n}function tu(n,t,e){let i,s,r;for(i=0,s=n.length;i<s;i++)r=n[i][e],isNaN(r)||(t.min=Math.min(t.min,r),t.max=Math.max(t.max,r))}function Je(n){return n*(Ct/180)}function eu(n){return n*(180/Ct)}function Ao(n){if(!Jt(n))return;let t=1,e=0;for(;Math.round(n*t)/t!==n;)t*=10,e++;return e}function nu(n,t){const e=t.x-n.x,i=t.y-n.y,s=Math.sqrt(e*e+i*i);let r=Math.atan2(i,e);return r<-.5*Ct&&(r+=he),{angle:r,distance:s}}function cr(n,t){return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}function iu(n,t){return(n-t+Xc)%he-Ct}function Ae(n){return(n%he+he)%he}function $a(n,t,e,i){const s=Ae(n),r=Ae(t),a=Ae(e),c=Ae(r-s),u=Ae(a-s),d=Ae(s-r),p=Ae(s-a);return s===r||s===a||i&&r===a||c>u&&d<p}function Gt(n,t,e){return Math.max(t,Math.min(e,n))}function su(n){return Gt(n,-32768,32767)}function Hn(n,t,e,i=1e-6){return n>=Math.min(t,e)-i&&n<=Math.max(t,e)+i}function Mr(n,t,e){e=e||(a=>n[a]<t);let i=n.length-1,s=0,r;for(;i-s>1;)r=s+i>>1,e(r)?s=r:i=r;return{lo:s,hi:i}}const Ze=(n,t,e,i)=>Mr(n,e,i?s=>{const r=n[s][t];return r<e||r===e&&n[s+1][t]===e}:s=>n[s][t]<e),ru=(n,t,e)=>Mr(n,e,i=>n[i][t]>=e);function ou(n,t,e){let i=0,s=n.length;for(;i<s&&n[i]<t;)i++;for(;s>i&&n[s-1]>e;)s--;return i>0||s<n.length?n.slice(i,s):n}const Va=["push","pop","shift","splice","unshift"];function au(n,t){if(n._chartjs){n._chartjs.listeners.push(t);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),Va.forEach(e=>{const i="_onData"+Sr(e),s=n[e];Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value(...r){const a=s.apply(this,r);return n._chartjs.listeners.forEach(c=>{typeof c[i]=="function"&&c[i](...r)}),a}})})}function To(n,t){const e=n._chartjs;if(!e)return;const i=e.listeners,s=i.indexOf(t);s!==-1&&i.splice(s,1),!(i.length>0)&&(Va.forEach(r=>{delete n[r]}),delete n._chartjs)}function lu(n){const t=new Set(n);return t.size===n.length?n:Array.from(t)}const qa=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function Ua(n,t){let e=[],i=!1;return function(...s){e=s,i||(i=!0,qa.call(window,()=>{i=!1,n.apply(t,e)}))}}function cu(n,t){let e;return function(...i){return t?(clearTimeout(e),e=setTimeout(n,t,i)):n.apply(this,i),t}}const Pr=n=>n==="start"?"left":n==="end"?"right":"center",Lt=(n,t,e)=>n==="start"?t:n==="end"?e:(t+e)/2,uu=(n,t,e,i)=>n===(i?"left":"right")?e:n==="center"?(t+e)/2:t;function hu(n,t,e){const i=t.length;let s=0,r=i;if(n._sorted){const{iScale:a,vScale:c,_parsed:u}=n,d=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null,p=a.axis,{min:y,max:v,minDefined:_,maxDefined:C}=a.getUserBounds();if(_){if(s=Math.min(Ze(u,p,y).lo,e?i:Ze(t,p,a.getPixelForValue(y)).lo),d){const E=u.slice(0,s+1).reverse().findIndex(P=>!bt(P[c.axis]));s-=Math.max(0,E)}s=Gt(s,0,i-1)}if(C){let E=Math.max(Ze(u,a.axis,v,!0).hi+1,e?0:Ze(t,p,a.getPixelForValue(v),!0).hi+1);if(d){const P=u.slice(E-1).findIndex(B=>!bt(B[c.axis]));E+=Math.max(0,P)}r=Gt(E,s,i)-s}else r=i-s}return{start:s,count:r}}function du(n){const{xScale:t,yScale:e,_scaleRanges:i}=n,s={xmin:t.min,xmax:t.max,ymin:e.min,ymax:e.max};if(!i)return n._scaleRanges=s,!0;const r=i.xmin!==t.min||i.xmax!==t.max||i.ymin!==e.min||i.ymax!==e.max;return Object.assign(i,s),r}const ji=n=>n===0||n===1,Io=(n,t,e)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-t)*he/e)),Ro=(n,t,e)=>Math.pow(2,-10*n)*Math.sin((n-t)*he/e)+1,Un={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*ne)+1,easeOutSine:n=>Math.sin(n*ne),easeInOutSine:n=>-.5*(Math.cos(Ct*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>ji(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>ji(n)?n:Io(n,.075,.3),easeOutElastic:n=>ji(n)?n:Ro(n,.075,.3),easeInOutElastic(n){return ji(n)?n:n<.5?.5*Io(n*2,.1125,.45):.5+.5*Ro(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let t=1.70158;return(n/=.5)<1?.5*(n*n*(((t*=1.525)+1)*n-t)):.5*((n-=2)*n*(((t*=1.525)+1)*n+t)+2)},easeInBounce:n=>1-Un.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?Un.easeInBounce(n*2)*.5:Un.easeOutBounce(n*2-1)*.5+.5};function Or(n){if(n&&typeof n=="object"){const t=n.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function Lo(n){return Or(n)?n:new ti(n)}function Qs(n){return Or(n)?n:new ti(n).saturate(.5).darken(.1).hexString()}const fu=["x","y","borderWidth","radius","tension"],pu=["color","borderColor","backgroundColor"];function gu(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),n.set("animations",{colors:{type:"color",properties:pu},numbers:{type:"number",properties:fu}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function mu(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Bo=new Map;function yu(n,t){t=t||{};const e=n+JSON.stringify(t);let i=Bo.get(e);return i||(i=new Intl.NumberFormat(n,t),Bo.set(e,i)),i}function Ya(n,t,e){return yu(t,e).format(n)}const bu={values(n){return Et(n)?n:""+n},numeric(n,t,e){if(n===0)return"0";const i=this.chart.options.locale;let s,r=n;if(e.length>1){const d=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(d<1e-4||d>1e15)&&(s="scientific"),r=vu(n,e)}const a=Wa(Math.abs(r)),c=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),u={notation:s,minimumFractionDigits:c,maximumFractionDigits:c};return Object.assign(u,this.options.ticks.format),Ya(n,i,u)}};function vu(n,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&n!==Math.floor(n)&&(e=n-Math.floor(n)),e}var Xa={formatters:bu};function _u(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Xa.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const nn=Object.create(null),ur=Object.create(null);function Yn(n,t){if(!t)return n;const e=t.split(".");for(let i=0,s=e.length;i<s;++i){const r=e[i];n=n[r]||(n[r]=Object.create(null))}return n}function Js(n,t,e){return typeof t=="string"?ei(Yn(n,t),e):ei(Yn(n,""),t)}class xu{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,s)=>Qs(s.backgroundColor),this.hoverBorderColor=(i,s)=>Qs(s.borderColor),this.hoverColor=(i,s)=>Qs(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return Js(this,t,e)}get(t){return Yn(this,t)}describe(t,e){return Js(ur,t,e)}override(t,e){return Js(nn,t,e)}route(t,e,i,s){const r=Yn(this,t),a=Yn(this,i),c="_"+e;Object.defineProperties(r,{[c]:{value:r[e],writable:!0},[e]:{enumerable:!0,get(){const u=this[c],d=a[s];return pt(u)?Object.assign({},d,u):dt(u,d)},set(u){this[c]=u}}})}apply(t){t.forEach(e=>e(this))}}var Pt=new xu({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[gu,mu,_u]);function wu(n){return!n||bt(n.size)||bt(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function Fo(n,t,e,i,s){let r=t[s];return r||(r=t[s]=n.measureText(s).width,e.push(s)),r>i&&(i=r),i}function Ye(n,t,e){const i=n.currentDevicePixelRatio,s=e!==0?Math.max(e/2,.5):0;return Math.round((t-s)*i)/i+s}function zo(n,t){!t&&!n||(t=t||n.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,n.width,n.height),t.restore())}function hr(n,t,e,i){Ga(n,t,e,i,null)}function Ga(n,t,e,i,s){let r,a,c,u,d,p,y,v;const _=t.pointStyle,C=t.rotation,E=t.radius;let P=(C||0)*Gc;if(_&&typeof _=="object"&&(r=_.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){n.save(),n.translate(e,i),n.rotate(P),n.drawImage(_,-_.width/2,-_.height/2,_.width,_.height),n.restore();return}if(!(isNaN(E)||E<=0)){switch(n.beginPath(),_){default:s?n.ellipse(e,i,s/2,E,0,0,he):n.arc(e,i,E,0,he),n.closePath();break;case"triangle":p=s?s/2:E,n.moveTo(e+Math.sin(P)*p,i-Math.cos(P)*E),P+=Eo,n.lineTo(e+Math.sin(P)*p,i-Math.cos(P)*E),P+=Eo,n.lineTo(e+Math.sin(P)*p,i-Math.cos(P)*E),n.closePath();break;case"rectRounded":d=E*.516,u=E-d,a=Math.cos(P+Ue)*u,y=Math.cos(P+Ue)*(s?s/2-d:u),c=Math.sin(P+Ue)*u,v=Math.sin(P+Ue)*(s?s/2-d:u),n.arc(e-y,i-c,d,P-Ct,P-ne),n.arc(e+v,i-a,d,P-ne,P),n.arc(e+y,i+c,d,P,P+ne),n.arc(e-v,i+a,d,P+ne,P+Ct),n.closePath();break;case"rect":if(!C){u=Math.SQRT1_2*E,p=s?s/2:u,n.rect(e-p,i-u,2*p,2*u);break}P+=Ue;case"rectRot":y=Math.cos(P)*(s?s/2:E),a=Math.cos(P)*E,c=Math.sin(P)*E,v=Math.sin(P)*(s?s/2:E),n.moveTo(e-y,i-c),n.lineTo(e+v,i-a),n.lineTo(e+y,i+c),n.lineTo(e-v,i+a),n.closePath();break;case"crossRot":P+=Ue;case"cross":y=Math.cos(P)*(s?s/2:E),a=Math.cos(P)*E,c=Math.sin(P)*E,v=Math.sin(P)*(s?s/2:E),n.moveTo(e-y,i-c),n.lineTo(e+y,i+c),n.moveTo(e+v,i-a),n.lineTo(e-v,i+a);break;case"star":y=Math.cos(P)*(s?s/2:E),a=Math.cos(P)*E,c=Math.sin(P)*E,v=Math.sin(P)*(s?s/2:E),n.moveTo(e-y,i-c),n.lineTo(e+y,i+c),n.moveTo(e+v,i-a),n.lineTo(e-v,i+a),P+=Ue,y=Math.cos(P)*(s?s/2:E),a=Math.cos(P)*E,c=Math.sin(P)*E,v=Math.sin(P)*(s?s/2:E),n.moveTo(e-y,i-c),n.lineTo(e+y,i+c),n.moveTo(e+v,i-a),n.lineTo(e-v,i+a);break;case"line":a=s?s/2:Math.cos(P)*E,c=Math.sin(P)*E,n.moveTo(e-a,i-c),n.lineTo(e+a,i+c);break;case"dash":n.moveTo(e,i),n.lineTo(e+Math.cos(P)*(s?s/2:E),i+Math.sin(P)*E);break;case!1:n.closePath();break}n.fill(),t.borderWidth>0&&n.stroke()}}function ii(n,t,e){return e=e||.5,!t||n&&n.x>t.left-e&&n.x<t.right+e&&n.y>t.top-e&&n.y<t.bottom+e}function Dr(n,t){n.save(),n.beginPath(),n.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),n.clip()}function Er(n){n.restore()}function ku(n,t,e,i,s){if(!t)return n.lineTo(e.x,e.y);if(s==="middle"){const r=(t.x+e.x)/2;n.lineTo(r,t.y),n.lineTo(r,e.y)}else s==="after"!=!!i?n.lineTo(t.x,e.y):n.lineTo(e.x,t.y);n.lineTo(e.x,e.y)}function Su(n,t,e,i){if(!t)return n.lineTo(e.x,e.y);n.bezierCurveTo(i?t.cp1x:t.cp2x,i?t.cp1y:t.cp2y,i?e.cp2x:e.cp1x,i?e.cp2y:e.cp1y,e.x,e.y)}function Mu(n,t){t.translation&&n.translate(t.translation[0],t.translation[1]),bt(t.rotation)||n.rotate(t.rotation),t.color&&(n.fillStyle=t.color),t.textAlign&&(n.textAlign=t.textAlign),t.textBaseline&&(n.textBaseline=t.textBaseline)}function Pu(n,t,e,i,s){if(s.strikethrough||s.underline){const r=n.measureText(i),a=t-r.actualBoundingBoxLeft,c=t+r.actualBoundingBoxRight,u=e-r.actualBoundingBoxAscent,d=e+r.actualBoundingBoxDescent,p=s.strikethrough?(u+d)/2:d;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=s.decorationWidth||2,n.moveTo(a,p),n.lineTo(c,p),n.stroke()}}function Ou(n,t){const e=n.fillStyle;n.fillStyle=t.color,n.fillRect(t.left,t.top,t.width,t.height),n.fillStyle=e}function si(n,t,e,i,s,r={}){const a=Et(t)?t:[t],c=r.strokeWidth>0&&r.strokeColor!=="";let u,d;for(n.save(),n.font=s.string,Mu(n,r),u=0;u<a.length;++u)d=a[u],r.backdrop&&Ou(n,r.backdrop),c&&(r.strokeColor&&(n.strokeStyle=r.strokeColor),bt(r.strokeWidth)||(n.lineWidth=r.strokeWidth),n.strokeText(d,e,i,r.maxWidth)),n.fillText(d,e,i,r.maxWidth),Pu(n,e,i,d,r),i+=Number(s.lineHeight);n.restore()}function dr(n,t){const{x:e,y:i,w:s,h:r,radius:a}=t;n.arc(e+a.topLeft,i+a.topLeft,a.topLeft,1.5*Ct,Ct,!0),n.lineTo(e,i+r-a.bottomLeft),n.arc(e+a.bottomLeft,i+r-a.bottomLeft,a.bottomLeft,Ct,ne,!0),n.lineTo(e+s-a.bottomRight,i+r),n.arc(e+s-a.bottomRight,i+r-a.bottomRight,a.bottomRight,ne,0,!0),n.lineTo(e+s,i+a.topRight),n.arc(e+s-a.topRight,i+a.topRight,a.topRight,0,-ne,!0),n.lineTo(e+a.topLeft,i)}const Du=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Eu=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Cu(n,t){const e=(""+n).match(Du);if(!e||e[1]==="normal")return t*1.2;switch(n=+e[2],e[3]){case"px":return n;case"%":n/=100;break}return t*n}const Au=n=>+n||0;function Qa(n,t){const e={},i=pt(t),s=i?Object.keys(t):t,r=pt(n)?i?a=>dt(n[a],n[t[a]]):a=>n[a]:()=>n;for(const a of s)e[a]=Au(r(a));return e}function Tu(n){return Qa(n,{top:"y",right:"x",bottom:"y",left:"x"})}function Xn(n){return Qa(n,["topLeft","topRight","bottomLeft","bottomRight"])}function Zt(n){const t=Tu(n);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Bt(n,t){n=n||{},t=t||Pt.font;let e=dt(n.size,t.size);typeof e=="string"&&(e=parseInt(e,10));let i=dt(n.style,t.style);i&&!(""+i).match(Eu)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const s={family:dt(n.family,t.family),lineHeight:Cu(dt(n.lineHeight,t.lineHeight),e),size:e,style:i,weight:dt(n.weight,t.weight),string:""};return s.string=wu(s),s}function Ni(n,t,e,i){let s,r,a;for(s=0,r=n.length;s<r;++s)if(a=n[s],a!==void 0&&a!==void 0)return a}function Iu(n,t,e){const{min:i,max:s}=n,r=Wc(t,(s-i)/2),a=(c,u)=>e&&c===0?0:c+u;return{min:a(i,-Math.abs(r)),max:a(s,r)}}function sn(n,t){return Object.assign(Object.create(n),t)}function Cr(n,t=[""],e,i,s=()=>n[0]){const r=e||n;typeof i>"u"&&(i=el("_fallback",n));const a={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:r,_fallback:i,_getTarget:s,override:c=>Cr([c,...n],t,r,i)};return new Proxy(a,{deleteProperty(c,u){return delete c[u],delete c._keys,delete n[0][u],!0},get(c,u){return Za(c,u,()=>Hu(u,t,n,c))},getOwnPropertyDescriptor(c,u){return Reflect.getOwnPropertyDescriptor(c._scopes[0],u)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(c,u){return No(c).includes(u)},ownKeys(c){return No(c)},set(c,u,d){const p=c._storage||(c._storage=s());return c[u]=p[u]=d,delete c._keys,!0}})}function bn(n,t,e,i){const s={_cacheable:!1,_proxy:n,_context:t,_subProxy:e,_stack:new Set,_descriptors:Ja(n,i),setContext:r=>bn(n,r,e,i),override:r=>bn(n.override(r),t,e,i)};return new Proxy(s,{deleteProperty(r,a){return delete r[a],delete n[a],!0},get(r,a,c){return Za(r,a,()=>Lu(r,a,c))},getOwnPropertyDescriptor(r,a){return r._descriptors.allKeys?Reflect.has(n,a)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,a)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(r,a){return Reflect.has(n,a)},ownKeys(){return Reflect.ownKeys(n)},set(r,a,c){return n[a]=c,delete r[a],!0}})}function Ja(n,t={scriptable:!0,indexable:!0}){const{_scriptable:e=t.scriptable,_indexable:i=t.indexable,_allKeys:s=t.allKeys}=n;return{allKeys:s,scriptable:e,indexable:i,isScriptable:Le(e)?e:()=>e,isIndexable:Le(i)?i:()=>i}}const Ru=(n,t)=>n?n+Sr(t):t,Ar=(n,t)=>pt(t)&&n!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function Za(n,t,e){if(Object.prototype.hasOwnProperty.call(n,t)||t==="constructor")return n[t];const i=e();return n[t]=i,i}function Lu(n,t,e){const{_proxy:i,_context:s,_subProxy:r,_descriptors:a}=n;let c=i[t];return Le(c)&&a.isScriptable(t)&&(c=Bu(t,c,n,e)),Et(c)&&c.length&&(c=Fu(t,c,n,a.isIndexable)),Ar(t,c)&&(c=bn(c,s,r&&r[t],a)),c}function Bu(n,t,e,i){const{_proxy:s,_context:r,_subProxy:a,_stack:c}=e;if(c.has(n))throw new Error("Recursion detected: "+Array.from(c).join("->")+"->"+n);c.add(n);let u=t(r,a||i);return c.delete(n),Ar(n,u)&&(u=Tr(s._scopes,s,n,u)),u}function Fu(n,t,e,i){const{_proxy:s,_context:r,_subProxy:a,_descriptors:c}=e;if(typeof r.index<"u"&&i(n))return t[r.index%t.length];if(pt(t[0])){const u=t,d=s._scopes.filter(p=>p!==u);t=[];for(const p of u){const y=Tr(d,s,n,p);t.push(bn(y,r,a&&a[n],c))}}return t}function tl(n,t,e){return Le(n)?n(t,e):n}const zu=(n,t)=>n===!0?t:typeof n=="string"?ns(t,n):void 0;function ju(n,t,e,i,s){for(const r of t){const a=zu(e,r);if(a){n.add(a);const c=tl(a._fallback,e,s);if(typeof c<"u"&&c!==e&&c!==i)return c}else if(a===!1&&typeof i<"u"&&e!==i)return null}return!1}function Tr(n,t,e,i){const s=t._rootScopes,r=tl(t._fallback,e,i),a=[...n,...s],c=new Set;c.add(i);let u=jo(c,a,e,r||e,i);return u===null||typeof r<"u"&&r!==e&&(u=jo(c,a,r,u,i),u===null)?!1:Cr(Array.from(c),[""],s,r,()=>Nu(t,e,i))}function jo(n,t,e,i,s){for(;e;)e=ju(n,t,e,i,s);return e}function Nu(n,t,e){const i=n._getTarget();t in i||(i[t]={});const s=i[t];return Et(s)&&pt(e)?e:s||{}}function Hu(n,t,e,i){let s;for(const r of t)if(s=el(Ru(r,n),e),typeof s<"u")return Ar(n,s)?Tr(e,i,n,s):s}function el(n,t){for(const e of t){if(!e)continue;const i=e[n];if(typeof i<"u")return i}}function No(n){let t=n._keys;return t||(t=n._keys=Ku(n._scopes)),t}function Ku(n){const t=new Set;for(const e of n)for(const i of Object.keys(e).filter(s=>!s.startsWith("_")))t.add(i);return Array.from(t)}const Wu=Number.EPSILON||1e-14,vn=(n,t)=>t<n.length&&!n[t].skip&&n[t],nl=n=>n==="x"?"y":"x";function $u(n,t,e,i){const s=n.skip?t:n,r=t,a=e.skip?t:e,c=cr(r,s),u=cr(a,r);let d=c/(c+u),p=u/(c+u);d=isNaN(d)?0:d,p=isNaN(p)?0:p;const y=i*d,v=i*p;return{previous:{x:r.x-y*(a.x-s.x),y:r.y-y*(a.y-s.y)},next:{x:r.x+v*(a.x-s.x),y:r.y+v*(a.y-s.y)}}}function Vu(n,t,e){const i=n.length;let s,r,a,c,u,d=vn(n,0);for(let p=0;p<i-1;++p)if(u=d,d=vn(n,p+1),!(!u||!d)){if(qn(t[p],0,Wu)){e[p]=e[p+1]=0;continue}s=e[p]/t[p],r=e[p+1]/t[p],c=Math.pow(s,2)+Math.pow(r,2),!(c<=9)&&(a=3/Math.sqrt(c),e[p]=s*a*t[p],e[p+1]=r*a*t[p])}}function qu(n,t,e="x"){const i=nl(e),s=n.length;let r,a,c,u=vn(n,0);for(let d=0;d<s;++d){if(a=c,c=u,u=vn(n,d+1),!c)continue;const p=c[e],y=c[i];a&&(r=(p-a[e])/3,c[`cp1${e}`]=p-r,c[`cp1${i}`]=y-r*t[d]),u&&(r=(u[e]-p)/3,c[`cp2${e}`]=p+r,c[`cp2${i}`]=y+r*t[d])}}function Uu(n,t="x"){const e=nl(t),i=n.length,s=Array(i).fill(0),r=Array(i);let a,c,u,d=vn(n,0);for(a=0;a<i;++a)if(c=u,u=d,d=vn(n,a+1),!!u){if(d){const p=d[t]-u[t];s[a]=p!==0?(d[e]-u[e])/p:0}r[a]=c?d?yn(s[a-1])!==yn(s[a])?0:(s[a-1]+s[a])/2:s[a-1]:s[a]}Vu(n,s,r),qu(n,r,t)}function Hi(n,t,e){return Math.max(Math.min(n,e),t)}function Yu(n,t){let e,i,s,r,a,c=ii(n[0],t);for(e=0,i=n.length;e<i;++e)a=r,r=c,c=e<i-1&&ii(n[e+1],t),r&&(s=n[e],a&&(s.cp1x=Hi(s.cp1x,t.left,t.right),s.cp1y=Hi(s.cp1y,t.top,t.bottom)),c&&(s.cp2x=Hi(s.cp2x,t.left,t.right),s.cp2y=Hi(s.cp2y,t.top,t.bottom)))}function Xu(n,t,e,i,s){let r,a,c,u;if(t.spanGaps&&(n=n.filter(d=>!d.skip)),t.cubicInterpolationMode==="monotone")Uu(n,s);else{let d=i?n[n.length-1]:n[0];for(r=0,a=n.length;r<a;++r)c=n[r],u=$u(d,c,n[Math.min(r+1,a-(i?0:1))%a],t.tension),c.cp1x=u.previous.x,c.cp1y=u.previous.y,c.cp2x=u.next.x,c.cp2y=u.next.y,d=c}t.capBezierPoints&&Yu(n,e)}function Ir(){return typeof window<"u"&&typeof document<"u"}function Rr(n){let t=n.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function rs(n,t,e){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*t.parentNode[e])):i=n,i}const cs=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function Gu(n,t){return cs(n).getPropertyValue(t)}const Qu=["top","right","bottom","left"];function tn(n,t,e){const i={};e=e?"-"+e:"";for(let s=0;s<4;s++){const r=Qu[s];i[r]=parseFloat(n[t+"-"+r+e])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const Ju=(n,t,e)=>(n>0||t>0)&&(!e||!e.shadowRoot);function Zu(n,t){const e=n.touches,i=e&&e.length?e[0]:n,{offsetX:s,offsetY:r}=i;let a=!1,c,u;if(Ju(s,r,n.target))c=s,u=r;else{const d=t.getBoundingClientRect();c=i.clientX-d.left,u=i.clientY-d.top,a=!0}return{x:c,y:u,box:a}}function Ge(n,t){if("native"in n)return n;const{canvas:e,currentDevicePixelRatio:i}=t,s=cs(e),r=s.boxSizing==="border-box",a=tn(s,"padding"),c=tn(s,"border","width"),{x:u,y:d,box:p}=Zu(n,e),y=a.left+(p&&c.left),v=a.top+(p&&c.top);let{width:_,height:C}=t;return r&&(_-=a.width+c.width,C-=a.height+c.height),{x:Math.round((u-y)/_*e.width/i),y:Math.round((d-v)/C*e.height/i)}}function th(n,t,e){let i,s;if(t===void 0||e===void 0){const r=n&&Rr(n);if(!r)t=n.clientWidth,e=n.clientHeight;else{const a=r.getBoundingClientRect(),c=cs(r),u=tn(c,"border","width"),d=tn(c,"padding");t=a.width-d.width-u.width,e=a.height-d.height-u.height,i=rs(c.maxWidth,r,"clientWidth"),s=rs(c.maxHeight,r,"clientHeight")}}return{width:t,height:e,maxWidth:i||ss,maxHeight:s||ss}}const Ie=n=>Math.round(n*10)/10;function eh(n,t,e,i){const s=cs(n),r=tn(s,"margin"),a=rs(s.maxWidth,n,"clientWidth")||ss,c=rs(s.maxHeight,n,"clientHeight")||ss,u=th(n,t,e);let{width:d,height:p}=u;if(s.boxSizing==="content-box"){const v=tn(s,"border","width"),_=tn(s,"padding");d-=_.width+v.width,p-=_.height+v.height}return d=Math.max(0,d-r.width),p=Math.max(0,i?d/i:p-r.height),d=Ie(Math.min(d,a,u.maxWidth)),p=Ie(Math.min(p,c,u.maxHeight)),d&&!p&&(p=Ie(d/2)),(t!==void 0||e!==void 0)&&i&&u.height&&p>u.height&&(p=u.height,d=Ie(Math.floor(p*i))),{width:d,height:p}}function Ho(n,t,e){const i=t||1,s=Ie(n.height*i),r=Ie(n.width*i);n.height=Ie(n.height),n.width=Ie(n.width);const a=n.canvas;return a.style&&(e||!a.style.height&&!a.style.width)&&(a.style.height=`${n.height}px`,a.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||a.height!==s||a.width!==r?(n.currentDevicePixelRatio=i,a.height=s,a.width=r,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}const nh=function(){let n=!1;try{const t={get passive(){return n=!0,!1}};Ir()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return n}();function Ko(n,t){const e=Gu(n,t),i=e&&e.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function Qe(n,t,e,i){return{x:n.x+e*(t.x-n.x),y:n.y+e*(t.y-n.y)}}function ih(n,t,e,i){return{x:n.x+e*(t.x-n.x),y:i==="middle"?e<.5?n.y:t.y:i==="after"?e<1?n.y:t.y:e>0?t.y:n.y}}function sh(n,t,e,i){const s={x:n.cp2x,y:n.cp2y},r={x:t.cp1x,y:t.cp1y},a=Qe(n,s,e),c=Qe(s,r,e),u=Qe(r,t,e),d=Qe(a,c,e),p=Qe(c,u,e);return Qe(d,p,e)}const rh=function(n,t){return{x(e){return n+n+t-e},setWidth(e){t=e},textAlign(e){return e==="center"?e:e==="right"?"left":"right"},xPlus(e,i){return e-i},leftForLtr(e,i){return e-i}}},oh=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,t){return n+t},leftForLtr(n,t){return n}}};function mn(n,t,e){return n?rh(t,e):oh()}function il(n,t){let e,i;(t==="ltr"||t==="rtl")&&(e=n.canvas.style,i=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),n.prevTextDirection=i)}function sl(n,t){t!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",t[0],t[1]))}function rl(n){return n==="angle"?{between:$a,compare:iu,normalize:Ae}:{between:Hn,compare:(t,e)=>t-e,normalize:t=>t}}function Wo({start:n,end:t,count:e,loop:i,style:s}){return{start:n%e,end:t%e,loop:i&&(t-n+1)%e===0,style:s}}function ah(n,t,e){const{property:i,start:s,end:r}=e,{between:a,normalize:c}=rl(i),u=t.length;let{start:d,end:p,loop:y}=n,v,_;if(y){for(d+=u,p+=u,v=0,_=u;v<_&&a(c(t[d%u][i]),s,r);++v)d--,p--;d%=u,p%=u}return p<d&&(p+=u),{start:d,end:p,loop:y,style:n.style}}function lh(n,t,e){if(!e)return[n];const{property:i,start:s,end:r}=e,a=t.length,{compare:c,between:u,normalize:d}=rl(i),{start:p,end:y,loop:v,style:_}=ah(n,t,e),C=[];let E=!1,P=null,B,H,Y;const j=()=>u(s,Y,B)&&c(s,Y)!==0,N=()=>c(r,B)===0||u(r,Y,B),Q=()=>E||j(),$=()=>!E||N();for(let U=p,nt=p;U<=y;++U)H=t[U%a],!H.skip&&(B=d(H[i]),B!==Y&&(E=u(B,s,r),P===null&&Q()&&(P=c(B,s)===0?U:nt),P!==null&&$()&&(C.push(Wo({start:P,end:U,loop:v,count:a,style:_})),P=null),nt=U,Y=B));return P!==null&&C.push(Wo({start:P,end:y,loop:v,count:a,style:_})),C}function ch(n,t){const e=[],i=n.segments;for(let s=0;s<i.length;s++){const r=lh(i[s],n.points,t);r.length&&e.push(...r)}return e}function uh(n,t,e,i){let s=0,r=t-1;if(e&&!i)for(;s<t&&!n[s].skip;)s++;for(;s<t&&n[s].skip;)s++;for(s%=t,e&&(r+=s);r>s&&n[r%t].skip;)r--;return r%=t,{start:s,end:r}}function hh(n,t,e,i){const s=n.length,r=[];let a=t,c=n[t],u;for(u=t+1;u<=e;++u){const d=n[u%s];d.skip||d.stop?c.skip||(i=!1,r.push({start:t%s,end:(u-1)%s,loop:i}),t=a=d.stop?u:null):(a=u,c.skip&&(t=u)),c=d}return a!==null&&r.push({start:t%s,end:a%s,loop:i}),r}function dh(n,t){const e=n.points,i=n.options.spanGaps,s=e.length;if(!s)return[];const r=!!n._loop,{start:a,end:c}=uh(e,s,r,i);if(i===!0)return $o(n,[{start:a,end:c,loop:r}],e,t);const u=c<a?c+s:c,d=!!n._fullLoop&&a===0&&c===s-1;return $o(n,hh(e,a,u,d),e,t)}function $o(n,t,e,i){return!i||!i.setContext||!e?t:fh(n,t,e,i)}function fh(n,t,e,i){const s=n._chart.getContext(),r=Vo(n.options),{_datasetIndex:a,options:{spanGaps:c}}=n,u=e.length,d=[];let p=r,y=t[0].start,v=y;function _(C,E,P,B){const H=c?-1:1;if(C!==E){for(C+=u;e[C%u].skip;)C-=H;for(;e[E%u].skip;)E+=H;C%u!==E%u&&(d.push({start:C%u,end:E%u,loop:P,style:B}),p=B,y=E%u)}}for(const C of t){y=c?y:C.start;let E=e[y%u],P;for(v=y+1;v<=C.end;v++){const B=e[v%u];P=Vo(i.setContext(sn(s,{type:"segment",p0:E,p1:B,p0DataIndex:(v-1)%u,p1DataIndex:v%u,datasetIndex:a}))),ph(P,p)&&_(y,v-1,C.loop,p),E=B,p=P}y<v-1&&_(y,v-1,C.loop,p)}return d}function Vo(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function ph(n,t){if(!t)return!1;const e=[],i=function(s,r){return Or(r)?(e.includes(r)||e.push(r),e.indexOf(r)):r};return JSON.stringify(n,i)!==JSON.stringify(t,i)}function Ki(n,t,e){return n.options.clip?n[e]:t[e]}function gh(n,t){const{xScale:e,yScale:i}=n;return e&&i?{left:Ki(e,t,"left"),right:Ki(e,t,"right"),top:Ki(i,t,"top"),bottom:Ki(i,t,"bottom")}:t}function mh(n,t){const e=t._clip;if(e.disabled)return!1;const i=gh(t,n.chartArea);return{left:e.left===!1?0:i.left-(e.left===!0?0:e.left),right:e.right===!1?n.width:i.right+(e.right===!0?0:e.right),top:e.top===!1?0:i.top-(e.top===!0?0:e.top),bottom:e.bottom===!1?n.height:i.bottom+(e.bottom===!0?0:e.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class yh{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,i,s){const r=e.listeners[s],a=e.duration;r.forEach(c=>c({chart:t,initial:e.initial,numSteps:a,currentStep:Math.min(i-e.start,a)}))}_refresh(){this._request||(this._running=!0,this._request=qa.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((i,s)=>{if(!i.running||!i.items.length)return;const r=i.items;let a=r.length-1,c=!1,u;for(;a>=0;--a)u=r[a],u._active?(u._total>i.duration&&(i.duration=u._total),u.tick(t),c=!0):(r[a]=r[r.length-1],r.pop());c&&(s.draw(),this._notify(s,i,t,"progress")),r.length||(i.running=!1,this._notify(s,i,t,"complete"),i.initial=!1),e+=r.length}),this._lastDate=t,e===0&&(this._running=!1)}_getAnims(t){const e=this._charts;let i=e.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,i)),i}listen(t,e,i){this._getAnims(t).listeners[e].push(i)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((i,s)=>Math.max(i,s._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const i=e.items;let s=i.length-1;for(;s>=0;--s)i[s].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var me=new yh;const qo="transparent",bh={boolean(n,t,e){return e>.5?t:n},color(n,t,e){const i=Lo(n||qo),s=i.valid&&Lo(t||qo);return s&&s.valid?s.mix(i,e).hexString():t},number(n,t,e){return n+(t-n)*e}};class vh{constructor(t,e,i,s){const r=e[i];s=Ni([t.to,s,r,t.from]);const a=Ni([t.from,r,s]);this._active=!0,this._fn=t.fn||bh[t.type||typeof a],this._easing=Un[t.easing]||Un.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=i,this._from=a,this._to=s,this._promises=void 0}active(){return this._active}update(t,e,i){if(this._active){this._notify(!1);const s=this._target[this._prop],r=i-this._start,a=this._duration-r;this._start=i,this._duration=Math.floor(Math.max(a,t.duration)),this._total+=r,this._loop=!!t.loop,this._to=Ni([t.to,e,s,t.from]),this._from=Ni([t.from,s,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,i=this._duration,s=this._prop,r=this._from,a=this._loop,c=this._to;let u;if(this._active=r!==c&&(a||e<i),!this._active){this._target[s]=c,this._notify(!0);return}if(e<0){this._target[s]=r;return}u=e/i%2,u=a&&u>1?2-u:u,u=this._easing(Math.min(1,Math.max(0,u))),this._target[s]=this._fn(r,c,u)}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,i)=>{t.push({res:e,rej:i})})}_notify(t){const e=t?"res":"rej",i=this._promises||[];for(let s=0;s<i.length;s++)i[s][e]()}}class ol{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!pt(t))return;const e=Object.keys(Pt.animation),i=this._properties;Object.getOwnPropertyNames(t).forEach(s=>{const r=t[s];if(!pt(r))return;const a={};for(const c of e)a[c]=r[c];(Et(r.properties)&&r.properties||[s]).forEach(c=>{(c===s||!i.has(c))&&i.set(c,a)})})}_animateOptions(t,e){const i=e.options,s=xh(t,i);if(!s)return[];const r=this._createAnimations(s,i);return i.$shared&&_h(t.options.$animations,i).then(()=>{t.options=i},()=>{}),r}_createAnimations(t,e){const i=this._properties,s=[],r=t.$animations||(t.$animations={}),a=Object.keys(e),c=Date.now();let u;for(u=a.length-1;u>=0;--u){const d=a[u];if(d.charAt(0)==="$")continue;if(d==="options"){s.push(...this._animateOptions(t,e));continue}const p=e[d];let y=r[d];const v=i.get(d);if(y)if(v&&y.active()){y.update(v,p,c);continue}else y.cancel();if(!v||!v.duration){t[d]=p;continue}r[d]=y=new vh(v,t,d,p),s.push(y)}return s}update(t,e){if(this._properties.size===0){Object.assign(t,e);return}const i=this._createAnimations(t,e);if(i.length)return me.add(this._chart,i),!0}}function _h(n,t){const e=[],i=Object.keys(t);for(let s=0;s<i.length;s++){const r=n[i[s]];r&&r.active()&&e.push(r.wait())}return Promise.all(e)}function xh(n,t){if(!t)return;let e=n.options;if(!e){n.options=t;return}return e.$shared&&(n.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function Uo(n,t){const e=n&&n.options||{},i=e.reverse,s=e.min===void 0?t:0,r=e.max===void 0?t:0;return{start:i?r:s,end:i?s:r}}function wh(n,t,e){if(e===!1)return!1;const i=Uo(n,e),s=Uo(t,e);return{top:s.end,right:i.end,bottom:s.start,left:i.start}}function kh(n){let t,e,i,s;return pt(n)?(t=n.top,e=n.right,i=n.bottom,s=n.left):t=e=i=s=n,{top:t,right:e,bottom:i,left:s,disabled:n===!1}}function al(n,t){const e=[],i=n._getSortedDatasetMetas(t);let s,r;for(s=0,r=i.length;s<r;++s)e.push(i[s].index);return e}function Yo(n,t,e,i={}){const s=n.keys,r=i.mode==="single";let a,c,u,d;if(t===null)return;let p=!1;for(a=0,c=s.length;a<c;++a){if(u=+s[a],u===e){if(p=!0,i.all)continue;break}d=n.values[u],Jt(d)&&(r||t===0||yn(t)===yn(d))&&(t+=d)}return!p&&!i.all?0:t}function Sh(n,t){const{iScale:e,vScale:i}=t,s=e.axis==="x"?"x":"y",r=i.axis==="x"?"x":"y",a=Object.keys(n),c=new Array(a.length);let u,d,p;for(u=0,d=a.length;u<d;++u)p=a[u],c[u]={[s]:p,[r]:n[p]};return c}function Zs(n,t){const e=n&&n.options.stacked;return e||e===void 0&&t.stack!==void 0}function Mh(n,t,e){return`${n.id}.${t.id}.${e.stack||e.type}`}function Ph(n){const{min:t,max:e,minDefined:i,maxDefined:s}=n.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:s?e:Number.POSITIVE_INFINITY}}function Oh(n,t,e){const i=n[t]||(n[t]={});return i[e]||(i[e]={})}function Xo(n,t,e,i){for(const s of t.getMatchingVisibleMetas(i).reverse()){const r=n[s.index];if(e&&r>0||!e&&r<0)return s.index}return null}function Go(n,t){const{chart:e,_cachedMeta:i}=n,s=e._stacks||(e._stacks={}),{iScale:r,vScale:a,index:c}=i,u=r.axis,d=a.axis,p=Mh(r,a,i),y=t.length;let v;for(let _=0;_<y;++_){const C=t[_],{[u]:E,[d]:P}=C,B=C._stacks||(C._stacks={});v=B[d]=Oh(s,p,E),v[c]=P,v._top=Xo(v,a,!0,i.type),v._bottom=Xo(v,a,!1,i.type);const H=v._visualValues||(v._visualValues={});H[c]=P}}function tr(n,t){const e=n.scales;return Object.keys(e).filter(i=>e[i].axis===t).shift()}function Dh(n,t){return sn(n,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function Eh(n,t,e){return sn(n,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}function Ln(n,t){const e=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){t=t||n._parsed;for(const s of t){const r=s._stacks;if(!r||r[i]===void 0||r[i][e]===void 0)return;delete r[i][e],r[i]._visualValues!==void 0&&r[i]._visualValues[e]!==void 0&&delete r[i]._visualValues[e]}}}const er=n=>n==="reset"||n==="none",Qo=(n,t)=>t?n:Object.assign({},n),Ch=(n,t,e)=>n&&!t.hidden&&t._stacked&&{keys:al(e,!0),values:null};class Gn{constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=Zs(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Ln(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,i=this.getDataset(),s=(y,v,_,C)=>y==="x"?v:y==="r"?C:_,r=e.xAxisID=dt(i.xAxisID,tr(t,"x")),a=e.yAxisID=dt(i.yAxisID,tr(t,"y")),c=e.rAxisID=dt(i.rAxisID,tr(t,"r")),u=e.indexAxis,d=e.iAxisID=s(u,r,a,c),p=e.vAxisID=s(u,a,r,c);e.xScale=this.getScaleForId(r),e.yScale=this.getScaleForId(a),e.rScale=this.getScaleForId(c),e.iScale=this.getScaleForId(d),e.vScale=this.getScaleForId(p)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&To(this._data,this),t._stacked&&Ln(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),i=this._data;if(pt(e)){const s=this._cachedMeta;this._data=Sh(e,s)}else if(i!==e){if(i){To(i,this);const s=this._cachedMeta;Ln(s),s._parsed=[]}e&&Object.isExtensible(e)&&au(e,this),this._syncList=[],this._data=e}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,i=this.getDataset();let s=!1;this._dataCheck();const r=e._stacked;e._stacked=Zs(e.vScale,e),e.stack!==i.stack&&(s=!0,Ln(e),e.stack=i.stack),this._resyncElements(t),(s||r!==e._stacked)&&(Go(this,e._parsed),e._stacked=Zs(e.vScale,e))}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:i,_data:s}=this,{iScale:r,_stacked:a}=i,c=r.axis;let u=t===0&&e===s.length?!0:i._sorted,d=t>0&&i._parsed[t-1],p,y,v;if(this._parsing===!1)i._parsed=s,i._sorted=!0,v=s;else{Et(s[t])?v=this.parseArrayData(i,s,t,e):pt(s[t])?v=this.parseObjectData(i,s,t,e):v=this.parsePrimitiveData(i,s,t,e);const _=()=>y[c]===null||d&&y[c]<d[c];for(p=0;p<e;++p)i._parsed[p+t]=y=v[p],u&&(_()&&(u=!1),d=y);i._sorted=u}a&&Go(this,v)}parsePrimitiveData(t,e,i,s){const{iScale:r,vScale:a}=t,c=r.axis,u=a.axis,d=r.getLabels(),p=r===a,y=new Array(s);let v,_,C;for(v=0,_=s;v<_;++v)C=v+i,y[v]={[c]:p||r.parse(d[C],C),[u]:a.parse(e[C],C)};return y}parseArrayData(t,e,i,s){const{xScale:r,yScale:a}=t,c=new Array(s);let u,d,p,y;for(u=0,d=s;u<d;++u)p=u+i,y=e[p],c[u]={x:r.parse(y[0],p),y:a.parse(y[1],p)};return c}parseObjectData(t,e,i,s){const{xScale:r,yScale:a}=t,{xAxisKey:c="x",yAxisKey:u="y"}=this._parsing,d=new Array(s);let p,y,v,_;for(p=0,y=s;p<y;++p)v=p+i,_=e[v],d[p]={x:r.parse(ns(_,c),v),y:a.parse(ns(_,u),v)};return d}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,i){const s=this.chart,r=this._cachedMeta,a=e[t.axis],c={keys:al(s,!0),values:e._stacks[t.axis]._visualValues};return Yo(c,a,r.index,{mode:i})}updateRangeFromParsed(t,e,i,s){const r=i[e.axis];let a=r===null?NaN:r;const c=s&&i._stacks[e.axis];s&&c&&(s.values=c,a=Yo(s,r,this._cachedMeta.index)),t.min=Math.min(t.min,a),t.max=Math.max(t.max,a)}getMinMax(t,e){const i=this._cachedMeta,s=i._parsed,r=i._sorted&&t===i.iScale,a=s.length,c=this._getOtherScale(t),u=Ch(e,i,this.chart),d={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:p,max:y}=Ph(c);let v,_;function C(){_=s[v];const E=_[c.axis];return!Jt(_[t.axis])||p>E||y<E}for(v=0;v<a&&!(!C()&&(this.updateRangeFromParsed(d,t,_,u),r));++v);if(r){for(v=a-1;v>=0;--v)if(!C()){this.updateRangeFromParsed(d,t,_,u);break}}return d}getAllParsedValues(t){const e=this._cachedMeta._parsed,i=[];let s,r,a;for(s=0,r=e.length;s<r;++s)a=e[s][t.axis],Jt(a)&&i.push(a);return i}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,i=e.iScale,s=e.vScale,r=this.getParsed(t);return{label:i?""+i.getLabelForValue(r[i.axis]):"",value:s?""+s.getLabelForValue(r[s.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=kh(dt(this.options.clip,wh(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,i=this._cachedMeta,s=i.data||[],r=e.chartArea,a=[],c=this._drawStart||0,u=this._drawCount||s.length-c,d=this.options.drawActiveElementsOnTop;let p;for(i.dataset&&i.dataset.draw(t,r,c,u),p=c;p<c+u;++p){const y=s[p];y.hidden||(y.active&&d?a.push(y):y.draw(t,r))}for(p=0;p<a.length;++p)a[p].draw(t,r)}getStyle(t,e){const i=e?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,e,i){const s=this.getDataset();let r;if(t>=0&&t<this._cachedMeta.data.length){const a=this._cachedMeta.data[t];r=a.$context||(a.$context=Eh(this.getContext(),t,a)),r.parsed=this.getParsed(t),r.raw=s.data[t],r.index=r.dataIndex=t}else r=this.$context||(this.$context=Dh(this.chart.getContext(),this.index)),r.dataset=s,r.index=r.datasetIndex=this.index;return r.active=!!e,r.mode=i,r}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",i){const s=e==="active",r=this._cachedDataOpts,a=t+"-"+e,c=r[a],u=this.enableOptionSharing&&is(i);if(c)return Qo(c,u);const d=this.chart.config,p=d.datasetElementScopeKeys(this._type,t),y=s?[`${t}Hover`,"hover",t,""]:[t,""],v=d.getOptionScopes(this.getDataset(),p),_=Object.keys(Pt.elements[t]),C=()=>this.getContext(i,s,e),E=d.resolveNamedOptions(v,_,C,y);return E.$shared&&(E.$shared=u,r[a]=Object.freeze(Qo(E,u))),E}_resolveAnimations(t,e,i){const s=this.chart,r=this._cachedDataOpts,a=`animation-${e}`,c=r[a];if(c)return c;let u;if(s.options.animation!==!1){const p=this.chart.config,y=p.datasetAnimationScopeKeys(this._type,e),v=p.getOptionScopes(this.getDataset(),y);u=p.createResolver(v,this.getContext(t,i,e))}const d=new ol(s,u&&u.animations);return u&&u._cacheable&&(r[a]=Object.freeze(d)),d}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||er(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const i=this.resolveDataElementOptions(t,e),s=this._sharedOptions,r=this.getSharedOptions(i),a=this.includeOptions(e,r)||r!==s;return this.updateSharedOptions(r,e,i),{sharedOptions:r,includeOptions:a}}updateElement(t,e,i,s){er(s)?Object.assign(t,i):this._resolveAnimations(e,s).update(t,i)}updateSharedOptions(t,e,i){t&&!er(e)&&this._resolveAnimations(void 0,e).update(t,i)}_setStyle(t,e,i,s){t.active=s;const r=this.getStyle(e,s);this._resolveAnimations(e,i,s).update(t,{options:!s&&this.getSharedOptions(r)||r})}removeHoverStyle(t,e,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,e,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,i=this._cachedMeta.data;for(const[c,u,d]of this._syncList)this[c](u,d);this._syncList=[];const s=i.length,r=e.length,a=Math.min(r,s);a&&this.parse(0,a),r>s?this._insertElements(s,r-s,t):r<s&&this._removeElements(r,s-r)}_insertElements(t,e,i=!0){const s=this._cachedMeta,r=s.data,a=t+e;let c;const u=d=>{for(d.length+=e,c=d.length-1;c>=a;c--)d[c]=d[c-e]};for(u(r),c=t;c<a;++c)r[c]=new this.dataElementType;this._parsing&&u(s._parsed),this.parse(t,e),i&&this.updateElements(r,t,e,"reset")}updateElements(t,e,i,s){}_removeElements(t,e){const i=this._cachedMeta;if(this._parsing){const s=i._parsed.splice(t,e);i._stacked&&Ln(i,s)}i.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,i,s]=t;this[e](i,s)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}ot(Gn,"defaults",{}),ot(Gn,"datasetElementType",null),ot(Gn,"dataElementType",null);class Xi extends Gn{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:i,data:s=[],_dataset:r}=e,a=this.chart._animationsDisabled;let{start:c,count:u}=hu(e,s,a);this._drawStart=c,this._drawCount=u,du(e)&&(c=0,u=s.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!r._decimated,i.points=s;const d=this.resolveDatasetElementOptions(t);this.options.showLine||(d.borderWidth=0),d.segment=this.options.segment,this.updateElement(i,void 0,{animated:!a,options:d},t),this.updateElements(s,c,u,t)}updateElements(t,e,i,s){const r=s==="reset",{iScale:a,vScale:c,_stacked:u,_dataset:d}=this._cachedMeta,{sharedOptions:p,includeOptions:y}=this._getSharedOptions(e,s),v=a.axis,_=c.axis,{spanGaps:C,segment:E}=this.options,P=ni(C)?C:Number.POSITIVE_INFINITY,B=this.chart._animationsDisabled||r||s==="none",H=e+i,Y=t.length;let j=e>0&&this.getParsed(e-1);for(let N=0;N<Y;++N){const Q=t[N],$=B?Q:{};if(N<e||N>=H){$.skip=!0;continue}const U=this.getParsed(N),nt=bt(U[_]),ct=$[v]=a.getPixelForValue(U[v],N),at=$[_]=r||nt?c.getBasePixel():c.getPixelForValue(u?this.applyStack(c,U,u):U[_],N);$.skip=isNaN(ct)||isNaN(at)||nt,$.stop=N>0&&Math.abs(U[v]-j[v])>P,E&&($.parsed=U,$.raw=d.data[N]),y&&($.options=p||this.resolveDataElementOptions(N,Q.active?"active":s)),B||this.updateElement(Q,N,$,s),j=U}}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,i=e.options&&e.options.borderWidth||0,s=t.data||[];if(!s.length)return i;const r=s[0].size(this.resolveDataElementOptions(0)),a=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(i,r,a)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}ot(Xi,"id","line"),ot(Xi,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),ot(Xi,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function Xe(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Lr{constructor(t){ot(this,"options");this.options=t||{}}static override(t){Object.assign(Lr.prototype,t)}init(){}formats(){return Xe()}parse(){return Xe()}format(){return Xe()}add(){return Xe()}diff(){return Xe()}startOf(){return Xe()}endOf(){return Xe()}}var Ah={_date:Lr};function Th(n,t,e,i){const{controller:s,data:r,_sorted:a}=n,c=s._cachedMeta.iScale,u=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(c&&t===c.axis&&t!=="r"&&a&&r.length){const d=c._reversePixels?ru:Ze;if(i){if(s._sharedOptions){const p=r[0],y=typeof p.getRange=="function"&&p.getRange(t);if(y){const v=d(r,t,e-y),_=d(r,t,e+y);return{lo:v.lo,hi:_.hi}}}}else{const p=d(r,t,e);if(u){const{vScale:y}=s._cachedMeta,{_parsed:v}=n,_=v.slice(0,p.lo+1).reverse().findIndex(E=>!bt(E[y.axis]));p.lo-=Math.max(0,_);const C=v.slice(p.hi).findIndex(E=>!bt(E[y.axis]));p.hi+=Math.max(0,C)}return p}}return{lo:0,hi:r.length-1}}function us(n,t,e,i,s){const r=n.getSortedVisibleDatasetMetas(),a=e[t];for(let c=0,u=r.length;c<u;++c){const{index:d,data:p}=r[c],{lo:y,hi:v}=Th(r[c],t,a,s);for(let _=y;_<=v;++_){const C=p[_];C.skip||i(C,d,_)}}}function Ih(n){const t=n.indexOf("x")!==-1,e=n.indexOf("y")!==-1;return function(i,s){const r=t?Math.abs(i.x-s.x):0,a=e?Math.abs(i.y-s.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(a,2))}}function nr(n,t,e,i,s){const r=[];return!s&&!n.isPointInArea(t)||us(n,e,t,function(c,u,d){!s&&!ii(c,n.chartArea,0)||c.inRange(t.x,t.y,i)&&r.push({element:c,datasetIndex:u,index:d})},!0),r}function Rh(n,t,e,i){let s=[];function r(a,c,u){const{startAngle:d,endAngle:p}=a.getProps(["startAngle","endAngle"],i),{angle:y}=nu(a,{x:t.x,y:t.y});$a(y,d,p)&&s.push({element:a,datasetIndex:c,index:u})}return us(n,e,t,r),s}function Lh(n,t,e,i,s,r){let a=[];const c=Ih(e);let u=Number.POSITIVE_INFINITY;function d(p,y,v){const _=p.inRange(t.x,t.y,s);if(i&&!_)return;const C=p.getCenterPoint(s);if(!(!!r||n.isPointInArea(C))&&!_)return;const P=c(t,C);P<u?(a=[{element:p,datasetIndex:y,index:v}],u=P):P===u&&a.push({element:p,datasetIndex:y,index:v})}return us(n,e,t,d),a}function ir(n,t,e,i,s,r){return!r&&!n.isPointInArea(t)?[]:e==="r"&&!i?Rh(n,t,e,s):Lh(n,t,e,i,s,r)}function Jo(n,t,e,i,s){const r=[],a=e==="x"?"inXRange":"inYRange";let c=!1;return us(n,e,t,(u,d,p)=>{u[a]&&u[a](t[e],s)&&(r.push({element:u,datasetIndex:d,index:p}),c=c||u.inRange(t.x,t.y,s))}),i&&!c?[]:r}var Bh={modes:{index(n,t,e,i){const s=Ge(t,n),r=e.axis||"x",a=e.includeInvisible||!1,c=e.intersect?nr(n,s,r,i,a):ir(n,s,r,!1,i,a),u=[];return c.length?(n.getSortedVisibleDatasetMetas().forEach(d=>{const p=c[0].index,y=d.data[p];y&&!y.skip&&u.push({element:y,datasetIndex:d.index,index:p})}),u):[]},dataset(n,t,e,i){const s=Ge(t,n),r=e.axis||"xy",a=e.includeInvisible||!1;let c=e.intersect?nr(n,s,r,i,a):ir(n,s,r,!1,i,a);if(c.length>0){const u=c[0].datasetIndex,d=n.getDatasetMeta(u).data;c=[];for(let p=0;p<d.length;++p)c.push({element:d[p],datasetIndex:u,index:p})}return c},point(n,t,e,i){const s=Ge(t,n),r=e.axis||"xy",a=e.includeInvisible||!1;return nr(n,s,r,i,a)},nearest(n,t,e,i){const s=Ge(t,n),r=e.axis||"xy",a=e.includeInvisible||!1;return ir(n,s,r,e.intersect,i,a)},x(n,t,e,i){const s=Ge(t,n);return Jo(n,s,"x",e.intersect,i)},y(n,t,e,i){const s=Ge(t,n);return Jo(n,s,"y",e.intersect,i)}}};const ll=["left","top","right","bottom"];function Bn(n,t){return n.filter(e=>e.pos===t)}function Zo(n,t){return n.filter(e=>ll.indexOf(e.pos)===-1&&e.box.axis===t)}function Fn(n,t){return n.sort((e,i)=>{const s=t?i:e,r=t?e:i;return s.weight===r.weight?s.index-r.index:s.weight-r.weight})}function Fh(n){const t=[];let e,i,s,r,a,c;for(e=0,i=(n||[]).length;e<i;++e)s=n[e],{position:r,options:{stack:a,stackWeight:c=1}}=s,t.push({index:e,box:s,pos:r,horizontal:s.isHorizontal(),weight:s.weight,stack:a&&r+a,stackWeight:c});return t}function zh(n){const t={};for(const e of n){const{stack:i,pos:s,stackWeight:r}=e;if(!i||!ll.includes(s))continue;const a=t[i]||(t[i]={count:0,placed:0,weight:0,size:0});a.count++,a.weight+=r}return t}function jh(n,t){const e=zh(n),{vBoxMaxWidth:i,hBoxMaxHeight:s}=t;let r,a,c;for(r=0,a=n.length;r<a;++r){c=n[r];const{fullSize:u}=c.box,d=e[c.stack],p=d&&c.stackWeight/d.weight;c.horizontal?(c.width=p?p*i:u&&t.availableWidth,c.height=s):(c.width=i,c.height=p?p*s:u&&t.availableHeight)}return e}function Nh(n){const t=Fh(n),e=Fn(t.filter(d=>d.box.fullSize),!0),i=Fn(Bn(t,"left"),!0),s=Fn(Bn(t,"right")),r=Fn(Bn(t,"top"),!0),a=Fn(Bn(t,"bottom")),c=Zo(t,"x"),u=Zo(t,"y");return{fullSize:e,leftAndTop:i.concat(r),rightAndBottom:s.concat(u).concat(a).concat(c),chartArea:Bn(t,"chartArea"),vertical:i.concat(s).concat(u),horizontal:r.concat(a).concat(c)}}function ta(n,t,e,i){return Math.max(n[e],t[e])+Math.max(n[i],t[i])}function cl(n,t){n.top=Math.max(n.top,t.top),n.left=Math.max(n.left,t.left),n.bottom=Math.max(n.bottom,t.bottom),n.right=Math.max(n.right,t.right)}function Hh(n,t,e,i){const{pos:s,box:r}=e,a=n.maxPadding;if(!pt(s)){e.size&&(n[s]-=e.size);const y=i[e.stack]||{size:0,count:1};y.size=Math.max(y.size,e.horizontal?r.height:r.width),e.size=y.size/y.count,n[s]+=e.size}r.getPadding&&cl(a,r.getPadding());const c=Math.max(0,t.outerWidth-ta(a,n,"left","right")),u=Math.max(0,t.outerHeight-ta(a,n,"top","bottom")),d=c!==n.w,p=u!==n.h;return n.w=c,n.h=u,e.horizontal?{same:d,other:p}:{same:p,other:d}}function Kh(n){const t=n.maxPadding;function e(i){const s=Math.max(t[i]-n[i],0);return n[i]+=s,s}n.y+=e("top"),n.x+=e("left"),e("right"),e("bottom")}function Wh(n,t){const e=t.maxPadding;function i(s){const r={left:0,top:0,right:0,bottom:0};return s.forEach(a=>{r[a]=Math.max(t[a],e[a])}),r}return i(n?["left","right"]:["top","bottom"])}function Kn(n,t,e,i){const s=[];let r,a,c,u,d,p;for(r=0,a=n.length,d=0;r<a;++r){c=n[r],u=c.box,u.update(c.width||t.w,c.height||t.h,Wh(c.horizontal,t));const{same:y,other:v}=Hh(t,e,c,i);d|=y&&s.length,p=p||v,u.fullSize||s.push(c)}return d&&Kn(s,t,e,i)||p}function Wi(n,t,e,i,s){n.top=e,n.left=t,n.right=t+i,n.bottom=e+s,n.width=i,n.height=s}function ea(n,t,e,i){const s=e.padding;let{x:r,y:a}=t;for(const c of n){const u=c.box,d=i[c.stack]||{placed:0,weight:1},p=c.stackWeight/d.weight||1;if(c.horizontal){const y=t.w*p,v=d.size||u.height;is(d.start)&&(a=d.start),u.fullSize?Wi(u,s.left,a,e.outerWidth-s.right-s.left,v):Wi(u,t.left+d.placed,a,y,v),d.start=a,d.placed+=y,a=u.bottom}else{const y=t.h*p,v=d.size||u.width;is(d.start)&&(r=d.start),u.fullSize?Wi(u,r,s.top,v,e.outerHeight-s.bottom-s.top):Wi(u,r,t.top+d.placed,v,y),d.start=r,d.placed+=y,r=u.right}}t.x=r,t.y=a}var Qt={addBox(n,t){n.boxes||(n.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},n.boxes.push(t)},removeBox(n,t){const e=n.boxes?n.boxes.indexOf(t):-1;e!==-1&&n.boxes.splice(e,1)},configure(n,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(n,t,e,i){if(!n)return;const s=Zt(n.options.layout.padding),r=Math.max(t-s.width,0),a=Math.max(e-s.height,0),c=Nh(n.boxes),u=c.vertical,d=c.horizontal;gt(n.boxes,E=>{typeof E.beforeLayout=="function"&&E.beforeLayout()});const p=u.reduce((E,P)=>P.box.options&&P.box.options.display===!1?E:E+1,0)||1,y=Object.freeze({outerWidth:t,outerHeight:e,padding:s,availableWidth:r,availableHeight:a,vBoxMaxWidth:r/2/p,hBoxMaxHeight:a/2}),v=Object.assign({},s);cl(v,Zt(i));const _=Object.assign({maxPadding:v,w:r,h:a,x:s.left,y:s.top},s),C=jh(u.concat(d),y);Kn(c.fullSize,_,y,C),Kn(u,_,y,C),Kn(d,_,y,C)&&Kn(u,_,y,C),Kh(_),ea(c.leftAndTop,_,y,C),_.x+=_.w,_.y+=_.h,ea(c.rightAndBottom,_,y,C),n.chartArea={left:_.left,top:_.top,right:_.left+_.w,bottom:_.top+_.h,height:_.h,width:_.w},gt(c.chartArea,E=>{const P=E.box;Object.assign(P,n.chartArea),P.update(_.w,_.h,{left:0,top:0,right:0,bottom:0})})}};class ul{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,i){}removeEventListener(t,e,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,i,s){return e=Math.max(0,e||t.width),i=i||t.height,{width:e,height:Math.max(0,s?Math.floor(e/s):i)}}isAttached(t){return!0}updateConfig(t){}}class $h extends ul{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Gi="$chartjs",Vh={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},na=n=>n===null||n==="";function qh(n,t){const e=n.style,i=n.getAttribute("height"),s=n.getAttribute("width");if(n[Gi]={initial:{height:i,width:s,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",na(s)){const r=Ko(n,"width");r!==void 0&&(n.width=r)}if(na(i))if(n.style.height==="")n.height=n.width/(t||2);else{const r=Ko(n,"height");r!==void 0&&(n.height=r)}return n}const hl=nh?{passive:!0}:!1;function Uh(n,t,e){n&&n.addEventListener(t,e,hl)}function Yh(n,t,e){n&&n.canvas&&n.canvas.removeEventListener(t,e,hl)}function Xh(n,t){const e=Vh[n.type]||n.type,{x:i,y:s}=Ge(n,t);return{type:e,chart:t,native:n,x:i!==void 0?i:null,y:s!==void 0?s:null}}function os(n,t){for(const e of n)if(e===t||e.contains(t))return!0}function Gh(n,t,e){const i=n.canvas,s=new MutationObserver(r=>{let a=!1;for(const c of r)a=a||os(c.addedNodes,i),a=a&&!os(c.removedNodes,i);a&&e()});return s.observe(document,{childList:!0,subtree:!0}),s}function Qh(n,t,e){const i=n.canvas,s=new MutationObserver(r=>{let a=!1;for(const c of r)a=a||os(c.removedNodes,i),a=a&&!os(c.addedNodes,i);a&&e()});return s.observe(document,{childList:!0,subtree:!0}),s}const ri=new Map;let ia=0;function dl(){const n=window.devicePixelRatio;n!==ia&&(ia=n,ri.forEach((t,e)=>{e.currentDevicePixelRatio!==n&&t()}))}function Jh(n,t){ri.size||window.addEventListener("resize",dl),ri.set(n,t)}function Zh(n){ri.delete(n),ri.size||window.removeEventListener("resize",dl)}function td(n,t,e){const i=n.canvas,s=i&&Rr(i);if(!s)return;const r=Ua((c,u)=>{const d=s.clientWidth;e(c,u),d<s.clientWidth&&e()},window),a=new ResizeObserver(c=>{const u=c[0],d=u.contentRect.width,p=u.contentRect.height;d===0&&p===0||r(d,p)});return a.observe(s),Jh(n,r),a}function sr(n,t,e){e&&e.disconnect(),t==="resize"&&Zh(n)}function ed(n,t,e){const i=n.canvas,s=Ua(r=>{n.ctx!==null&&e(Xh(r,n))},n);return Uh(i,t,s),s}class nd extends ul{acquireContext(t,e){const i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(qh(t,e),i):null}releaseContext(t){const e=t.canvas;if(!e[Gi])return!1;const i=e[Gi].initial;["height","width"].forEach(r=>{const a=i[r];bt(a)?e.removeAttribute(r):e.setAttribute(r,a)});const s=i.style||{};return Object.keys(s).forEach(r=>{e.style[r]=s[r]}),e.width=e.width,delete e[Gi],!0}addEventListener(t,e,i){this.removeEventListener(t,e);const s=t.$proxies||(t.$proxies={}),a={attach:Gh,detach:Qh,resize:td}[e]||ed;s[e]=a(t,e,i)}removeEventListener(t,e){const i=t.$proxies||(t.$proxies={}),s=i[e];if(!s)return;({attach:sr,detach:sr,resize:sr}[e]||Yh)(t,e,s),i[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,i,s){return eh(t,e,i,s)}isAttached(t){const e=t&&Rr(t);return!!(e&&e.isConnected)}}function id(n){return!Ir()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?$h:nd}class xe{constructor(){ot(this,"x");ot(this,"y");ot(this,"active",!1);ot(this,"options");ot(this,"$animations")}tooltipPosition(t){const{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}hasValue(){return ni(this.x)&&ni(this.y)}getProps(t,e){const i=this.$animations;if(!e||!i)return this;const s={};return t.forEach(r=>{s[r]=i[r]&&i[r].active()?i[r]._to:this[r]}),s}}ot(xe,"defaults",{}),ot(xe,"defaultRoutes");function sd(n,t){const e=n.options.ticks,i=rd(n),s=Math.min(e.maxTicksLimit||i,i),r=e.major.enabled?ad(t):[],a=r.length,c=r[0],u=r[a-1],d=[];if(a>s)return ld(t,d,r,a/s),d;const p=od(r,t,s);if(a>0){let y,v;const _=a>1?Math.round((u-c)/(a-1)):null;for($i(t,d,p,bt(_)?0:c-_,c),y=0,v=a-1;y<v;y++)$i(t,d,p,r[y],r[y+1]);return $i(t,d,p,u,bt(_)?t.length:u+_),d}return $i(t,d,p),d}function rd(n){const t=n.options.offset,e=n._tickSize(),i=n._length/e+(t?0:1),s=n._maxLength/e;return Math.floor(Math.min(i,s))}function od(n,t,e){const i=cd(n),s=t.length/e;if(!i)return Math.max(s,1);const r=Qc(i);for(let a=0,c=r.length-1;a<c;a++){const u=r[a];if(u>s)return u}return Math.max(s,1)}function ad(n){const t=[];let e,i;for(e=0,i=n.length;e<i;e++)n[e].major&&t.push(e);return t}function ld(n,t,e,i){let s=0,r=e[0],a;for(i=Math.ceil(i),a=0;a<n.length;a++)a===r&&(t.push(n[a]),s++,r=e[s*i])}function $i(n,t,e,i,s){const r=dt(i,0),a=Math.min(dt(s,n.length),n.length);let c=0,u,d,p;for(e=Math.ceil(e),s&&(u=s-i,e=u/Math.floor(u/e)),p=r;p<0;)c++,p=Math.round(r+c*e);for(d=Math.max(r,0);d<a;d++)d===p&&(t.push(n[d]),c++,p=Math.round(r+c*e))}function cd(n){const t=n.length;let e,i;if(t<2)return!1;for(i=n[0],e=1;e<t;++e)if(n[e]-n[e-1]!==i)return!1;return i}const ud=n=>n==="left"?"right":n==="right"?"left":n,sa=(n,t,e)=>t==="top"||t==="left"?n[t]+e:n[t]-e,ra=(n,t)=>Math.min(t||n,n);function oa(n,t){const e=[],i=n.length/t,s=n.length;let r=0;for(;r<s;r+=i)e.push(n[Math.floor(r)]);return e}function hd(n,t,e){const i=n.ticks.length,s=Math.min(t,i-1),r=n._startPixel,a=n._endPixel,c=1e-6;let u=n.getPixelForTick(s),d;if(!(e&&(i===1?d=Math.max(u-r,a-u):t===0?d=(n.getPixelForTick(1)-u)/2:d=(u-n.getPixelForTick(s-1))/2,u+=s<t?d:-d,u<r-c||u>a+c)))return u}function dd(n,t){gt(n,e=>{const i=e.gc,s=i.length/2;let r;if(s>t){for(r=0;r<s;++r)delete e.data[i[r]];i.splice(0,s)}})}function zn(n){return n.drawTicks?n.tickLength:0}function aa(n,t){if(!n.display)return 0;const e=Bt(n.font,t),i=Zt(n.padding);return(Et(n.text)?n.text.length:1)*e.lineHeight+i.height}function fd(n,t){return sn(n,{scale:t,type:"scale"})}function pd(n,t,e){return sn(n,{tick:e,index:t,type:"tick"})}function gd(n,t,e){let i=Pr(n);return(e&&t!=="right"||!e&&t==="right")&&(i=ud(i)),i}function md(n,t,e,i){const{top:s,left:r,bottom:a,right:c,chart:u}=n,{chartArea:d,scales:p}=u;let y=0,v,_,C;const E=a-s,P=c-r;if(n.isHorizontal()){if(_=Lt(i,r,c),pt(e)){const B=Object.keys(e)[0],H=e[B];C=p[B].getPixelForValue(H)+E-t}else e==="center"?C=(d.bottom+d.top)/2+E-t:C=sa(n,e,t);v=c-r}else{if(pt(e)){const B=Object.keys(e)[0],H=e[B];_=p[B].getPixelForValue(H)-P+t}else e==="center"?_=(d.left+d.right)/2-P+t:_=sa(n,e,t);C=Lt(i,a,s),y=e==="left"?-ne:ne}return{titleX:_,titleY:C,maxWidth:v,rotation:y}}class _n extends xe{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:i,_suggestedMax:s}=this;return t=le(t,Number.POSITIVE_INFINITY),e=le(e,Number.NEGATIVE_INFINITY),i=le(i,Number.POSITIVE_INFINITY),s=le(s,Number.NEGATIVE_INFINITY),{min:le(t,i),max:le(e,s),minDefined:Jt(t),maxDefined:Jt(e)}}getMinMax(t){let{min:e,max:i,minDefined:s,maxDefined:r}=this.getUserBounds(),a;if(s&&r)return{min:e,max:i};const c=this.getMatchingVisibleMetas();for(let u=0,d=c.length;u<d;++u)a=c[u].controller.getMinMax(this,t),s||(e=Math.min(e,a.min)),r||(i=Math.max(i,a.max));return e=r&&e>i?i:e,i=s&&e>i?e:i,{min:le(e,le(i,e)),max:le(i,le(e,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){_t(this.options.beforeUpdate,[this])}update(t,e,i){const{beginAtZero:s,grace:r,ticks:a}=this.options,c=a.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Iu(this,r,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const u=c<this.ticks.length;this._convertTicksToLabels(u?oa(this.ticks,c):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),a.display&&(a.autoSkip||a.source==="auto")&&(this.ticks=sd(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),u&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,e,i;this.isHorizontal()?(e=this.left,i=this.right):(e=this.top,i=this.bottom,t=!t),this._startPixel=e,this._endPixel=i,this._reversePixels=t,this._length=i-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){_t(this.options.afterUpdate,[this])}beforeSetDimensions(){_t(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){_t(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),_t(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){_t(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let i,s,r;for(i=0,s=t.length;i<s;i++)r=t[i],r.label=_t(e.callback,[r.value,i,t],this)}afterTickToLabelConversion(){_t(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){_t(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,i=ra(this.ticks.length,t.ticks.maxTicksLimit),s=e.minRotation||0,r=e.maxRotation;let a=s,c,u,d;if(!this._isVisible()||!e.display||s>=r||i<=1||!this.isHorizontal()){this.labelRotation=s;return}const p=this._getLabelSizes(),y=p.widest.width,v=p.highest.height,_=Gt(this.chart.width-y,0,this.maxWidth);c=t.offset?this.maxWidth/i:_/(i-1),y+6>c&&(c=_/(i-(t.offset?.5:1)),u=this.maxHeight-zn(t.grid)-e.padding-aa(t.title,this.chart.options.font),d=Math.sqrt(y*y+v*v),a=eu(Math.min(Math.asin(Gt((p.highest.height+6)/c,-1,1)),Math.asin(Gt(u/d,-1,1))-Math.asin(Gt(v/d,-1,1)))),a=Math.max(s,Math.min(r,a))),this.labelRotation=a}afterCalculateLabelRotation(){_t(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){_t(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:i,title:s,grid:r}}=this,a=this._isVisible(),c=this.isHorizontal();if(a){const u=aa(s,e.options.font);if(c?(t.width=this.maxWidth,t.height=zn(r)+u):(t.height=this.maxHeight,t.width=zn(r)+u),i.display&&this.ticks.length){const{first:d,last:p,widest:y,highest:v}=this._getLabelSizes(),_=i.padding*2,C=Je(this.labelRotation),E=Math.cos(C),P=Math.sin(C);if(c){const B=i.mirror?0:P*y.width+E*v.height;t.height=Math.min(this.maxHeight,t.height+B+_)}else{const B=i.mirror?0:E*y.width+P*v.height;t.width=Math.min(this.maxWidth,t.width+B+_)}this._calculatePadding(d,p,P,E)}}this._handleMargins(),c?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,i,s){const{ticks:{align:r,padding:a},position:c}=this.options,u=this.labelRotation!==0,d=c!=="top"&&this.axis==="x";if(this.isHorizontal()){const p=this.getPixelForTick(0)-this.left,y=this.right-this.getPixelForTick(this.ticks.length-1);let v=0,_=0;u?d?(v=s*t.width,_=i*e.height):(v=i*t.height,_=s*e.width):r==="start"?_=e.width:r==="end"?v=t.width:r!=="inner"&&(v=t.width/2,_=e.width/2),this.paddingLeft=Math.max((v-p+a)*this.width/(this.width-p),0),this.paddingRight=Math.max((_-y+a)*this.width/(this.width-y),0)}else{let p=e.height/2,y=t.height/2;r==="start"?(p=0,y=t.height):r==="end"&&(p=e.height,y=0),this.paddingTop=p+a,this.paddingBottom=y+a}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){_t(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return e==="top"||e==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let e,i;for(e=0,i=t.length;e<i;e++)bt(t[e].label)&&(t.splice(e,1),i--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let i=this.ticks;e<i.length&&(i=oa(i,e)),this._labelSizes=t=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,i){const{ctx:s,_longestTextCache:r}=this,a=[],c=[],u=Math.floor(e/ra(e,i));let d=0,p=0,y,v,_,C,E,P,B,H,Y,j,N;for(y=0;y<e;y+=u){if(C=t[y].label,E=this._resolveTickFontOptions(y),s.font=P=E.string,B=r[P]=r[P]||{data:{},gc:[]},H=E.lineHeight,Y=j=0,!bt(C)&&!Et(C))Y=Fo(s,B.data,B.gc,Y,C),j=H;else if(Et(C))for(v=0,_=C.length;v<_;++v)N=C[v],!bt(N)&&!Et(N)&&(Y=Fo(s,B.data,B.gc,Y,N),j+=H);a.push(Y),c.push(j),d=Math.max(Y,d),p=Math.max(j,p)}dd(r,e);const Q=a.indexOf(d),$=c.indexOf(p),U=nt=>({width:a[nt]||0,height:c[nt]||0});return{first:U(0),last:U(e-1),widest:U(Q),highest:U($),widths:a,heights:c}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return su(this._alignToPixels?Ye(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const i=e[t];return i.$context||(i.$context=pd(this.getContext(),t,i))}return this.$context||(this.$context=fd(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=Je(this.labelRotation),i=Math.abs(Math.cos(e)),s=Math.abs(Math.sin(e)),r=this._getLabelSizes(),a=t.autoSkipPadding||0,c=r?r.widest.width+a:0,u=r?r.highest.height+a:0;return this.isHorizontal()?u*i>c*s?c/i:u/s:u*s<c*i?u/i:c/s}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,i=this.chart,s=this.options,{grid:r,position:a,border:c}=s,u=r.offset,d=this.isHorizontal(),y=this.ticks.length+(u?1:0),v=zn(r),_=[],C=c.setContext(this.getContext()),E=C.display?C.width:0,P=E/2,B=function(kt){return Ye(i,kt,E)};let H,Y,j,N,Q,$,U,nt,ct,at,ut,wt;if(a==="top")H=B(this.bottom),$=this.bottom-v,nt=H-P,at=B(t.top)+P,wt=t.bottom;else if(a==="bottom")H=B(this.top),at=t.top,wt=B(t.bottom)-P,$=H+P,nt=this.top+v;else if(a==="left")H=B(this.right),Q=this.right-v,U=H-P,ct=B(t.left)+P,ut=t.right;else if(a==="right")H=B(this.left),ct=t.left,ut=B(t.right)-P,Q=H+P,U=this.left+v;else if(e==="x"){if(a==="center")H=B((t.top+t.bottom)/2+.5);else if(pt(a)){const kt=Object.keys(a)[0],zt=a[kt];H=B(this.chart.scales[kt].getPixelForValue(zt))}at=t.top,wt=t.bottom,$=H+P,nt=$+v}else if(e==="y"){if(a==="center")H=B((t.left+t.right)/2);else if(pt(a)){const kt=Object.keys(a)[0],zt=a[kt];H=B(this.chart.scales[kt].getPixelForValue(zt))}Q=H-P,U=Q-v,ct=t.left,ut=t.right}const $t=dt(s.ticks.maxTicksLimit,y),vt=Math.max(1,Math.ceil(y/$t));for(Y=0;Y<y;Y+=vt){const kt=this.getContext(Y),zt=r.setContext(kt),Vt=c.setContext(kt),te=zt.lineWidth,At=zt.color,we=Vt.dash||[],ke=Vt.dashOffset,qt=zt.tickWidth,ie=zt.tickColor,se=zt.tickBorderDash||[],jt=zt.tickBorderDashOffset;j=hd(this,Y,u),j!==void 0&&(N=Ye(i,j,te),d?Q=U=ct=ut=N:$=nt=at=wt=N,_.push({tx1:Q,ty1:$,tx2:U,ty2:nt,x1:ct,y1:at,x2:ut,y2:wt,width:te,color:At,borderDash:we,borderDashOffset:ke,tickWidth:qt,tickColor:ie,tickBorderDash:se,tickBorderDashOffset:jt}))}return this._ticksLength=y,this._borderValue=H,_}_computeLabelItems(t){const e=this.axis,i=this.options,{position:s,ticks:r}=i,a=this.isHorizontal(),c=this.ticks,{align:u,crossAlign:d,padding:p,mirror:y}=r,v=zn(i.grid),_=v+p,C=y?-p:_,E=-Je(this.labelRotation),P=[];let B,H,Y,j,N,Q,$,U,nt,ct,at,ut,wt="middle";if(s==="top")Q=this.bottom-C,$=this._getXAxisLabelAlignment();else if(s==="bottom")Q=this.top+C,$=this._getXAxisLabelAlignment();else if(s==="left"){const vt=this._getYAxisLabelAlignment(v);$=vt.textAlign,N=vt.x}else if(s==="right"){const vt=this._getYAxisLabelAlignment(v);$=vt.textAlign,N=vt.x}else if(e==="x"){if(s==="center")Q=(t.top+t.bottom)/2+_;else if(pt(s)){const vt=Object.keys(s)[0],kt=s[vt];Q=this.chart.scales[vt].getPixelForValue(kt)+_}$=this._getXAxisLabelAlignment()}else if(e==="y"){if(s==="center")N=(t.left+t.right)/2-_;else if(pt(s)){const vt=Object.keys(s)[0],kt=s[vt];N=this.chart.scales[vt].getPixelForValue(kt)}$=this._getYAxisLabelAlignment(v).textAlign}e==="y"&&(u==="start"?wt="top":u==="end"&&(wt="bottom"));const $t=this._getLabelSizes();for(B=0,H=c.length;B<H;++B){Y=c[B],j=Y.label;const vt=r.setContext(this.getContext(B));U=this.getPixelForTick(B)+r.labelOffset,nt=this._resolveTickFontOptions(B),ct=nt.lineHeight,at=Et(j)?j.length:1;const kt=at/2,zt=vt.color,Vt=vt.textStrokeColor,te=vt.textStrokeWidth;let At=$;a?(N=U,$==="inner"&&(B===H-1?At=this.options.reverse?"left":"right":B===0?At=this.options.reverse?"right":"left":At="center"),s==="top"?d==="near"||E!==0?ut=-at*ct+ct/2:d==="center"?ut=-$t.highest.height/2-kt*ct+ct:ut=-$t.highest.height+ct/2:d==="near"||E!==0?ut=ct/2:d==="center"?ut=$t.highest.height/2-kt*ct:ut=$t.highest.height-at*ct,y&&(ut*=-1),E!==0&&!vt.showLabelBackdrop&&(N+=ct/2*Math.sin(E))):(Q=U,ut=(1-at)*ct/2);let we;if(vt.showLabelBackdrop){const ke=Zt(vt.backdropPadding),qt=$t.heights[B],ie=$t.widths[B];let se=ut-ke.top,jt=0-ke.left;switch(wt){case"middle":se-=qt/2;break;case"bottom":se-=qt;break}switch($){case"center":jt-=ie/2;break;case"right":jt-=ie;break;case"inner":B===H-1?jt-=ie:B>0&&(jt-=ie/2);break}we={left:jt,top:se,width:ie+ke.width,height:qt+ke.height,color:vt.backdropColor}}P.push({label:j,font:nt,textOffset:ut,options:{rotation:E,color:zt,strokeColor:Vt,strokeWidth:te,textAlign:At,textBaseline:wt,translation:[N,Q],backdrop:we}})}return P}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-Je(this.labelRotation))return t==="top"?"left":"right";let s="center";return e.align==="start"?s="left":e.align==="end"?s="right":e.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:i,mirror:s,padding:r}}=this.options,a=this._getLabelSizes(),c=t+r,u=a.widest.width;let d,p;return e==="left"?s?(p=this.right+r,i==="near"?d="left":i==="center"?(d="center",p+=u/2):(d="right",p+=u)):(p=this.right-c,i==="near"?d="right":i==="center"?(d="center",p-=u/2):(d="left",p=this.left)):e==="right"?s?(p=this.left+r,i==="near"?d="right":i==="center"?(d="center",p-=u/2):(d="left",p-=u)):(p=this.left+c,i==="near"?d="left":i==="center"?(d="center",p+=u/2):(d="right",p=this.right)):d="right",{textAlign:d,x:p}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:i,top:s,width:r,height:a}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(i,s,r,a),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const s=this.ticks.findIndex(r=>r.value===t);return s>=0?e.setContext(this.getContext(s)).lineWidth:0}drawGrid(t){const e=this.options.grid,i=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let r,a;const c=(u,d,p)=>{!p.width||!p.color||(i.save(),i.lineWidth=p.width,i.strokeStyle=p.color,i.setLineDash(p.borderDash||[]),i.lineDashOffset=p.borderDashOffset,i.beginPath(),i.moveTo(u.x,u.y),i.lineTo(d.x,d.y),i.stroke(),i.restore())};if(e.display)for(r=0,a=s.length;r<a;++r){const u=s[r];e.drawOnChartArea&&c({x:u.x1,y:u.y1},{x:u.x2,y:u.y2},u),e.drawTicks&&c({x:u.tx1,y:u.ty1},{x:u.tx2,y:u.ty2},{color:u.tickColor,width:u.tickWidth,borderDash:u.tickBorderDash,borderDashOffset:u.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:i,grid:s}}=this,r=i.setContext(this.getContext()),a=i.display?r.width:0;if(!a)return;const c=s.setContext(this.getContext(0)).lineWidth,u=this._borderValue;let d,p,y,v;this.isHorizontal()?(d=Ye(t,this.left,a)-a/2,p=Ye(t,this.right,c)+c/2,y=v=u):(y=Ye(t,this.top,a)-a/2,v=Ye(t,this.bottom,c)+c/2,d=p=u),e.save(),e.lineWidth=r.width,e.strokeStyle=r.color,e.beginPath(),e.moveTo(d,y),e.lineTo(p,v),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const i=this.ctx,s=this._computeLabelArea();s&&Dr(i,s);const r=this.getLabelItems(t);for(const a of r){const c=a.options,u=a.font,d=a.label,p=a.textOffset;si(i,d,0,p,u,c)}s&&Er(i)}drawTitle(){const{ctx:t,options:{position:e,title:i,reverse:s}}=this;if(!i.display)return;const r=Bt(i.font),a=Zt(i.padding),c=i.align;let u=r.lineHeight/2;e==="bottom"||e==="center"||pt(e)?(u+=a.bottom,Et(i.text)&&(u+=r.lineHeight*(i.text.length-1))):u+=a.top;const{titleX:d,titleY:p,maxWidth:y,rotation:v}=md(this,u,e,c);si(t,i.text,0,0,r,{color:i.color,maxWidth:y,rotation:v,textAlign:gd(c,e,s),textBaseline:"middle",translation:[d,p]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,i=dt(t.grid&&t.grid.z,-1),s=dt(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==_n.prototype.draw?[{z:e,draw:r=>{this.draw(r)}}]:[{z:i,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:e,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",s=[];let r,a;for(r=0,a=e.length;r<a;++r){const c=e[r];c[i]===this.id&&(!t||c.type===t)&&s.push(c)}return s}_resolveTickFontOptions(t){const e=this.options.ticks.setContext(this.getContext(t));return Bt(e.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Vi{constructor(t,e,i){this.type=t,this.scope=e,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let i;vd(e)&&(i=this.register(e));const s=this.items,r=t.id,a=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+t);return r in s||(s[r]=t,yd(t,a,i),this.override&&Pt.override(t.id,t.overrides)),a}get(t){return this.items[t]}unregister(t){const e=this.items,i=t.id,s=this.scope;i in e&&delete e[i],s&&i in Pt[s]&&(delete Pt[s][i],this.override&&delete nn[i])}}function yd(n,t,e){const i=ei(Object.create(null),[e?Pt.get(e):{},Pt.get(t),n.defaults]);Pt.set(t,i),n.defaultRoutes&&bd(t,n.defaultRoutes),n.descriptors&&Pt.describe(t,n.descriptors)}function bd(n,t){Object.keys(t).forEach(e=>{const i=e.split("."),s=i.pop(),r=[n].concat(i).join("."),a=t[e].split("."),c=a.pop(),u=a.join(".");Pt.route(r,s,u,c)})}function vd(n){return"id"in n&&"defaults"in n}class _d{constructor(){this.controllers=new Vi(Gn,"datasets",!0),this.elements=new Vi(xe,"elements"),this.plugins=new Vi(Object,"plugins"),this.scales=new Vi(_n,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,i){[...e].forEach(s=>{const r=i||this._getRegistryForType(s);i||r.isForType(s)||r===this.plugins&&s.id?this._exec(t,r,s):gt(s,a=>{const c=i||this._getRegistryForType(a);this._exec(t,c,a)})})}_exec(t,e,i){const s=Sr(t);_t(i["before"+s],[],i),e[t](i),_t(i["after"+s],[],i)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const i=this._typedRegistries[e];if(i.isForType(t))return i}return this.plugins}_get(t,e,i){const s=e.get(t);if(s===void 0)throw new Error('"'+t+'" is not a registered '+i+".");return s}}var ue=new _d;class xd{constructor(){this._init=void 0}notify(t,e,i,s){if(e==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install")),this._init===void 0)return;const r=s?this._descriptors(t).filter(s):this._descriptors(t),a=this._notify(r,t,e,i);return e==="afterDestroy"&&(this._notify(r,t,"stop"),this._notify(this._init,t,"uninstall"),this._init=void 0),a}_notify(t,e,i,s){s=s||{};for(const r of t){const a=r.plugin,c=a[i],u=[e,s,r.options];if(_t(c,u,a)===!1&&s.cancelable)return!1}return!0}invalidate(){bt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const i=t&&t.config,s=dt(i.options&&i.options.plugins,{}),r=wd(i);return s===!1&&!e?[]:Sd(t,r,s,e)}_notifyStateChanges(t){const e=this._oldCache||[],i=this._cache,s=(r,a)=>r.filter(c=>!a.some(u=>c.plugin.id===u.plugin.id));this._notify(s(e,i),t,"stop"),this._notify(s(i,e),t,"start")}}function wd(n){const t={},e=[],i=Object.keys(ue.plugins.items);for(let r=0;r<i.length;r++)e.push(ue.getPlugin(i[r]));const s=n.plugins||[];for(let r=0;r<s.length;r++){const a=s[r];e.indexOf(a)===-1&&(e.push(a),t[a.id]=!0)}return{plugins:e,localIds:t}}function kd(n,t){return!t&&n===!1?null:n===!0?{}:n}function Sd(n,{plugins:t,localIds:e},i,s){const r=[],a=n.getContext();for(const c of t){const u=c.id,d=kd(i[u],s);d!==null&&r.push({plugin:c,options:Md(n.config,{plugin:c,local:e[u]},d,a)})}return r}function Md(n,{plugin:t,local:e},i,s){const r=n.pluginScopeKeys(t),a=n.getOptionScopes(i,r);return e&&t.defaults&&a.push(t.defaults),n.createResolver(a,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function fr(n,t){const e=Pt.datasets[n]||{};return((t.datasets||{})[n]||{}).indexAxis||t.indexAxis||e.indexAxis||"x"}function Pd(n,t){let e=n;return n==="_index_"?e=t:n==="_value_"&&(e=t==="x"?"y":"x"),e}function Od(n,t){return n===t?"_index_":"_value_"}function la(n){if(n==="x"||n==="y"||n==="r")return n}function Dd(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function pr(n,...t){if(la(n))return n;for(const e of t){const i=e.axis||Dd(e.position)||n.length>1&&la(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function ca(n,t,e){if(e[t+"AxisID"]===n)return{axis:t}}function Ed(n,t){if(t.data&&t.data.datasets){const e=t.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(e.length)return ca(n,"x",e[0])||ca(n,"y",e[0])}return{}}function Cd(n,t){const e=nn[n.type]||{scales:{}},i=t.scales||{},s=fr(n.type,t),r=Object.create(null);return Object.keys(i).forEach(a=>{const c=i[a];if(!pt(c))return console.error(`Invalid scale configuration for scale: ${a}`);if(c._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${a}`);const u=pr(a,c,Ed(a,n),Pt.scales[c.type]),d=Od(u,s),p=e.scales||{};r[a]=Vn(Object.create(null),[{axis:u},c,p[u],p[d]])}),n.data.datasets.forEach(a=>{const c=a.type||n.type,u=a.indexAxis||fr(c,t),p=(nn[c]||{}).scales||{};Object.keys(p).forEach(y=>{const v=Pd(y,u),_=a[v+"AxisID"]||v;r[_]=r[_]||Object.create(null),Vn(r[_],[{axis:v},i[_],p[y]])})}),Object.keys(r).forEach(a=>{const c=r[a];Vn(c,[Pt.scales[c.type],Pt.scale])}),r}function fl(n){const t=n.options||(n.options={});t.plugins=dt(t.plugins,{}),t.scales=Cd(n,t)}function pl(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function Ad(n){return n=n||{},n.data=pl(n.data),fl(n),n}const ua=new Map,gl=new Set;function qi(n,t){let e=ua.get(n);return e||(e=t(),ua.set(n,e),gl.add(e)),e}const jn=(n,t,e)=>{const i=ns(t,e);i!==void 0&&n.add(i)};class Td{constructor(t){this._config=Ad(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=pl(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),fl(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return qi(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return qi(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return qi(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id,i=this.type;return qi(`${i}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const i=this._scopeCache;let s=i.get(t);return(!s||e)&&(s=new Map,i.set(t,s)),s}getOptionScopes(t,e,i){const{options:s,type:r}=this,a=this._cachedScopes(t,i),c=a.get(e);if(c)return c;const u=new Set;e.forEach(p=>{t&&(u.add(t),p.forEach(y=>jn(u,t,y))),p.forEach(y=>jn(u,s,y)),p.forEach(y=>jn(u,nn[r]||{},y)),p.forEach(y=>jn(u,Pt,y)),p.forEach(y=>jn(u,ur,y))});const d=Array.from(u);return d.length===0&&d.push(Object.create(null)),gl.has(e)&&a.set(e,d),d}chartOptionScopes(){const{options:t,type:e}=this;return[t,nn[e]||{},Pt.datasets[e]||{},{type:e},Pt,ur]}resolveNamedOptions(t,e,i,s=[""]){const r={$shared:!0},{resolver:a,subPrefixes:c}=ha(this._resolverCache,t,s);let u=a;if(Rd(a,e)){r.$shared=!1,i=Le(i)?i():i;const d=this.createResolver(t,i,c);u=bn(a,i,d)}for(const d of e)r[d]=u[d];return r}createResolver(t,e,i=[""],s){const{resolver:r}=ha(this._resolverCache,t,i);return pt(e)?bn(r,e,void 0,s):r}}function ha(n,t,e){let i=n.get(t);i||(i=new Map,n.set(t,i));const s=e.join();let r=i.get(s);return r||(r={resolver:Cr(t,e),subPrefixes:e.filter(c=>!c.toLowerCase().includes("hover"))},i.set(s,r)),r}const Id=n=>pt(n)&&Object.getOwnPropertyNames(n).some(t=>Le(n[t]));function Rd(n,t){const{isScriptable:e,isIndexable:i}=Ja(n);for(const s of t){const r=e(s),a=i(s),c=(a||r)&&n[s];if(r&&(Le(c)||Id(c))||a&&Et(c))return!0}return!1}var Ld="4.5.1";const Bd=["top","bottom","left","right","chartArea"];function da(n,t){return n==="top"||n==="bottom"||Bd.indexOf(n)===-1&&t==="x"}function fa(n,t){return function(e,i){return e[n]===i[n]?e[t]-i[t]:e[n]-i[n]}}function pa(n){const t=n.chart,e=t.options.animation;t.notifyPlugins("afterRender"),_t(e&&e.onComplete,[n],t)}function Fd(n){const t=n.chart,e=t.options.animation;_t(e&&e.onProgress,[n],t)}function ml(n){return Ir()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const Qi={},ga=n=>{const t=ml(n);return Object.values(Qi).filter(e=>e.canvas===t).pop()};function zd(n,t,e){const i=Object.keys(n);for(const s of i){const r=+s;if(r>=t){const a=n[s];delete n[s],(e>0||r>t)&&(n[r+e]=a)}}}function jd(n,t,e,i){return!e||n.type==="mouseout"?null:i?t:n}class ve{static register(...t){ue.add(...t),ma()}static unregister(...t){ue.remove(...t),ma()}constructor(t,e){const i=this.config=new Td(e),s=ml(t),r=ga(s);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const a=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||id(s)),this.platform.updateConfig(i);const c=this.platform.acquireContext(s,a.aspectRatio),u=c&&c.canvas,d=u&&u.height,p=u&&u.width;if(this.id=Kc(),this.ctx=c,this.canvas=u,this.width=p,this.height=d,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new xd,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=cu(y=>this.update(y),a.resizeDelay||0),this._dataChanges=[],Qi[this.id]=this,!c||!u){console.error("Failed to create chart: can't acquire context from the given item");return}me.listen(this,"complete",pa),me.listen(this,"progress",Fd),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:i,height:s,_aspectRatio:r}=this;return bt(t)?e&&r?r:s?i/s:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return ue}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Ho(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return zo(this.canvas,this.ctx),this}stop(){return me.stop(this),this}resize(t,e){me.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const i=this.options,s=this.canvas,r=i.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(s,t,e,r),c=i.devicePixelRatio||this.platform.getDevicePixelRatio(),u=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,Ho(this,c,!0)&&(this.notifyPlugins("resize",{size:a}),_t(i.onResize,[this,a],this),this.attached&&this._doResize(u)&&this.render())}ensureScalesHaveIDs(){const e=this.options.scales||{};gt(e,(i,s)=>{i.id=s})}buildOrUpdateScales(){const t=this.options,e=t.scales,i=this.scales,s=Object.keys(i).reduce((a,c)=>(a[c]=!1,a),{});let r=[];e&&(r=r.concat(Object.keys(e).map(a=>{const c=e[a],u=pr(a,c),d=u==="r",p=u==="x";return{options:c,dposition:d?"chartArea":p?"bottom":"left",dtype:d?"radialLinear":p?"category":"linear"}}))),gt(r,a=>{const c=a.options,u=c.id,d=pr(u,c),p=dt(c.type,a.dtype);(c.position===void 0||da(c.position,d)!==da(a.dposition))&&(c.position=a.dposition),s[u]=!0;let y=null;if(u in i&&i[u].type===p)y=i[u];else{const v=ue.getScale(p);y=new v({id:u,type:p,ctx:this.ctx,chart:this}),i[y.id]=y}y.init(c,t)}),gt(s,(a,c)=>{a||delete i[c]}),gt(i,a=>{Qt.configure(this,a,a.options),Qt.addBox(this,a)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,i=t.length;if(t.sort((s,r)=>s.index-r.index),i>e){for(let s=e;s<i;++s)this._destroyDatasetMeta(s);t.splice(e,i-e)}this._sortedMetasets=t.slice(0).sort(fa("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((i,s)=>{e.filter(r=>r===i._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let i,s;for(this._removeUnreferencedMetasets(),i=0,s=e.length;i<s;i++){const r=e[i];let a=this.getDatasetMeta(i);const c=r.type||this.config.type;if(a.type&&a.type!==c&&(this._destroyDatasetMeta(i),a=this.getDatasetMeta(i)),a.type=c,a.indexAxis=r.indexAxis||fr(c,this.options),a.order=r.order||0,a.index=i,a.label=""+r.label,a.visible=this.isDatasetVisible(i),a.controller)a.controller.updateIndex(i),a.controller.linkScales();else{const u=ue.getController(c),{datasetElementType:d,dataElementType:p}=Pt.datasets[c];Object.assign(u,{dataElementType:ue.getElement(p),datasetElementType:d&&ue.getElement(d)}),a.controller=new u(this,i),t.push(a.controller)}}return this._updateMetasets(),t}_resetElements(){gt(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const i=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let d=0,p=this.data.datasets.length;d<p;d++){const{controller:y}=this.getDatasetMeta(d),v=!s&&r.indexOf(y)===-1;y.buildOrUpdateElements(v),a=Math.max(+y.getMaxOverflow(),a)}a=this._minPadding=i.layout.autoPadding?a:0,this._updateLayout(a),s||gt(r,d=>{d.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(fa("z","_idx"));const{_active:c,_lastEvent:u}=this;u?this._eventHandler(u,!0):c.length&&this._updateHoverStyles(c,c,!0),this.render()}_updateScales(){gt(this.scales,t=>{Qt.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),i=new Set(t.events);(!Do(e,i)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:i,start:s,count:r}of e){const a=i==="_removeElements"?-r:r;zd(t,s,a)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,i=r=>new Set(t.filter(a=>a[0]===r).map((a,c)=>c+","+a.splice(1).join(","))),s=i(0);for(let r=1;r<e;r++)if(!Do(s,i(r)))return;return Array.from(s).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Qt.update(this,this.width,this.height,t);const e=this.chartArea,i=e.width<=0||e.height<=0;this._layers=[],gt(this.boxes,s=>{i&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,r)=>{s._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let e=0,i=this.data.datasets.length;e<i;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,i=this.data.datasets.length;e<i;++e)this._updateDataset(e,Le(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const i=this.getDatasetMeta(t),s={meta:i,index:t,mode:e,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(i.controller._update(e),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(me.has(this)?this.attached&&!me.running(this)&&me.start(this):(this.draw(),pa({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:i,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,i=[];let s,r;for(s=0,r=e.length;s<r;++s){const a=e[s];(!t||a.visible)&&i.push(a)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,i={meta:t,index:t.index,cancelable:!0},s=mh(this,t);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(s&&Dr(e,s),t.controller.draw(),s&&Er(e),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(t){return ii(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,i,s){const r=Bh.modes[e];return typeof r=="function"?r(this,t,i,s):[]}getDatasetMeta(t){const e=this.data.datasets[t],i=this._metasets;let s=i.filter(r=>r&&r._dataset===e).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},i.push(s)),s}getContext(){return this.$context||(this.$context=sn(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const i=this.getDatasetMeta(t);return typeof i.hidden=="boolean"?!i.hidden:!e.hidden}setDatasetVisibility(t,e){const i=this.getDatasetMeta(t);i.hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,i){const s=i?"show":"hide",r=this.getDatasetMeta(t),a=r.controller._resolveAnimations(void 0,s);is(e)?(r.data[e].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),a.update(r,{visible:i}),this.update(c=>c.datasetIndex===t?s:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),me.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),zo(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete Qi[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,i=(r,a)=>{e.addEventListener(this,r,a),t[r]=a},s=(r,a,c)=>{r.offsetX=a,r.offsetY=c,this._eventHandler(r)};gt(this.options.events,r=>i(r,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,i=(u,d)=>{e.addEventListener(this,u,d),t[u]=d},s=(u,d)=>{t[u]&&(e.removeEventListener(this,u,d),delete t[u])},r=(u,d)=>{this.canvas&&this.resize(u,d)};let a;const c=()=>{s("attach",c),this.attached=!0,this.resize(),i("resize",r),i("detach",a)};a=()=>{this.attached=!1,s("resize",r),this._stop(),this._resize(0,0),i("attach",c)},e.isAttached(this.canvas)?c():a()}unbindEvents(){gt(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},gt(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,i){const s=i?"set":"remove";let r,a,c,u;for(e==="dataset"&&(r=this.getDatasetMeta(t[0].datasetIndex),r.controller["_"+s+"DatasetHoverStyle"]()),c=0,u=t.length;c<u;++c){a=t[c];const d=a&&this.getDatasetMeta(a.datasetIndex).controller;d&&d[s+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],i=t.map(({datasetIndex:r,index:a})=>{const c=this.getDatasetMeta(r);if(!c)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:c.data[a],index:a}});!ts(i,e)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,e))}notifyPlugins(t,e,i){return this._plugins.notify(this,t,e,i)}isPluginEnabled(t){return this._plugins._cache.filter(e=>e.plugin.id===t).length===1}_updateHoverStyles(t,e,i){const s=this.options.hover,r=(u,d)=>u.filter(p=>!d.some(y=>p.datasetIndex===y.datasetIndex&&p.index===y.index)),a=r(e,t),c=i?t:r(t,e);a.length&&this.updateHoverStyle(a,s.mode,!1),c.length&&s.mode&&this.updateHoverStyle(c,s.mode,!0)}_eventHandler(t,e){const i={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},s=a=>(a.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",i,s)===!1)return;const r=this._handleEvent(t,e,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,s),(r||i.changed)&&this.render(),this}_handleEvent(t,e,i){const{_active:s=[],options:r}=this,a=e,c=this._getActiveElements(t,s,i,a),u=Yc(t),d=jd(t,this._lastEvent,i,u);i&&(this._lastEvent=null,_t(r.onHover,[t,c,this],this),u&&_t(r.onClick,[t,c,this],this));const p=!ts(c,s);return(p||e)&&(this._active=c,this._updateHoverStyles(c,s,e)),this._lastEvent=d,p}_getActiveElements(t,e,i,s){if(t.type==="mouseout")return[];if(!i)return e;const r=this.options.hover;return this.getElementsAtEventForMode(t,r.mode,r,s)}}ot(ve,"defaults",Pt),ot(ve,"instances",Qi),ot(ve,"overrides",nn),ot(ve,"registry",ue),ot(ve,"version",Ld),ot(ve,"getChart",ga);function ma(){return gt(ve.instances,n=>n._plugins.invalidate())}function yl(n,t,e=t){n.lineCap=dt(e.borderCapStyle,t.borderCapStyle),n.setLineDash(dt(e.borderDash,t.borderDash)),n.lineDashOffset=dt(e.borderDashOffset,t.borderDashOffset),n.lineJoin=dt(e.borderJoinStyle,t.borderJoinStyle),n.lineWidth=dt(e.borderWidth,t.borderWidth),n.strokeStyle=dt(e.borderColor,t.borderColor)}function Nd(n,t,e){n.lineTo(e.x,e.y)}function Hd(n){return n.stepped?ku:n.tension||n.cubicInterpolationMode==="monotone"?Su:Nd}function bl(n,t,e={}){const i=n.length,{start:s=0,end:r=i-1}=e,{start:a,end:c}=t,u=Math.max(s,a),d=Math.min(r,c),p=s<a&&r<a||s>c&&r>c;return{count:i,start:u,loop:t.loop,ilen:d<u&&!p?i+d-u:d-u}}function Kd(n,t,e,i){const{points:s,options:r}=t,{count:a,start:c,loop:u,ilen:d}=bl(s,e,i),p=Hd(r);let{move:y=!0,reverse:v}=i||{},_,C,E;for(_=0;_<=d;++_)C=s[(c+(v?d-_:_))%a],!C.skip&&(y?(n.moveTo(C.x,C.y),y=!1):p(n,E,C,v,r.stepped),E=C);return u&&(C=s[(c+(v?d:0))%a],p(n,E,C,v,r.stepped)),!!u}function Wd(n,t,e,i){const s=t.points,{count:r,start:a,ilen:c}=bl(s,e,i),{move:u=!0,reverse:d}=i||{};let p=0,y=0,v,_,C,E,P,B;const H=j=>(a+(d?c-j:j))%r,Y=()=>{E!==P&&(n.lineTo(p,P),n.lineTo(p,E),n.lineTo(p,B))};for(u&&(_=s[H(0)],n.moveTo(_.x,_.y)),v=0;v<=c;++v){if(_=s[H(v)],_.skip)continue;const j=_.x,N=_.y,Q=j|0;Q===C?(N<E?E=N:N>P&&(P=N),p=(y*p+j)/++y):(Y(),n.lineTo(j,N),C=Q,y=0,E=P=N),B=N}Y()}function gr(n){const t=n.options,e=t.borderDash&&t.borderDash.length;return!n._decimated&&!n._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!e?Wd:Kd}function $d(n){return n.stepped?ih:n.tension||n.cubicInterpolationMode==="monotone"?sh:Qe}function Vd(n,t,e,i){let s=t._path;s||(s=t._path=new Path2D,t.path(s,e,i)&&s.closePath()),yl(n,t.options),n.stroke(s)}function qd(n,t,e,i){const{segments:s,options:r}=t,a=gr(t);for(const c of s)yl(n,r,c.style),n.beginPath(),a(n,t,c,{start:e,end:e+i-1})&&n.closePath(),n.stroke()}const Ud=typeof Path2D=="function";function Yd(n,t,e,i){Ud&&!t.options.segment?Vd(n,t,e,i):qd(n,t,e,i)}class Wn extends xe{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const s=i.spanGaps?this._loop:this._fullLoop;Xu(this._points,i,t,s,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=dh(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,i=t.length;return i&&e[t[i-1].end]}interpolate(t,e){const i=this.options,s=t[e],r=this.points,a=ch(this,{property:e,start:s,end:s});if(!a.length)return;const c=[],u=$d(i);let d,p;for(d=0,p=a.length;d<p;++d){const{start:y,end:v}=a[d],_=r[y],C=r[v];if(_===C){c.push(_);continue}const E=Math.abs((s-_[e])/(C[e]-_[e])),P=u(_,C,E,i.stepped);P[e]=t[e],c.push(P)}return c.length===1?c[0]:c}pathSegment(t,e,i){return gr(this)(t,this,e,i)}path(t,e,i){const s=this.segments,r=gr(this);let a=this._loop;e=e||0,i=i||this.points.length-e;for(const c of s)a&=r(t,this,c,{start:e,end:e+i-1});return!!a}draw(t,e,i,s){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(t.save(),Yd(t,this,i,s),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}ot(Wn,"id","line"),ot(Wn,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),ot(Wn,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),ot(Wn,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"});function ya(n,t,e,i){const s=n.options,{[e]:r}=n.getProps([e],i);return Math.abs(t-r)<s.radius+s.hitRadius}class Ji extends xe{constructor(e){super();ot(this,"parsed");ot(this,"skip");ot(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,i,s){const r=this.options,{x:a,y:c}=this.getProps(["x","y"],s);return Math.pow(e-a,2)+Math.pow(i-c,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(e,i){return ya(this,e,"x",i)}inYRange(e,i){return ya(this,e,"y",i)}getCenterPoint(e){const{x:i,y:s}=this.getProps(["x","y"],e);return{x:i,y:s}}size(e){e=e||this.options||{};let i=e.radius||0;i=Math.max(i,i&&e.hoverRadius||0);const s=i&&e.borderWidth||0;return(i+s)*2}draw(e,i){const s=this.options;this.skip||s.radius<.1||!ii(this,i,this.size(s)/2)||(e.strokeStyle=s.borderColor,e.lineWidth=s.borderWidth,e.fillStyle=s.backgroundColor,hr(e,s,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}ot(Ji,"id","point"),ot(Ji,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),ot(Ji,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const ba=(n,t)=>{let{boxHeight:e=t,boxWidth:i=t}=n;return n.usePointStyle&&(e=Math.min(e,t),i=n.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:e,itemHeight:Math.max(t,e)}},Xd=(n,t)=>n!==null&&t!==null&&n.datasetIndex===t.datasetIndex&&n.index===t.index;class va extends xe{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,i){this.maxWidth=t,this.maxHeight=e,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=_t(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(i=>t.filter(i,this.chart.data))),t.sort&&(e=e.sort((i,s)=>t.sort(i,s,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display){this.width=this.height=0;return}const i=t.labels,s=Bt(i.font),r=s.size,a=this._computeTitleHeight(),{boxWidth:c,itemHeight:u}=ba(i,r);let d,p;e.font=s.string,this.isHorizontal()?(d=this.maxWidth,p=this._fitRows(a,r,c,u)+10):(p=this.maxHeight,d=this._fitCols(a,s,c,u)+10),this.width=Math.min(d,t.maxWidth||this.maxWidth),this.height=Math.min(p,t.maxHeight||this.maxHeight)}_fitRows(t,e,i,s){const{ctx:r,maxWidth:a,options:{labels:{padding:c}}}=this,u=this.legendHitBoxes=[],d=this.lineWidths=[0],p=s+c;let y=t;r.textAlign="left",r.textBaseline="middle";let v=-1,_=-p;return this.legendItems.forEach((C,E)=>{const P=i+e/2+r.measureText(C.text).width;(E===0||d[d.length-1]+P+2*c>a)&&(y+=p,d[d.length-(E>0?0:1)]=0,_+=p,v++),u[E]={left:0,top:_,row:v,width:P,height:s},d[d.length-1]+=P+c}),y}_fitCols(t,e,i,s){const{ctx:r,maxHeight:a,options:{labels:{padding:c}}}=this,u=this.legendHitBoxes=[],d=this.columnSizes=[],p=a-t;let y=c,v=0,_=0,C=0,E=0;return this.legendItems.forEach((P,B)=>{const{itemWidth:H,itemHeight:Y}=Gd(i,e,r,P,s);B>0&&_+Y+2*c>p&&(y+=v+c,d.push({width:v,height:_}),C+=v+c,E++,v=_=0),u[B]={left:C,top:_,col:E,width:H,height:Y},v=Math.max(v,H),_+=Y+c}),y+=v,d.push({width:v,height:_}),y}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:i,labels:{padding:s},rtl:r}}=this,a=mn(r,this.left,this.width);if(this.isHorizontal()){let c=0,u=Lt(i,this.left+s,this.right-this.lineWidths[c]);for(const d of e)c!==d.row&&(c=d.row,u=Lt(i,this.left+s,this.right-this.lineWidths[c])),d.top+=this.top+t+s,d.left=a.leftForLtr(a.x(u),d.width),u+=d.width+s}else{let c=0,u=Lt(i,this.top+t+s,this.bottom-this.columnSizes[c].height);for(const d of e)d.col!==c&&(c=d.col,u=Lt(i,this.top+t+s,this.bottom-this.columnSizes[c].height)),d.top=u,d.left+=this.left+s,d.left=a.leftForLtr(a.x(d.left),d.width),u+=d.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;Dr(t,this),this._draw(),Er(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:i,ctx:s}=this,{align:r,labels:a}=t,c=Pt.color,u=mn(t.rtl,this.left,this.width),d=Bt(a.font),{padding:p}=a,y=d.size,v=y/2;let _;this.drawTitle(),s.textAlign=u.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=d.string;const{boxWidth:C,boxHeight:E,itemHeight:P}=ba(a,y),B=function(Q,$,U){if(isNaN(C)||C<=0||isNaN(E)||E<0)return;s.save();const nt=dt(U.lineWidth,1);if(s.fillStyle=dt(U.fillStyle,c),s.lineCap=dt(U.lineCap,"butt"),s.lineDashOffset=dt(U.lineDashOffset,0),s.lineJoin=dt(U.lineJoin,"miter"),s.lineWidth=nt,s.strokeStyle=dt(U.strokeStyle,c),s.setLineDash(dt(U.lineDash,[])),a.usePointStyle){const ct={radius:E*Math.SQRT2/2,pointStyle:U.pointStyle,rotation:U.rotation,borderWidth:nt},at=u.xPlus(Q,C/2),ut=$+v;Ga(s,ct,at,ut,a.pointStyleWidth&&C)}else{const ct=$+Math.max((y-E)/2,0),at=u.leftForLtr(Q,C),ut=Xn(U.borderRadius);s.beginPath(),Object.values(ut).some(wt=>wt!==0)?dr(s,{x:at,y:ct,w:C,h:E,radius:ut}):s.rect(at,ct,C,E),s.fill(),nt!==0&&s.stroke()}s.restore()},H=function(Q,$,U){si(s,U.text,Q,$+P/2,d,{strikethrough:U.hidden,textAlign:u.textAlign(U.textAlign)})},Y=this.isHorizontal(),j=this._computeTitleHeight();Y?_={x:Lt(r,this.left+p,this.right-i[0]),y:this.top+p+j,line:0}:_={x:this.left+p,y:Lt(r,this.top+j+p,this.bottom-e[0].height),line:0},il(this.ctx,t.textDirection);const N=P+p;this.legendItems.forEach((Q,$)=>{s.strokeStyle=Q.fontColor,s.fillStyle=Q.fontColor;const U=s.measureText(Q.text).width,nt=u.textAlign(Q.textAlign||(Q.textAlign=a.textAlign)),ct=C+v+U;let at=_.x,ut=_.y;u.setWidth(this.width),Y?$>0&&at+ct+p>this.right&&(ut=_.y+=N,_.line++,at=_.x=Lt(r,this.left+p,this.right-i[_.line])):$>0&&ut+N>this.bottom&&(at=_.x=at+e[_.line].width+p,_.line++,ut=_.y=Lt(r,this.top+j+p,this.bottom-e[_.line].height));const wt=u.x(at);if(B(wt,ut,Q),at=uu(nt,at+C+v,Y?at+ct:this.right,t.rtl),H(u.x(at),ut,Q),Y)_.x+=ct+p;else if(typeof Q.text!="string"){const $t=d.lineHeight;_.y+=vl(Q,$t)+p}else _.y+=N}),sl(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,i=Bt(e.font),s=Zt(e.padding);if(!e.display)return;const r=mn(t.rtl,this.left,this.width),a=this.ctx,c=e.position,u=i.size/2,d=s.top+u;let p,y=this.left,v=this.width;if(this.isHorizontal())v=Math.max(...this.lineWidths),p=this.top+d,y=Lt(t.align,y,this.right-v);else{const C=this.columnSizes.reduce((E,P)=>Math.max(E,P.height),0);p=d+Lt(t.align,this.top,this.bottom-C-t.labels.padding-this._computeTitleHeight())}const _=Lt(c,y,y+v);a.textAlign=r.textAlign(Pr(c)),a.textBaseline="middle",a.strokeStyle=e.color,a.fillStyle=e.color,a.font=i.string,si(a,e.text,_,p,i)}_computeTitleHeight(){const t=this.options.title,e=Bt(t.font),i=Zt(t.padding);return t.display?e.lineHeight+i.height:0}_getLegendItemAt(t,e){let i,s,r;if(Hn(t,this.left,this.right)&&Hn(e,this.top,this.bottom)){for(r=this.legendHitBoxes,i=0;i<r.length;++i)if(s=r[i],Hn(t,s.left,s.left+s.width)&&Hn(e,s.top,s.top+s.height))return this.legendItems[i]}return null}handleEvent(t){const e=this.options;if(!Zd(t.type,e))return;const i=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const s=this._hoveredItem,r=Xd(s,i);s&&!r&&_t(e.onLeave,[t,s,this],this),this._hoveredItem=i,i&&!r&&_t(e.onHover,[t,i,this],this)}else i&&_t(e.onClick,[t,i,this],this)}}function Gd(n,t,e,i,s){const r=Qd(i,n,t,e),a=Jd(s,i,t.lineHeight);return{itemWidth:r,itemHeight:a}}function Qd(n,t,e,i){let s=n.text;return s&&typeof s!="string"&&(s=s.reduce((r,a)=>r.length>a.length?r:a)),t+e.size/2+i.measureText(s).width}function Jd(n,t,e){let i=n;return typeof t.text!="string"&&(i=vl(t,e)),i}function vl(n,t){const e=n.text?n.text.length:0;return t*e}function Zd(n,t){return!!((n==="mousemove"||n==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(n==="click"||n==="mouseup"))}var tf={id:"legend",_element:va,start(n,t,e){const i=n.legend=new va({ctx:n.ctx,options:e,chart:n});Qt.configure(n,i,e),Qt.addBox(n,i)},stop(n){Qt.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,t,e){const i=n.legend;Qt.configure(n,i,e),i.options=e},afterUpdate(n){const t=n.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(n,t){t.replay||n.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,t,e){const i=t.datasetIndex,s=e.chart;s.isDatasetVisible(i)?(s.hide(i),t.hidden=!0):(s.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const t=n.data.datasets,{labels:{usePointStyle:e,pointStyle:i,textAlign:s,color:r,useBorderRadius:a,borderRadius:c}}=n.legend.options;return n._getSortedDatasetMetas().map(u=>{const d=u.controller.getStyle(e?0:void 0),p=Zt(d.borderWidth);return{text:t[u.index].label,fillStyle:d.backgroundColor,fontColor:r,hidden:!u.visible,lineCap:d.borderCapStyle,lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:(p.width+p.height)/4,strokeStyle:d.borderColor,pointStyle:i||d.pointStyle,rotation:d.rotation,textAlign:s||d.textAlign,borderRadius:a&&(c||d.borderRadius),datasetIndex:u.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class _l extends xe{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=e;const s=Et(i.text)?i.text.length:1;this._padding=Zt(i.padding);const r=s*Bt(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:e,left:i,bottom:s,right:r,options:a}=this,c=a.align;let u=0,d,p,y;return this.isHorizontal()?(p=Lt(c,i,r),y=e+t,d=r-i):(a.position==="left"?(p=i+t,y=Lt(c,s,e),u=Ct*-.5):(p=r-t,y=Lt(c,e,s),u=Ct*.5),d=s-e),{titleX:p,titleY:y,maxWidth:d,rotation:u}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const i=Bt(e.font),r=i.lineHeight/2+this._padding.top,{titleX:a,titleY:c,maxWidth:u,rotation:d}=this._drawArgs(r);si(t,e.text,0,0,i,{color:e.color,maxWidth:u,rotation:d,textAlign:Pr(e.align),textBaseline:"middle",translation:[a,c]})}}function ef(n,t){const e=new _l({ctx:n.ctx,options:t,chart:n});Qt.configure(n,e,t),Qt.addBox(n,e),n.titleBlock=e}var nf={id:"title",_element:_l,start(n,t,e){ef(n,e)},stop(n){const t=n.titleBlock;Qt.removeBox(n,t),delete n.titleBlock},beforeUpdate(n,t,e){const i=n.titleBlock;Qt.configure(n,i,e),i.options=e},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const $n={average(n){if(!n.length)return!1;let t,e,i=new Set,s=0,r=0;for(t=0,e=n.length;t<e;++t){const c=n[t].element;if(c&&c.hasValue()){const u=c.tooltipPosition();i.add(u.x),s+=u.y,++r}}return r===0||i.size===0?!1:{x:[...i].reduce((c,u)=>c+u)/i.size,y:s/r}},nearest(n,t){if(!n.length)return!1;let e=t.x,i=t.y,s=Number.POSITIVE_INFINITY,r,a,c;for(r=0,a=n.length;r<a;++r){const u=n[r].element;if(u&&u.hasValue()){const d=u.getCenterPoint(),p=cr(t,d);p<s&&(s=p,c=u)}}if(c){const u=c.tooltipPosition();e=u.x,i=u.y}return{x:e,y:i}}};function ce(n,t){return t&&(Et(t)?Array.prototype.push.apply(n,t):n.push(t)),n}function ye(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function sf(n,t){const{element:e,datasetIndex:i,index:s}=t,r=n.getDatasetMeta(i).controller,{label:a,value:c}=r.getLabelAndValue(s);return{chart:n,label:a,parsed:r.getParsed(s),raw:n.data.datasets[i].data[s],formattedValue:c,dataset:r.getDataset(),dataIndex:s,datasetIndex:i,element:e}}function _a(n,t){const e=n.chart.ctx,{body:i,footer:s,title:r}=n,{boxWidth:a,boxHeight:c}=t,u=Bt(t.bodyFont),d=Bt(t.titleFont),p=Bt(t.footerFont),y=r.length,v=s.length,_=i.length,C=Zt(t.padding);let E=C.height,P=0,B=i.reduce((j,N)=>j+N.before.length+N.lines.length+N.after.length,0);if(B+=n.beforeBody.length+n.afterBody.length,y&&(E+=y*d.lineHeight+(y-1)*t.titleSpacing+t.titleMarginBottom),B){const j=t.displayColors?Math.max(c,u.lineHeight):u.lineHeight;E+=_*j+(B-_)*u.lineHeight+(B-1)*t.bodySpacing}v&&(E+=t.footerMarginTop+v*p.lineHeight+(v-1)*t.footerSpacing);let H=0;const Y=function(j){P=Math.max(P,e.measureText(j).width+H)};return e.save(),e.font=d.string,gt(n.title,Y),e.font=u.string,gt(n.beforeBody.concat(n.afterBody),Y),H=t.displayColors?a+2+t.boxPadding:0,gt(i,j=>{gt(j.before,Y),gt(j.lines,Y),gt(j.after,Y)}),H=0,e.font=p.string,gt(n.footer,Y),e.restore(),P+=C.width,{width:P,height:E}}function rf(n,t){const{y:e,height:i}=t;return e<i/2?"top":e>n.height-i/2?"bottom":"center"}function of(n,t,e,i){const{x:s,width:r}=i,a=e.caretSize+e.caretPadding;if(n==="left"&&s+r+a>t.width||n==="right"&&s-r-a<0)return!0}function af(n,t,e,i){const{x:s,width:r}=e,{width:a,chartArea:{left:c,right:u}}=n;let d="center";return i==="center"?d=s<=(c+u)/2?"left":"right":s<=r/2?d="left":s>=a-r/2&&(d="right"),of(d,n,t,e)&&(d="center"),d}function xa(n,t,e){const i=e.yAlign||t.yAlign||rf(n,e);return{xAlign:e.xAlign||t.xAlign||af(n,t,e,i),yAlign:i}}function lf(n,t){let{x:e,width:i}=n;return t==="right"?e-=i:t==="center"&&(e-=i/2),e}function cf(n,t,e){let{y:i,height:s}=n;return t==="top"?i+=e:t==="bottom"?i-=s+e:i-=s/2,i}function wa(n,t,e,i){const{caretSize:s,caretPadding:r,cornerRadius:a}=n,{xAlign:c,yAlign:u}=e,d=s+r,{topLeft:p,topRight:y,bottomLeft:v,bottomRight:_}=Xn(a);let C=lf(t,c);const E=cf(t,u,d);return u==="center"?c==="left"?C+=d:c==="right"&&(C-=d):c==="left"?C-=Math.max(p,v)+s:c==="right"&&(C+=Math.max(y,_)+s),{x:Gt(C,0,i.width-t.width),y:Gt(E,0,i.height-t.height)}}function Ui(n,t,e){const i=Zt(e.padding);return t==="center"?n.x+n.width/2:t==="right"?n.x+n.width-i.right:n.x+i.left}function ka(n){return ce([],ye(n))}function uf(n,t,e){return sn(n,{tooltip:t,tooltipItems:e,type:"tooltip"})}function Sa(n,t){const e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?n.override(e):n}const xl={beforeTitle:ge,title(n){if(n.length>0){const t=n[0],e=t.chart.data.labels,i=e?e.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return e[t.dataIndex]}return""},afterTitle:ge,beforeBody:ge,beforeLabel:ge,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let t=n.dataset.label||"";t&&(t+=": ");const e=n.formattedValue;return bt(e)||(t+=e),t},labelColor(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:ge,afterBody:ge,beforeFooter:ge,footer:ge,afterFooter:ge};function Nt(n,t,e,i){const s=n[t].call(e,i);return typeof s>"u"?xl[t].call(e,i):s}class mr extends xe{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,i=this.options.setContext(this.getContext()),s=i.enabled&&e.options.animation&&i.animations,r=new ol(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=uf(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,e){const{callbacks:i}=e,s=Nt(i,"beforeTitle",this,t),r=Nt(i,"title",this,t),a=Nt(i,"afterTitle",this,t);let c=[];return c=ce(c,ye(s)),c=ce(c,ye(r)),c=ce(c,ye(a)),c}getBeforeBody(t,e){return ka(Nt(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:i}=e,s=[];return gt(t,r=>{const a={before:[],lines:[],after:[]},c=Sa(i,r);ce(a.before,ye(Nt(c,"beforeLabel",this,r))),ce(a.lines,Nt(c,"label",this,r)),ce(a.after,ye(Nt(c,"afterLabel",this,r))),s.push(a)}),s}getAfterBody(t,e){return ka(Nt(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:i}=e,s=Nt(i,"beforeFooter",this,t),r=Nt(i,"footer",this,t),a=Nt(i,"afterFooter",this,t);let c=[];return c=ce(c,ye(s)),c=ce(c,ye(r)),c=ce(c,ye(a)),c}_createItems(t){const e=this._active,i=this.chart.data,s=[],r=[],a=[];let c=[],u,d;for(u=0,d=e.length;u<d;++u)c.push(sf(this.chart,e[u]));return t.filter&&(c=c.filter((p,y,v)=>t.filter(p,y,v,i))),t.itemSort&&(c=c.sort((p,y)=>t.itemSort(p,y,i))),gt(c,p=>{const y=Sa(t.callbacks,p);s.push(Nt(y,"labelColor",this,p)),r.push(Nt(y,"labelPointStyle",this,p)),a.push(Nt(y,"labelTextColor",this,p))}),this.labelColors=s,this.labelPointStyles=r,this.labelTextColors=a,this.dataPoints=c,c}update(t,e){const i=this.options.setContext(this.getContext()),s=this._active;let r,a=[];if(!s.length)this.opacity!==0&&(r={opacity:0});else{const c=$n[i.position].call(this,s,this._eventPosition);a=this._createItems(i),this.title=this.getTitle(a,i),this.beforeBody=this.getBeforeBody(a,i),this.body=this.getBody(a,i),this.afterBody=this.getAfterBody(a,i),this.footer=this.getFooter(a,i);const u=this._size=_a(this,i),d=Object.assign({},c,u),p=xa(this.chart,i,d),y=wa(i,d,p,this.chart);this.xAlign=p.xAlign,this.yAlign=p.yAlign,r={opacity:1,x:y.x,y:y.y,width:u.width,height:u.height,caretX:c.x,caretY:c.y}}this._tooltipItems=a,this.$context=void 0,r&&this._resolveAnimations().update(this,r),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,i,s){const r=this.getCaretPosition(t,i,s);e.lineTo(r.x1,r.y1),e.lineTo(r.x2,r.y2),e.lineTo(r.x3,r.y3)}getCaretPosition(t,e,i){const{xAlign:s,yAlign:r}=this,{caretSize:a,cornerRadius:c}=i,{topLeft:u,topRight:d,bottomLeft:p,bottomRight:y}=Xn(c),{x:v,y:_}=t,{width:C,height:E}=e;let P,B,H,Y,j,N;return r==="center"?(j=_+E/2,s==="left"?(P=v,B=P-a,Y=j+a,N=j-a):(P=v+C,B=P+a,Y=j-a,N=j+a),H=P):(s==="left"?B=v+Math.max(u,p)+a:s==="right"?B=v+C-Math.max(d,y)-a:B=this.caretX,r==="top"?(Y=_,j=Y-a,P=B-a,H=B+a):(Y=_+E,j=Y+a,P=B+a,H=B-a),N=Y),{x1:P,x2:B,x3:H,y1:Y,y2:j,y3:N}}drawTitle(t,e,i){const s=this.title,r=s.length;let a,c,u;if(r){const d=mn(i.rtl,this.x,this.width);for(t.x=Ui(this,i.titleAlign,i),e.textAlign=d.textAlign(i.titleAlign),e.textBaseline="middle",a=Bt(i.titleFont),c=i.titleSpacing,e.fillStyle=i.titleColor,e.font=a.string,u=0;u<r;++u)e.fillText(s[u],d.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+c,u+1===r&&(t.y+=i.titleMarginBottom-c)}}_drawColorBox(t,e,i,s,r){const a=this.labelColors[i],c=this.labelPointStyles[i],{boxHeight:u,boxWidth:d}=r,p=Bt(r.bodyFont),y=Ui(this,"left",r),v=s.x(y),_=u<p.lineHeight?(p.lineHeight-u)/2:0,C=e.y+_;if(r.usePointStyle){const E={radius:Math.min(d,u)/2,pointStyle:c.pointStyle,rotation:c.rotation,borderWidth:1},P=s.leftForLtr(v,d)+d/2,B=C+u/2;t.strokeStyle=r.multiKeyBackground,t.fillStyle=r.multiKeyBackground,hr(t,E,P,B),t.strokeStyle=a.borderColor,t.fillStyle=a.backgroundColor,hr(t,E,P,B)}else{t.lineWidth=pt(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,t.strokeStyle=a.borderColor,t.setLineDash(a.borderDash||[]),t.lineDashOffset=a.borderDashOffset||0;const E=s.leftForLtr(v,d),P=s.leftForLtr(s.xPlus(v,1),d-2),B=Xn(a.borderRadius);Object.values(B).some(H=>H!==0)?(t.beginPath(),t.fillStyle=r.multiKeyBackground,dr(t,{x:E,y:C,w:d,h:u,radius:B}),t.fill(),t.stroke(),t.fillStyle=a.backgroundColor,t.beginPath(),dr(t,{x:P,y:C+1,w:d-2,h:u-2,radius:B}),t.fill()):(t.fillStyle=r.multiKeyBackground,t.fillRect(E,C,d,u),t.strokeRect(E,C,d,u),t.fillStyle=a.backgroundColor,t.fillRect(P,C+1,d-2,u-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,e,i){const{body:s}=this,{bodySpacing:r,bodyAlign:a,displayColors:c,boxHeight:u,boxWidth:d,boxPadding:p}=i,y=Bt(i.bodyFont);let v=y.lineHeight,_=0;const C=mn(i.rtl,this.x,this.width),E=function(U){e.fillText(U,C.x(t.x+_),t.y+v/2),t.y+=v+r},P=C.textAlign(a);let B,H,Y,j,N,Q,$;for(e.textAlign=a,e.textBaseline="middle",e.font=y.string,t.x=Ui(this,P,i),e.fillStyle=i.bodyColor,gt(this.beforeBody,E),_=c&&P!=="right"?a==="center"?d/2+p:d+2+p:0,j=0,Q=s.length;j<Q;++j){for(B=s[j],H=this.labelTextColors[j],e.fillStyle=H,gt(B.before,E),Y=B.lines,c&&Y.length&&(this._drawColorBox(e,t,j,C,i),v=Math.max(y.lineHeight,u)),N=0,$=Y.length;N<$;++N)E(Y[N]),v=y.lineHeight;gt(B.after,E)}_=0,v=y.lineHeight,gt(this.afterBody,E),t.y-=r}drawFooter(t,e,i){const s=this.footer,r=s.length;let a,c;if(r){const u=mn(i.rtl,this.x,this.width);for(t.x=Ui(this,i.footerAlign,i),t.y+=i.footerMarginTop,e.textAlign=u.textAlign(i.footerAlign),e.textBaseline="middle",a=Bt(i.footerFont),e.fillStyle=i.footerColor,e.font=a.string,c=0;c<r;++c)e.fillText(s[c],u.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+i.footerSpacing}}drawBackground(t,e,i,s){const{xAlign:r,yAlign:a}=this,{x:c,y:u}=t,{width:d,height:p}=i,{topLeft:y,topRight:v,bottomLeft:_,bottomRight:C}=Xn(s.cornerRadius);e.fillStyle=s.backgroundColor,e.strokeStyle=s.borderColor,e.lineWidth=s.borderWidth,e.beginPath(),e.moveTo(c+y,u),a==="top"&&this.drawCaret(t,e,i,s),e.lineTo(c+d-v,u),e.quadraticCurveTo(c+d,u,c+d,u+v),a==="center"&&r==="right"&&this.drawCaret(t,e,i,s),e.lineTo(c+d,u+p-C),e.quadraticCurveTo(c+d,u+p,c+d-C,u+p),a==="bottom"&&this.drawCaret(t,e,i,s),e.lineTo(c+_,u+p),e.quadraticCurveTo(c,u+p,c,u+p-_),a==="center"&&r==="left"&&this.drawCaret(t,e,i,s),e.lineTo(c,u+y),e.quadraticCurveTo(c,u,c+y,u),e.closePath(),e.fill(),s.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,i=this.$animations,s=i&&i.x,r=i&&i.y;if(s||r){const a=$n[t.position].call(this,this._active,this._eventPosition);if(!a)return;const c=this._size=_a(this,t),u=Object.assign({},a,this._size),d=xa(e,t,u),p=wa(t,u,d,e);(s._to!==p.x||r._to!==p.y)&&(this.xAlign=d.xAlign,this.yAlign=d.yAlign,this.width=c.width,this.height=c.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,p))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(e);const s={width:this.width,height:this.height},r={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const a=Zt(e.padding),c=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&c&&(t.save(),t.globalAlpha=i,this.drawBackground(r,t,s,e),il(t,e.textDirection),r.y+=a.top,this.drawTitle(r,t,e),this.drawBody(r,t,e),this.drawFooter(r,t,e),sl(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const i=this._active,s=t.map(({datasetIndex:c,index:u})=>{const d=this.chart.getDatasetMeta(c);if(!d)throw new Error("Cannot find a dataset at index "+c);return{datasetIndex:c,element:d.data[u],index:u}}),r=!ts(i,s),a=this._positionChanged(s,e);(r||a)&&(this._active=s,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,i=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,r=this._active||[],a=this._getActiveElements(t,r,e,i),c=this._positionChanged(a,t),u=e||!ts(a,r)||c;return u&&(this._active=a,(s.enabled||s.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),u}_getActiveElements(t,e,i,s){const r=this.options;if(t.type==="mouseout")return[];if(!s)return e.filter(c=>this.chart.data.datasets[c.datasetIndex]&&this.chart.getDatasetMeta(c.datasetIndex).controller.getParsed(c.index)!==void 0);const a=this.chart.getElementsAtEventForMode(t,r.mode,r,i);return r.reverse&&a.reverse(),a}_positionChanged(t,e){const{caretX:i,caretY:s,options:r}=this,a=$n[r.position].call(this,t,e);return a!==!1&&(i!==a.x||s!==a.y)}}ot(mr,"positioners",$n);var hf={id:"tooltip",_element:mr,positioners:$n,afterInit(n,t,e){e&&(n.tooltip=new mr({chart:n,options:e}))},beforeUpdate(n,t,e){n.tooltip&&n.tooltip.initialize(e)},reset(n,t,e){n.tooltip&&n.tooltip.initialize(e)},afterDraw(n){const t=n.tooltip;if(t&&t._willRender()){const e={tooltip:t};if(n.notifyPlugins("beforeTooltipDraw",{...e,cancelable:!0})===!1)return;t.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",e)}},afterEvent(n,t){if(n.tooltip){const e=t.replay;n.tooltip.handleEvent(t.event,e,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,t)=>t.bodyFont.size,boxWidth:(n,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:xl},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const df=(n,t,e,i)=>(typeof t=="string"?(e=n.push(t)-1,i.unshift({index:e,label:t})):isNaN(t)&&(e=null),e);function ff(n,t,e,i){const s=n.indexOf(t);if(s===-1)return df(n,t,e,i);const r=n.lastIndexOf(t);return s!==r?e:s}const pf=(n,t)=>n===null?null:Gt(Math.round(n),0,t);function Ma(n){const t=this.getLabels();return n>=0&&n<t.length?t[n]:n}class yr extends _n{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const i=this.getLabels();for(const{index:s,label:r}of e)i[s]===r&&i.splice(s,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(bt(t))return null;const i=this.getLabels();return e=isFinite(e)&&i[e]===t?e:ff(i,t,dt(e,t),this._addedLabels),pf(e,i.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:i,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(i=0),e||(s=this.getLabels().length-1)),this.min=i,this.max=s}buildTicks(){const t=this.min,e=this.max,i=this.options.offset,s=[];let r=this.getLabels();r=t===0&&e===r.length-1?r:r.slice(t,e+1),this._valueRange=Math.max(r.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let a=t;a<=e;a++)s.push({value:a});return s}getLabelForValue(t){return Ma.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}ot(yr,"id","category"),ot(yr,"defaults",{ticks:{callback:Ma}});function gf(n,t){const e=[],{bounds:s,step:r,min:a,max:c,precision:u,count:d,maxTicks:p,maxDigits:y,includeBounds:v}=n,_=r||1,C=p-1,{min:E,max:P}=t,B=!bt(a),H=!bt(c),Y=!bt(d),j=(P-E)/(y+1);let N=Co((P-E)/C/_)*_,Q,$,U,nt;if(N<1e-14&&!B&&!H)return[{value:E},{value:P}];nt=Math.ceil(P/N)-Math.floor(E/N),nt>C&&(N=Co(nt*N/C/_)*_),bt(u)||(Q=Math.pow(10,u),N=Math.ceil(N*Q)/Q),s==="ticks"?($=Math.floor(E/N)*N,U=Math.ceil(P/N)*N):($=E,U=P),B&&H&&r&&Zc((c-a)/r,N/1e3)?(nt=Math.round(Math.min((c-a)/N,p)),N=(c-a)/nt,$=a,U=c):Y?($=B?a:$,U=H?c:U,nt=d-1,N=(U-$)/nt):(nt=(U-$)/N,qn(nt,Math.round(nt),N/1e3)?nt=Math.round(nt):nt=Math.ceil(nt));const ct=Math.max(Ao(N),Ao($));Q=Math.pow(10,bt(u)?ct:u),$=Math.round($*Q)/Q,U=Math.round(U*Q)/Q;let at=0;for(B&&(v&&$!==a?(e.push({value:a}),$<a&&at++,qn(Math.round(($+at*N)*Q)/Q,a,Pa(a,j,n))&&at++):$<a&&at++);at<nt;++at){const ut=Math.round(($+at*N)*Q)/Q;if(H&&ut>c)break;e.push({value:ut})}return H&&v&&U!==c?e.length&&qn(e[e.length-1].value,c,Pa(c,j,n))?e[e.length-1].value=c:e.push({value:c}):(!H||U===c)&&e.push({value:U}),e}function Pa(n,t,{horizontal:e,minRotation:i}){const s=Je(i),r=(e?Math.sin(s):Math.cos(s))||.001,a=.75*t*(""+n).length;return Math.min(t/r,a)}class mf extends _n{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return bt(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:i}=this.getUserBounds();let{min:s,max:r}=this;const a=u=>s=e?s:u,c=u=>r=i?r:u;if(t){const u=yn(s),d=yn(r);u<0&&d<0?c(0):u>0&&d>0&&a(0)}if(s===r){let u=r===0?1:Math.abs(r*.05);c(r+u),t||a(s-u)}this.min=s,this.max=r}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:e,stepSize:i}=t,s;return i?(s=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),e=e||11),e&&(s=Math.min(e,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let i=this.getTickLimit();i=Math.max(2,i);const s={maxTicks:i,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:e.includeBounds!==!1},r=this._range||this,a=gf(s,r);return t.bounds==="ticks"&&tu(a,this,"value"),t.reverse?(a.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),a}configure(){const t=this.ticks;let e=this.min,i=this.max;if(super.configure(),this.options.offset&&t.length){const s=(i-e)/Math.max(t.length-1,1)/2;e-=s,i+=s}this._startValue=e,this._endValue=i,this._valueRange=i-e}getLabelForValue(t){return Ya(t,this.chart.options.locale,this.options.ticks.format)}}class br extends mf{determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=Jt(t)?t:0,this.max=Jt(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,i=Je(this.options.ticks.minRotation),s=(t?Math.sin(i):Math.cos(i))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,r.lineHeight/s))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}ot(br,"id","linear"),ot(br,"defaults",{ticks:{callback:Xa.formatters.numeric}});const hs={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Ht=Object.keys(hs);function Oa(n,t){return n-t}function Da(n,t){if(bt(t))return null;const e=n._adapter,{parser:i,round:s,isoWeekday:r}=n._parseOpts;let a=t;return typeof i=="function"&&(a=i(a)),Jt(a)||(a=typeof i=="string"?e.parse(a,i):e.parse(a)),a===null?null:(s&&(a=s==="week"&&(ni(r)||r===!0)?e.startOf(a,"isoWeek",r):e.startOf(a,s)),+a)}function Ea(n,t,e,i){const s=Ht.length;for(let r=Ht.indexOf(n);r<s-1;++r){const a=hs[Ht[r]],c=a.steps?a.steps:Number.MAX_SAFE_INTEGER;if(a.common&&Math.ceil((e-t)/(c*a.size))<=i)return Ht[r]}return Ht[s-1]}function yf(n,t,e,i,s){for(let r=Ht.length-1;r>=Ht.indexOf(e);r--){const a=Ht[r];if(hs[a].common&&n._adapter.diff(s,i,a)>=t-1)return a}return Ht[e?Ht.indexOf(e):0]}function bf(n){for(let t=Ht.indexOf(n)+1,e=Ht.length;t<e;++t)if(hs[Ht[t]].common)return Ht[t]}function Ca(n,t,e){if(!e)n[t]=!0;else if(e.length){const{lo:i,hi:s}=Mr(e,t),r=e[i]>=t?e[i]:e[s];n[r]=!0}}function vf(n,t,e,i){const s=n._adapter,r=+s.startOf(t[0].value,i),a=t[t.length-1].value;let c,u;for(c=r;c<=a;c=+s.add(c,1,i))u=e[c],u>=0&&(t[u].major=!0);return t}function Aa(n,t,e){const i=[],s={},r=t.length;let a,c;for(a=0;a<r;++a)c=t[a],s[c]=a,i.push({value:c,major:!1});return r===0||!e?i:vf(n,i,s,e)}class as extends _n{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const i=t.time||(t.time={}),s=this._adapter=new Ah._date(t.adapters.date);s.init(e),Vn(i.displayFormats,s.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return t===void 0?null:Da(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,i=t.time.unit||"day";let{min:s,max:r,minDefined:a,maxDefined:c}=this.getUserBounds();function u(d){!a&&!isNaN(d.min)&&(s=Math.min(s,d.min)),!c&&!isNaN(d.max)&&(r=Math.max(r,d.max))}(!a||!c)&&(u(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&u(this.getMinMax(!1))),s=Jt(s)&&!isNaN(s)?s:+e.startOf(Date.now(),i),r=Jt(r)&&!isNaN(r)?r:+e.endOf(Date.now(),i)+1,this.min=Math.min(s,r-1),this.max=Math.max(s+1,r)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],i=t[t.length-1]),{min:e,max:i}}buildTicks(){const t=this.options,e=t.time,i=t.ticks,s=i.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const r=this.min,a=this.max,c=ou(s,r,a);return this._unit=e.unit||(i.autoSkip?Ea(e.minUnit,this.min,this.max,this._getLabelCapacity(r)):yf(this,c.length,e.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:bf(this._unit),this.initOffsets(s),t.reverse&&c.reverse(),Aa(this,c,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let e=0,i=0,s,r;this.options.offset&&t.length&&(s=this.getDecimalForValue(t[0]),t.length===1?e=1-s:e=(this.getDecimalForValue(t[1])-s)/2,r=this.getDecimalForValue(t[t.length-1]),t.length===1?i=r:i=(r-this.getDecimalForValue(t[t.length-2]))/2);const a=t.length<3?.5:.25;e=Gt(e,0,a),i=Gt(i,0,a),this._offsets={start:e,end:i,factor:1/(e+1+i)}}_generate(){const t=this._adapter,e=this.min,i=this.max,s=this.options,r=s.time,a=r.unit||Ea(r.minUnit,e,i,this._getLabelCapacity(e)),c=dt(s.ticks.stepSize,1),u=a==="week"?r.isoWeekday:!1,d=ni(u)||u===!0,p={};let y=e,v,_;if(d&&(y=+t.startOf(y,"isoWeek",u)),y=+t.startOf(y,d?"day":a),t.diff(i,e,a)>1e5*c)throw new Error(e+" and "+i+" are too far apart with stepSize of "+c+" "+a);const C=s.ticks.source==="data"&&this.getDataTimestamps();for(v=y,_=0;v<i;v=+t.add(v,c,a),_++)Ca(p,v,C);return(v===i||s.bounds==="ticks"||_===1)&&Ca(p,v,C),Object.keys(p).sort(Oa).map(E=>+E)}getLabelForValue(t){const e=this._adapter,i=this.options.time;return i.tooltipFormat?e.format(t,i.tooltipFormat):e.format(t,i.displayFormats.datetime)}format(t,e){const s=this.options.time.displayFormats,r=this._unit,a=e||s[r];return this._adapter.format(t,a)}_tickFormatFunction(t,e,i,s){const r=this.options,a=r.ticks.callback;if(a)return _t(a,[t,e,i],this);const c=r.time.displayFormats,u=this._unit,d=this._majorUnit,p=u&&c[u],y=d&&c[d],v=i[e],_=d&&y&&v&&v.major;return this._adapter.format(t,s||(_?y:p))}generateTickLabels(t){let e,i,s;for(e=0,i=t.length;e<i;++e)s=t[e],s.label=this._tickFormatFunction(s.value,e,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+i)*e.factor)}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,i=this.ctx.measureText(t).width,s=Je(this.isHorizontal()?e.maxRotation:e.minRotation),r=Math.cos(s),a=Math.sin(s),c=this._resolveTickFontOptions(0).size;return{w:i*r+c*a,h:i*a+c*r}}_getLabelCapacity(t){const e=this.options.time,i=e.displayFormats,s=i[e.unit]||i.millisecond,r=this._tickFormatFunction(t,0,Aa(this,[t],this._majorUnit),s),a=this._getLabelSize(r),c=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return c>0?c:1}getDataTimestamps(){let t=this._cache.data||[],e,i;if(t.length)return t;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(e=0,i=s.length;e<i;++e)t=t.concat(s[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let e,i;if(t.length)return t;const s=this.getLabels();for(e=0,i=s.length;e<i;++e)t.push(Da(this,s[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return lu(t.sort(Oa))}}ot(as,"id","time"),ot(as,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Yi(n,t,e){let i=0,s=n.length-1,r,a,c,u;e?(t>=n[i].pos&&t<=n[s].pos&&({lo:i,hi:s}=Ze(n,"pos",t)),{pos:r,time:c}=n[i],{pos:a,time:u}=n[s]):(t>=n[i].time&&t<=n[s].time&&({lo:i,hi:s}=Ze(n,"time",t)),{time:r,pos:c}=n[i],{time:a,pos:u}=n[s]);const d=a-r;return d?c+(u-c)*(t-r)/d:c}class Ta extends as{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=Yi(e,this.min),this._tableRange=Yi(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:i}=this,s=[],r=[];let a,c,u,d,p;for(a=0,c=t.length;a<c;++a)d=t[a],d>=e&&d<=i&&s.push(d);if(s.length<2)return[{time:e,pos:0},{time:i,pos:1}];for(a=0,c=s.length;a<c;++a)p=s[a+1],u=s[a-1],d=s[a],Math.round((p+u)/2)!==d&&r.push({time:d,pos:a/(c-1)});return r}_generate(){const t=this.min,e=this.max;let i=super.getDataTimestamps();return(!i.includes(t)||!i.length)&&i.splice(0,0,t),(!i.includes(e)||i.length===1)&&i.push(e),i.sort((s,r)=>s-r)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),i=this.getLabelTimestamps();return e.length&&i.length?t=this.normalize(e.concat(i)):t=e.length?e:i,t=this._cache.all=t,t}getDecimalForValue(t){return(Yi(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return Yi(this._table,i*this._tableRange+this._minPos,!0)}}ot(Ta,"id","timeseries"),ot(Ta,"defaults",as.defaults);ve.register(yr,br,Ji,Wn,Xi,nf,hf,tf);let ee=null,ls=[];function wl(){_f();const n=document.getElementById("chart-canvas").getContext("2d");ee=new ve(n,{type:"line",data:{labels:[],datasets:[{label:"Systolic",data:[],borderColor:"#dc3545",backgroundColor:"rgba(220, 53, 69, 0.1)",tension:.1,hidden:!1},{label:"Diastolic",data:[],borderColor:"#007bff",backgroundColor:"rgba(0, 123, 255, 0.1)",tension:.1,hidden:!1},{label:"Pulse",data:[],borderColor:"#28a745",backgroundColor:"rgba(40, 167, 69, 0.1)",tension:.1,hidden:!1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!1},legend:{display:!1},tooltip:{callbacks:{title:function(t){const e=t[0].dataIndex;return ls[e]?new Date(ls[e].date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):t[0].label}}}},scales:{y:{type:"linear",display:!0,position:"right",title:{display:!1}},x:{display:!0,title:{display:!1}}}}}),xf()}function _f(){const n=document.getElementById("chart-container");return n?(n.innerHTML=`
      <div class="chart-filters">
        <span class="filter-label active" data-dataset="0">Systolic</span>
        <span class="filter-label active" data-dataset="1">Diastolic</span>
        <span class="filter-label active" data-dataset="2">Pulse</span>
      </div>
      <div id="insufficient-data" class="insufficient-data" style="display: none;">
        <p>Add at least 2 readings to see trend charts</p>
      </div>
      <div class="chart-canvas-wrapper">
        <canvas id="chart-canvas"></canvas>
      </div>
    `,!0):(console.error("Chart container not found!"),!1)}function xf(){document.querySelectorAll(".filter-label").forEach(t=>{t.addEventListener("click",e=>{const i=parseInt(e.target.dataset.dataset),s=e.target.classList.contains("active");e.target.classList.toggle("active"),ee&&ee.data.datasets[i]&&(ee.data.datasets[i].hidden=s,ee.update("active"),console.log(`Dataset ${i} visibility:`,!s))})})}function rr(n){if(n.length===0)return 0;const t=[...n].sort((i,s)=>i-s),e=Math.floor(t.length/2);return t.length%2===0?(t[e-1]+t[e])/2:t[e]}function wf(n){console.log("Updating charts with",n.length,"readings");const t=document.getElementById("chart-section");if(!t)return;if(n.length<2){t.style.display="none";return}t.style.display="block";const e=new Map;if(n.forEach(u=>{const d=new Date(u.date),p=`${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,"0")}-${String(d.getDate()).padStart(2,"0")}`;e.has(p)||e.set(p,[]),e.get(p).push(u)}),e.size<2){t.style.display="none";return}const i=Array.from(e.entries()).map(([u,d])=>{const p=d.map(_=>_.systolic),y=d.map(_=>_.diastolic),v=d.map(_=>_.pulse);return{date:u,systolic:Math.round(rr(p)),diastolic:Math.round(rr(y)),pulse:Math.round(rr(v))}}).sort((u,d)=>u.date.localeCompare(d.date));ls=i;const s=i.map((u,d)=>{const[p,y,v]=u.date.split("-"),_=new Date(p,y-1,v),C=_.getDate();return d===0||y!==i[d-1].date.split("-")[1]?`${_.toLocaleDateString("en-US",{month:"short"})}: ${C}`:C.toString()}),r=i.map(u=>u.systolic),a=i.map(u=>u.diastolic),c=i.map(u=>u.pulse);ee&&(ls=i,ee.data.labels=s,ee.data.datasets[0].data=r,ee.data.datasets[1].data=a,ee.data.datasets[2].data=c,ee.update(),console.log("Combined chart updated"))}const kf=Object.freeze(Object.defineProperty({__proto__:null,initializeCharts:wl,updateCharts:wf},Symbol.toStringTag,{value:"Module"}));let pn,oi=!1;function Sf(){window.matchMedia("(display-mode: standalone)").matches&&(oi=!0,console.log("PWA: App is running in standalone mode")),window.navigator.standalone===!0&&(oi=!0,console.log("PWA: App is running as PWA on iOS"))}async function Mf(){if("serviceWorker"in navigator)try{console.log("PWA: Registering service worker...");const n=await navigator.serviceWorker.register("/blood-pressure-tracker/service-worker.js");return console.log("PWA: Service worker registered successfully",n),n.addEventListener("updatefound",()=>{const t=n.installing;console.log("PWA: New service worker found"),t.addEventListener("statechange",()=>{t.state==="installed"&&navigator.serviceWorker.controller&&(console.log("PWA: New service worker installed, update available"),Pf(n))})}),n}catch(n){return console.error("PWA: Service worker registration failed",n),null}else return console.log("PWA: Service workers not supported"),null}function Pf(n){console.log("PWA: Auto-updating to new version"),n.waiting&&(n.waiting.postMessage({type:"SKIP_WAITING"}),setTimeout(()=>{window.location.reload()},100))}function Of(){Sf(),window.addEventListener("beforeinstallprompt",n=>{console.log("PWA: Install prompt available"),n.preventDefault(),pn=n,Df()}),window.addEventListener("appinstalled",()=>{console.log("PWA: App was installed"),oi=!0,kl(),pn=null})}function Df(){if(oi)return;const n=document.getElementById("install-app-btn");if(n){n.style.display="inline-block";const t=n.cloneNode(!0);n.parentNode.replaceChild(t,n),t.addEventListener("click",async()=>{if(pn){console.log("PWA: Showing install prompt"),pn.prompt();const{outcome:e}=await pn.userChoice;console.log("PWA: Install prompt result:",e),pn=null,kl()}})}}function kl(){const n=document.getElementById("install-app-btn");n&&(n.style.display="none")}function Ef(){console.log("PWA: Initializing PWA features"),Mf(),Of(),oi&&document.body.classList.add("pwa-installed")}function Cf(){return navigator.onLine}function Af(){window.addEventListener("online",()=>{console.log("PWA: App is online"),document.body.classList.remove("offline")}),window.addEventListener("offline",()=>{console.log("PWA: App is offline"),document.body.classList.add("offline")}),Cf()||document.body.classList.add("offline")}async function Tf(){{console.log("Dummy data generation skipped in production");return}}const Br="bp-tracker-theme";function If(){const n=localStorage.getItem(Br);return n||(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}function vr(n){document.documentElement.setAttribute("data-theme",n);const e=document.querySelector(".theme-icon");e&&(e.textContent=n==="dark"?"âï¸":"ð"),localStorage.setItem(Br,n)}function Rf(){const t=(document.documentElement.getAttribute("data-theme")||"light")==="dark"?"light":"dark";vr(t)}function Lf(){const n=If();vr(n);const t=document.getElementById("theme-toggle-btn");t&&t.addEventListener("click",Rf),window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>{localStorage.getItem(Br)||vr(e.matches?"dark":"light")})}class Bf{constructor(t="calendar-container"){this.containerId=t,this.container=document.getElementById(t),this.currentMonth=new Date,this.readings=[],this.readingsByDate=new Map,this.modal=null,this.selectedDate=null}async init(t){this.modal=t,await this.loadReadings(),this.render()}async loadReadings(t=null){if(t)this.readings=t;else{const{getReadings:e}=await _e(async()=>{const{getReadings:i}=await Promise.resolve().then(()=>gn);return{getReadings:i}},void 0);this.readings=await e()}this.readingsByDate=new Map,this.readings.forEach(e=>{const i=new Date(e.date),s=`${i.getFullYear()}-${String(i.getMonth()+1).padStart(2,"0")}-${String(i.getDate()).padStart(2,"0")}`;this.readingsByDate.has(s)||this.readingsByDate.set(s,[]),this.readingsByDate.get(s).push(e)})}async updateReadings(t){await this.loadReadings(t),this.render()}render(){const t=this.currentMonth.getFullYear(),e=this.currentMonth.getMonth(),i=new Date(t,e,1),r=new Date(t,e+1,0).getDate(),a=i.getDay();let u=`
      <div class="calendar-header">
        <button class="calendar-nav" id="prev-month">&lt;</button>
        <h3>${["January","February","March","April","May","June","July","August","September","October","November","December"][e]} ${t}</h3>
        <button class="calendar-nav" id="next-month">&gt;</button>
      </div>
      <div class="calendar-grid">
        <div class="calendar-day-header">Sun</div>
        <div class="calendar-day-header">Mon</div>
        <div class="calendar-day-header">Tue</div>
        <div class="calendar-day-header">Wed</div>
        <div class="calendar-day-header">Thu</div>
        <div class="calendar-day-header">Fri</div>
        <div class="calendar-day-header">Sat</div>
    `;for(let p=0;p<a;p++)u+='<div class="calendar-day empty"></div>';const d=new Date;d.setHours(0,0,0,0);for(let p=1;p<=r;p++){const y=`${t}-${String(e+1).padStart(2,"0")}-${String(p).padStart(2,"0")}`,v=new Date(`${y}T00:00:00`)>d,_=v?" future":"",C=v?' aria-disabled="true"':"",E=this.readingsByDate.get(y);if(E&&E.length>0){const P=this.getMedianReading(E),B=this.getCategoryClass(P.systolic,P.diastolic),H=E.length>1?`<span class="reading-count">${E.length}</span>`:"",Y=this.selectedDate===y?" active":"";u+=`
          <div class="calendar-day has-reading${Y}${_}" data-date="${y}"${C} style="background-color: var(--color-${B})">
            <span class="day-number">${p}</span>
            ${H}
          </div>
        `}else{const P=this.selectedDate===y?" active":"";u+=`
          <div class="calendar-day${P}${_}" data-date="${y}"${C}>
            <span class="day-number">${p}</span>
          </div>
        `}}u+="</div>",this.container.innerHTML=u,this.attachEventListeners()}calculateMedian(t){if(t.length===0)return 0;const e=[...t].sort((s,r)=>s-r),i=Math.floor(e.length/2);return e.length%2===0?(e[i-1]+e[i])/2:e[i]}getMedianReading(t){if(t.length===0)return null;if(t.length===1)return t[0];const e=t.map(r=>r.systolic),i=t.map(r=>r.diastolic),s=t.map(r=>r.pulse);return{systolic:Math.round(this.calculateMedian(e)),diastolic:Math.round(this.calculateMedian(i)),pulse:Math.round(this.calculateMedian(s))}}getCategoryClass(t,e){return t>=180||e>=120?"critical":t>=140||e>=90?"high2":t>=130||e>=80?"high1":t>=120?"elevated":"normal"}attachEventListeners(){var t,e;(t=document.getElementById("prev-month"))==null||t.addEventListener("click",()=>this.prevMonth()),(e=document.getElementById("next-month"))==null||e.addEventListener("click",()=>this.nextMonth()),document.querySelectorAll(".calendar-day[data-date]").forEach(i=>{i.addEventListener("click",s=>{const r=s.currentTarget.dataset.date;s.currentTarget.classList.contains("future")||this.handleDayClick(r)})})}async handleDayClick(t){const e=this.readingsByDate.get(t);console.log("handleDayClick",t,e,this.modal);const i=document.getElementById("reading-date");if(i&&(i.value=t),this.selectedDate=t,this.render(),e&&e.length>0&&this.modal)this.modal.open(e);else try{const{AddReadingModal:s}=await _e(async()=>{const{AddReadingModal:a}=await Promise.resolve().then(()=>Pl);return{AddReadingModal:a}},void 0),r=s();r&&typeof r.open=="function"&&r.open(t)}catch(s){console.error("Error opening AddReadingModal for date:",t,s)}}getCategoryText(t){return{normal:"Normal",elevated:"Elevated",high1:"High Blood Pressure (Stage 1)",high2:"High Blood Pressure (Stage 2)",critical:"Hypertensive Crisis"}[t]||"Unknown"}nextMonth(){this.currentMonth=new Date(this.currentMonth.getFullYear(),this.currentMonth.getMonth()+1,1),this.render()}prevMonth(){this.currentMonth=new Date(this.currentMonth.getFullYear(),this.currentMonth.getMonth()-1,1),this.render()}}function Sl(n,t){return n>180||t>120?{class:"critical",text:"CRITICALLY HIGH BP!"}:n<70||t<50?{class:"critical",text:"CRITICALLY LOW BP!"}:n<90||t<60?{class:"low",text:"Low BP"}:n>=140||t>=90?{class:"high2",text:"High BP: Stage 2"}:n>=130&&n<=139||t>=80&&t<=89?{class:"high1",text:"High BP: Stage 1"}:n>=120&&n<=129&&t<80?{class:"elevated",text:"Elevated BP"}:n>=90&&n<120&&t>=60&&t<80?{class:"normal",text:"Normal BP"}:{class:"elevated",text:"Check values"}}function Ff(n){return n<40?"CRITICAL - Seek immediate medical attention":n<50?"Very Low - Consult doctor":n<60?"Low":n>150?"CRITICAL - Seek immediate medical attention":n>120?"Very High - Consult doctor":n>100?"High":"Normal"}class zf{constructor(t="history-list"){const e=document.getElementById(t);if(!e){console.warn("History list container not found");return}this.containerEl=e,this.containerId=t,this.readings=[]}async init(t){this.readings=t||[],await this.updateReadings(this.readings)}async updateReadings(t){if(this.containerEl){if(t.length===0){this.containerEl.innerHTML="<p>No readings yet</p>";return}this.containerEl.innerHTML=t.map(e=>{const i=new Date(e.date);Sl(e.systolic,e.diastolic);const s=Ff(e.pulse);return`
          <div class="entry">
            <div>
              <strong>${e.systolic}/${e.diastolic}</strong> mmHg, ${e.pulse} bpm (${s})<br>
              <small>${i.toLocaleDateString()} ${i.toLocaleTimeString()}</small>
            </div>
            <button class="delete" onclick="window.deleteReadingById(${e.id})">Delete</button>
          </div>
        `}).join("")}}}class jf{constructor(){this.modal=null,this.numReadings=0,this.currentDateKey=null,this.init(),this.isOpen=()=>this.modal.classList.contains("active")}init(){document.body.insertAdjacentHTML("beforeend",`
      <div class="modal-overlay" id="reading-modal">
        <div class="modal-content">
          <button class="modal-close" aria-label="Close modal">&times;</button>
          <div class="modal-body">
            <!-- Reading details will be populated here -->
          </div>
        </div>
      </div>
    `),this.modal=document.getElementById("reading-modal"),this.attachCloseListeners()}attachCloseListeners(){this.modal.querySelector(".modal-close").addEventListener("click",()=>this.close()),this.modal.addEventListener("click",e=>{this.isOpen()&&e.target===this.modal&&this.close()}),document.addEventListener("keydown",e=>{this.isOpen()&&(e.key==="Escape"||e.key==="Enter")&&this.modal.classList.contains("active")&&this.close()})}open(t){const e=this.modal.querySelector(".modal-body"),i=Array.isArray(t),s=i?t:[t],r=i?s.length:1;if(this.numReadings=r,s.length===0)return;let a=null;if(s.length>1){const P=s.map(Y=>Y.systolic),B=s.map(Y=>Y.diastolic),H=s.map(Y=>Y.pulse);a={systolic:Math.round(this.calculateMedian(P)),diastolic:Math.round(this.calculateMedian(B)),pulse:Math.round(this.calculateMedian(H))}}let c=null;s[0]&&s[0].date&&(this.currentDateKey=this.getDateKey(s[0].date),s.length>1&&(c=new Date(s[0].date).toLocaleDateString()));const u=P=>{const B=P%100;if(B>=11&&B<=13)return"th";switch(P%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}};let d=null;if(s.length>1)if(s[0]&&s[0].date){const P=new Date(s[0].date),B=P.toLocaleString(void 0,{month:"long"}),H=P.getDate();d=`${B} ${H}${u(H)} - ${s.length} saved readings`}else d=`${s.length} saved readings`;const p=a||s[0],y=this.getCategoryClass(p.systolic,p.diastolic);this.getCategoryText(y);const v=this.getAbnormalFlags(p.systolic,p.diastolic,p.pulse),_=this.getIndividualStatuses(p.systolic,p.diastolic,p.pulse);let C='<div class="reading-details">';if(s.length===1){const P=s[0];c=new Date(P.date).toLocaleString(),C+=`
        <div class="reading-single">
          <div class="reading-bp">
            <span class="${v.systolic?"abnormal":""}">${P.systolic}</span>/<span class="${v.diastolic?"abnormal":""}">${P.diastolic}</span>
          </div>
          <div class="reading-pulse ${v.pulse?"abnormal":""}">${P.pulse} bpm</div>
          <div class="reading-time-single">${c}</div>
        </div>
        <div class="reading-status-details">
          <div>Systolic: <span class="${_.systolicClass}">${_.systolicStatus}</span></div>
          <div>Diastolic: <span class="${_.diastolicClass}">${_.diastolicStatus}</span></div>
          <div>Pulse: <span class="${_.pulseClass}">${_.pulseStatus}</span></div>
        </div>
          <div class="add-delete-btns">
            <button class="add-reading-btn" type="button">Add</button>
            <button class="delete-reading-btn" onclick="window.deleteReadingById(${P.id})">Delete</button>
        </div>
      `}s.length>1&&(C+=`<div class="individual-readings">
                  <div class="readings-day-top">
                    ${d?`<div class="readings-day-header">${d}</div>`:`<div class="reading-count-label">${s.length} readings</div>`}
                    <div style="margin-top:12px">
                      <button class="add-reading-btn" type="button">Add</button>
                    </div>
                  </div>
                `,s.forEach(P=>{const B=new Date(P.date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),H=this.getAbnormalFlags(P.systolic,P.diastolic,P.pulse),Y=H.systolic?"abnormal-value":"",j=H.diastolic?"abnormal-value":"",N=H.pulse?"abnormal-value":"";C+=`
            <div class="reading-item" data-id="${P.id}">
              <span class="reading-time">${B}</span>
              <span class="reading-values-compact">
                <span class="${Y}">${P.systolic}</span>/<span class="${j}">${P.diastolic}</span>, <span class="${N}">${P.pulse}</span>
              </span>
              <button class="delete-reading-btn" onclick="window.deleteReadingById(${P.id})">Delete</button>
            </div>
          `}),C+="</div>",C+='<hr class="reading-separator" />',C+=`
      <div class="reading-summary-section">
        <div class="reading-summary-label">Summary (median)</div>
        <div class="reading-summary-content">
        
        <div class="reading-summary-values">
        <div class="reading-bp">
              <span class="${v.systolic?"abnormal":""}">${a.systolic}</span>/<span class="${v.diastolic?"abnormal":""}">${a.diastolic}</span>
            </div>
            <div class="reading-pulse ${v.pulse?"abnormal":""}">${a.pulse} bpm</div>
      </div>
      
      <div class="reading-status-details">
            <div>Systolic: <span class="${_.systolicClass}">${_.systolicStatus}</span></div>
            <div>Diastolic: <span class="${_.diastolicClass}">${_.diastolicStatus}</span></div>
            <div>Pulse: <span class="${_.pulseClass}">${_.pulseStatus}</span></div>
          </div>
        </div>
     </div>
      `),C+="</div>",e.innerHTML=C;const E=e.querySelector(".add-reading-btn");E&&E.addEventListener("click",async P=>{try{const{AddReadingModal:B}=await _e(async()=>{const{AddReadingModal:Y}=await Promise.resolve().then(()=>Pl);return{AddReadingModal:Y}},void 0),H=B();H&&typeof H.open=="function"&&H.open(this.currentDateKey)}catch(B){console.error("Failed to open AddReadingModal from ReadingInfoModal",B)}}),this.modal.classList.add("active"),this.modal.setAttribute("tabindex","-1"),this.modal.focus()}updateReadings(t){if(!(!this.modal||!this.isOpen()))try{if(Array.isArray(t)){let e=t;this.currentDateKey&&(e=t.filter(i=>i&&i.date&&this.getDateKey(i.date)===this.currentDateKey)),e.length===0?this.close():this.open(e)}else t&&this.open(t)}catch(e){console.error("ReadingInfoModal.updateReadings error",e)}}close(){this.modal.classList.remove("active"),this.currentDateKey=null}getDateKey(t){try{const e=new Date(t);return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`}catch{return null}}calculateMedian(t){if(t.length===0)return 0;const e=[...t].sort((s,r)=>s-r),i=Math.floor(e.length/2);return e.length%2===0?(e[i-1]+e[i])/2:e[i]}getAbnormalFlags(t,e,i){return{systolic:t>=120,diastolic:e>=80,pulse:i<60||i>100}}getCategoryClass(t,e){return t>=180||e>=120?"critical":t>=140||e>=90?"high2":t>=130||e>=80?"high1":t>=120?"elevated":"normal"}getCategoryText(t){return{normal:"Normal",elevated:"Elevated",high1:"High Blood Pressure (Stage 1)",high2:"High Blood Pressure (Stage 2)",critical:"Hypertensive Crisis"}[t]||"Unknown"}getIndividualStatuses(t,e,i){let s="Normal",r="status-normal";t>=180?(s="Critical",r="status-critical"):t>=140?(s="High",r="status-high"):(t>=130||t>=120)&&(s="Elevated",r="status-elevated");let a="Normal",c="status-normal";e>=120?(a="Critical",c="status-critical"):e>=90?(a="High",c="status-high"):e>=80&&(a="Elevated",c="status-elevated");let u="Normal",d="status-normal";return i<60?(u="Low",d="status-low"):i>100&&(u="High",d="status-high"),{systolicStatus:s,systolicClass:r,diastolicStatus:a,diastolicClass:c,pulseStatus:u,pulseClass:d}}}class Nf{constructor(t){this.current=t,this.undoStack=[],this.redoStack=[]}get(){return this.current}set(t){this.undoStack.push(this.current),this.current=t,this.redoStack.length=0}setSnapshot(t){this.current=t}undo(){this.undoStack.length&&(this.redoStack.push(this.current),this.current=this.undoStack.pop())}redo(){this.redoStack.length&&(this.undoStack.push(this.current),this.current=this.redoStack.pop())}}const Hf=n=>String(n).replace(/[&<>"'`=\/]/g,e=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#x60;","=":"&#x3D;","/":"&#x2F;"})[e]),Kf=(n,t)=>n.replace(/\$\{([^}]+)\}/g,(e,i)=>{const s=i.trim(),r=s.split(".").reduce((c,u)=>c==null?void 0:c[u],t);return r==null?"":s.endsWith("Html")?String(r):Hf(String(r))}),Wf=(n,t={})=>{const e=document.createElement("template");return e.innerHTML=Kf(n,t),e.content.cloneNode(!0)},$f=(n,t)=>{const e=[];let i=t;for(;i&&i!==n;){const s=i.parentElement;if(!s)break;const r=Array.prototype.indexOf.call(s.children,i);e.push(r),i=s}return e.reverse()},Vf=(n,t)=>t.reduce((e,i)=>e&&e.children?e.children[i]:null,n),qf=n=>Array.from(n.querySelectorAll("input, textarea, select")).map(t=>({name:t.name,id:t.id,path:$f(n,t),value:t.value,checked:t.checked,selectionStart:t.selectionStart,selectionEnd:t.selectionEnd,wasFocused:document.activeElement===t})),Uf=n=>n.replace(/["'\\]/g,"\\$&"),Yf=(n,t)=>{t.forEach(e=>{let i=null;if(e.name){const s=Uf(e.name);i=n.querySelector(`input[name="${s}"], textarea[name="${s}"], select[name="${s}"]`)}else e.id?i=n.querySelector(`#${e.id}`):e.path&&(i=Vf(n,e.path));if(i){if(i.value=e.value,e.checked!==void 0&&(i.checked=e.checked),e.selectionStart!=null&&i.setSelectionRange)try{i.setSelectionRange(e.selectionStart,e.selectionEnd)}catch{}if(e.wasFocused)try{i.focus()}catch{}}})},Xf=n=>Array.from(n.querySelectorAll("video, audio")).map(t=>({src:t.currentSrc||t.src,currentTime:t.currentTime,paused:t.paused,volume:t.volume,playbackRate:t.playbackRate,muted:t.muted})),Gf=(n,t)=>{const e=n.querySelectorAll("video, audio");for(const i of e)if(i.currentSrc===t||i.src===t)return i;return null},Qf=(n,t)=>{t.forEach(e=>{if(!e.src)return;const i=Gf(n,e.src);i&&(i.currentTime=e.currentTime,i.volume=e.volume,i.playbackRate=e.playbackRate,i.muted=e.muted,e.paused||i.play().catch(()=>{}))})},Jf=()=>document.readyState!=="loading",Zf=({initialProps:n={},template:t="",handlers:e={},parent:i=null,containerTag:s="div",className:r="",onMount:a=null,onCleanup:c=null,autoAppend:u=!0,preserveInputState:d=!0}={})=>{if(!Jf())return console.error("createComponent: DOM must be ready before creating components."),null;const p=document.createElement(s);r&&(p.className=r);let y={...n};const v=new Set,_=/\$\{([^}]+)\}/g;let C;for(;(C=_.exec(t))!==null;){const j=C[1].trim().split(".")[0];v.add(j)}const E=[],P=[],B={},H=()=>{let j=[],N=[];d&&(j=qf(p),N=Xf(p)),p.textContent="";const Q=Wf(t,y);p.appendChild(Q),Object.keys(e).forEach($=>{const U=p.querySelectorAll(`[onclick="${$}"]`),nt=e[$];U.forEach(ct=>{ct.removeAttribute("onclick"),typeof nt=="function"&&ct.addEventListener("click",nt)})}),d&&(Yf(p,j),Qf(p,N)),E.forEach($=>$({...y}))},Y=j=>{if(!Array.isArray(j)||j.length===0)return;const N={props:{...y},changedKeys:j};P.forEach(Q=>Q(N))};for(const j of Object.keys(n))B[j]=[],Object.defineProperty(p,j,{get(){return y[j]},set(N){y[j]!==N&&(y[j]=N,v.has(j)&&H(),B[j].forEach(Q=>Q(N)),Y([j]))},configurable:!0,enumerable:!0});if(p.update=j=>{let N=!1,Q=!1;const $=[];for(const U in j)j[U]!==y[U]&&(y[U]=j[U],v.has(U)&&(Q=!0),B[U]&&B[U].forEach(nt=>nt(j[U])),N=!0,$.push(U));N&&Q&&H(),$.length>0&&Y($)},p.onRender=j=>{typeof j=="function"&&E.push(j)},p.onAnyPropUpdated=j=>{typeof j=="function"&&P.push(j)},p.onPropUpdated=(j,N)=>{typeof N=="function"&&B[j]&&B[j].push(N)},p.dispose=()=>{c&&(Array.isArray(c)?c.forEach(j=>{typeof j=="function"&&j()}):typeof c=="function"&&c()),E.length=0,P.length=0;for(const j in B)B[j].length=0;p.remove()},H(),u&&i&&!i.contains(p)&&i.appendChild(p),typeof a=="function")try{a(p)}catch(j){tempWarn("[createComponent]: Error in onMount handler of component",j)}return p},tp=`
  <div class="modal-overlay" id="add-reading-modal">
    <div class="modal-content">
      <button class="modal-close" aria-label="Close modal">&times;</button>
      <div class="modal-body">
        <form id="reading-form" class="input-group">
          <div class="input-with-scale">
            <input type="number" id="systolic" placeholder="Systolic" />
            <div class="visual-scale" id="systolic-scale">
              <div class="scale-track">
                <div class="scale-segment normal"></div>
                <div class="scale-segment elevated"></div>
                <div class="scale-segment high1"></div>
                <div class="scale-segment high2"></div>
                <div class="scale-segment crisis"></div>
              </div>
              <div class="scale-indicator" id="systolic-indicator"></div>
            </div>
          </div>

          <div class="input-with-scale">
            <input type="number" id="diastolic" placeholder="Diastolic" />
            <div class="visual-scale" id="diastolic-scale">
              <div class="scale-track">
                <div class="scale-segment normal"></div>
                <div class="scale-segment high1"></div>
                <div class="scale-segment high2"></div>
                <div class="scale-segment crisis"></div>
              </div>
              <div class="scale-indicator" id="diastolic-indicator"></div>
            </div>
          </div>

          <div class="input-with-scale">
            <input type="number" id="pulse" placeholder="Pulse" />
            <div class="visual-scale" id="pulse-scale">
              <div class="scale-track">
                <div class="scale-segment low"></div>
                <div class="scale-segment normal"></div>
                <div class="scale-segment high"></div>
              </div>
              <div class="scale-indicator" id="pulse-indicator"></div>
            </div>
          </div>

          <!-- Optional date picker for adding past readings -->
          <div class="input-with-scale">
            <input type="date" id="reading-date" aria-label="Reading date" />
          </div>
          <div class="reading-form-modal-btns">
            <button type="button">Cancel</button>
            <button type="submit">OK</button>
          </div>
        </form>
      </div>
    </div>
  </div>`,Ml=()=>Zf({initialProps:{systolic:"",diastolic:"",pulse:"",date:""},template:tp,parent:document.body,containerTag:"div",className:"add-reading-modal",onMount:n=>{const t=n.querySelector("form"),e=n.querySelector(".modal-overlay"),i=n.querySelector(".modal-close"),s=n.querySelector('button[type="button"]'),r=async p=>{var y,v,_,C;p.preventDefault();try{const E=U=>e.querySelector(U),P=parseInt((y=E("#systolic"))==null?void 0:y.value),B=parseInt((v=E("#diastolic"))==null?void 0:v.value),H=parseInt((_=E("#pulse"))==null?void 0:_.value);if(!P||!B||!H){alert("Please enter systolic, diastolic and pulse values");return}const Y=(C=E("#reading-date"))==null?void 0:C.value,j=new Date;let N;if(Y){const U=new Date(Y);U.setHours(j.getHours(),j.getMinutes(),j.getSeconds(),j.getMilliseconds()),N=U.toISOString()}else N=j.toISOString();const Q=Sl(P,B),$={systolic:P,diastolic:B,pulse:H,date:N,category:Q};await Fa($),document.dispatchEvent(new CustomEvent("readings-updated")),document.dispatchEvent(new CustomEvent("reading-added",{detail:$})),n.close&&n.close()}catch(E){console.error("AddReadingModal submit error",E),alert("Error saving reading. See console for details.")}},a=p=>{if(!e)return;n._previouslyFocused=document.activeElement,e.classList.add("active");const y=e.querySelector("#reading-date");y&&(p?y.value=p:y.valueAsDate=new Date);const v=e.querySelector("#systolic");v&&!v.disabled&&v.offsetParent!==null&&v.focus()},c=p=>{p.target===e&&n.close()},u=p=>{if(!(!e||!e.classList.contains("active"))){if(p.key==="Escape"){n.close();return}if(p.key==="Tab"){const y=Array.from(e.querySelectorAll('a[href], button:not([disabled]), input:not([disabled]), select:not([disabled]), textarea:not([disabled]), [tabindex]:not([tabindex="-1"])')).filter(C=>C.offsetParent!==null);if(y.length===0){p.preventDefault();return}const v=y[0],_=y[y.length-1];p.shiftKey?document.activeElement===v&&(p.preventDefault(),_.focus()):document.activeElement===_&&(p.preventDefault(),v.focus())}}},d=()=>{t&&t.removeEventListener("submit",r),i&&i.removeEventListener("click",n.close),s&&s.removeEventListener("click",n.close),e&&e.removeEventListener("click",c),document.removeEventListener("keydown",u)};t&&t.addEventListener("submit",r),i&&i.addEventListener("click",n.close),s&&s.addEventListener("click",n.close),e&&e.addEventListener("click",c),document.addEventListener("keydown",u),n.open=a,n.close=()=>{e&&e.classList.contains("active")&&(e.classList.remove("active"),n._previouslyFocused&&typeof n._previouslyFocused.focus=="function"&&n._previouslyFocused.focus()),setTimeout(()=>{try{n.dispose()}catch(p){console.warn("Error disposing modal",p)}},140)},a(),n._cleanup=d},onCleanup:n=>{n&&typeof n._cleanup=="function"&&n._cleanup()},autoAppend:!0,preserveInputState:!0}),Pl=Object.freeze(Object.defineProperty({__proto__:null,AddReadingModal:Ml},Symbol.toStringTag,{value:"Module"}));let Qn=null,Xt=null,Jn=null;const en=new Nf(null);window.deleteReadingById=ep;window.generateDummyDataHandler=np;async function ep(n){try{try{const{getReadingById:t}=await _e(async()=>{const{getReadingById:i}=await Promise.resolve().then(()=>gn);return{getReadingById:i}},void 0),e=await t(n);if(e){let i;try{i=typeof structuredClone=="function"?structuredClone(e):JSON.parse(JSON.stringify(e))}catch{i=JSON.parse(JSON.stringify(e))}en.undoStack.length=0,en.redoStack.length=0,en.current=i}}catch(t){console.warn("Failed to snapshot reading for undo:",t)}await za(n),document.dispatchEvent(new CustomEvent("readings-updated")),document.dispatchEvent(new CustomEvent("reading-deleted",{detail:{id:n}}))}catch(t){console.error("Error deleting reading by id:",t),alert("Error deleting reading. Please try again.")}}async function Ia(){const{getReadings:n}=await _e(async()=>{const{getReadings:s}=await Promise.resolve().then(()=>gn);return{getReadings:s}},void 0),t=await n(),e=en.get();(!e||Array.isArray(e))&&en.setSnapshot(t),Jn&&typeof Jn.updateReadings=="function"&&await Jn.updateReadings(t),Qn&&typeof Qn.updateReadings=="function"&&await Qn.updateReadings(t),Xt&&typeof Xt.updateReadings=="function"&&Xt.updateReadings(t);const{updateCharts:i}=await _e(async()=>{const{updateCharts:s}=await Promise.resolve().then(()=>kf);return{updateCharts:s}},void 0);i&&i(t)}document.addEventListener("DOMContentLoaded",async()=>{console.log("Blood Pressure Tracker initialized"),Lf(),Ef(),Af(),vc(),wl(),Xt=new jf,Qn=new Bf("calendar-container"),await Qn.init(Xt),Jn=new zf("history-list"),await Jn.init();const n=document.getElementById("reading-date");n&&!n.value&&(n.value=new Date().toISOString().slice(0,10)),await Ia();const t=document.getElementById("user-select"),e=document.getElementById("add-user-btn");async function i(){const{getAllUsers:r}=await _e(async()=>{const{getAllUsers:u}=await Promise.resolve().then(()=>gn);return{getAllUsers:u}},void 0),a=await r(),c=Zn();for(;t.options.length>1;)t.remove(1);a.forEach(u=>{const d=document.createElement("option");d.value=u.id,d.textContent=u.username,t.appendChild(d)}),c&&c.id!=null?t.value=c.id:t.value=""}await i(),t.addEventListener("change",async r=>{const a=r.target.value;if(a==="")Ba(),document.dispatchEvent(new CustomEvent("readings-updated"));else{const{getAllUsers:c}=await _e(async()=>{const{getAllUsers:p}=await Promise.resolve().then(()=>gn);return{getAllUsers:p}},void 0),d=(await c()).find(p=>p.id===parseInt(a));d&&(await ar(d.username),document.dispatchEvent(new CustomEvent("readings-updated")))}}),e.addEventListener("click",async()=>{const r=prompt("Enter username");if(r&&r.trim())try{await ar(r.trim()),await i(),document.dispatchEvent(new CustomEvent("readings-updated"))}catch(a){console.error("Failed to set current user",a)}}),document.getElementById("new-reading-btn").addEventListener("click",()=>{Ml()}),document.addEventListener("readings-updated",async()=>{await Ia()}),document.addEventListener("reading-added",r=>{const a=r==null?void 0:r.detail;a&&Xt&&typeof Xt.open=="function"&&Xt.open(a)}),document.addEventListener("reading-deleted",()=>{Xt&&typeof Xt.close=="function"&&Xt.numReadings<=1&&Xt.close()}),document.addEventListener("keydown",async r=>{const a=r.target;if(!(a&&(a.isContentEditable||a.tagName==="INPUT"||a.tagName==="TEXTAREA"||a.tagName==="SELECT")||!(navigator.platform.toUpperCase().indexOf("MAC")>=0?r.metaKey:r.ctrlKey)||(r.key&&r.key.toLowerCase())!=="z")){r.preventDefault();try{const p=en.get();if(!p||Array.isArray(p))return;const{restoreReading:y}=await _e(async()=>{const{restoreReading:v}=await Promise.resolve().then(()=>gn);return{restoreReading:v}},void 0);typeof y=="function"?(await y(p),en.current=null,document.dispatchEvent(new CustomEvent("readings-updated"))):console.warn("restoreReading not available on storage module")}catch(p){console.error("Undo via keyboard failed",p)}}})});async function np(){console.log("Generating dummy data...");try{const n=await Tf();document.dispatchEvent(new CustomEvent("readings-updated")),alert(`Successfully added ${n} dummy readings for development testing!`),console.log("Dummy data generation completed")}catch(n){console.error("Error generating dummy data:",n),alert("Error generating dummy data. Check console for details.")}}
